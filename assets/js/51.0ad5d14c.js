(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[51],{"2f20":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"q-gutter-y-xs",attrs:{padding:""}},[s("div",{staticClass:"row q-col-gutter-xs items-center"},[s("div",{staticClass:"col-6"},[s("q-input",{attrs:{type:"number",outlined:"",label:"QRCode Size"},model:{value:e.size,callback:function(t){e.size=e._n(t)},expression:"size"}})],1),s("div",{staticClass:"col-6"},[s("DateTime",{attrs:{outlined:"",label:"Valid Until (clear for unlimited validity)",clearable:""},model:{value:e.validity,callback:function(t){e.validity=t},expression:"validity"}})],1),s("div",{staticClass:"col-xs-12 col-md-4"},[s("MenuSelectDropDown",{attrs:{get:"id",outlined:""},model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}})],1),s("div",{staticClass:"col-xs-6 col-md-4"},[s("PriceListSelectDropDown",{attrs:{readonly:e.enable_order&&"Dining"===e.type,label:"Select Price List",get:"id",outlined:""},model:{value:e.price_list,callback:function(t){e.price_list=t},expression:"price_list"}})],1),"Yes"===e.GH75F?s("div",{staticClass:"col-xs-6 col-md-4"},[s("q-toggle",{attrs:{size:"lg","checked-icon":"check","unchecked-icon":"clear",color:"primary",label:"Enable Ordering from online menu"},model:{value:e.enable_order,callback:function(t){e.enable_order=t},expression:"enable_order"}})],1):e._e()]),s("transition",{attrs:{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"}},[e.enable_order?s("div",{staticClass:"row q-col-gutter-xs items-center q-mt-xs"},[s("div",{staticClass:"col-6"},[s("OrderTypeSelectDropDown",{attrs:{skip:["Other","Remote"],outlined:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),"Home Delivery"===e.type?s("div",{staticClass:"col-6"},[s("OrderCustomer",{attrs:{get:"id",outlined:""},model:{value:e.customer,callback:function(t){e.customer=t},expression:"customer"}})],1):e._e(),"Dining"===e.type?[s("div",{staticClass:"col-6"},[s("q-select",{attrs:{options:["Yes","No"],label:"For All Tables",outlined:""},model:{value:e.all_tables,callback:function(t){e.all_tables=t},expression:"all_tables"}})],1),s("div",{staticClass:"col-12"},[s("SeatSelectDropDown",{attrs:{readonly:"Yes"===e.all_tables,get:"id",outlined:"",name:function(e){var t=e.name;return t}},model:{value:e.seating,callback:function(t){e.seating=t},expression:"seating"}})],1)]:e._e()],2):e._e()]),s("q-btn",{staticClass:"full-width",attrs:{label:"Generate",color:"primary",padding:"md lg"},on:{click:e.generate}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.qr_codes.length,expression:"qr_codes.length"}],staticClass:"row q-col-gutter-xs q-mt-xs"},e._l(e.qr_codes,(function(t,a){return s("div",{key:"olm-qrcode-"+a,staticClass:"col-xs-12 col-sm-12 col-md-6 col-lg-4 col-xl-3"},[s("q-card",[s("q-bar",{staticClass:"bg-primary text-white text-caption q-py-lg"},[e._v(e._s(t[0])),s("q-space"),s("q-btn",{attrs:{icon:"get_app",flat:"",round:""},on:{click:function(t){return e.download(a)}}})],1),s("q-card-section",{staticClass:"text-center"},[s("QrcodeVue",{ref:"QR"+a,refInFor:!0,attrs:{value:t[1],size:e.size,level:"M"}})],1),s("q-card-section",{staticClass:"bg-grey-2 text-primary text-center text-caption"},[s("q-btn",{attrs:{type:"a",href:t[1],label:t[0],dense:"",flat:"",size:"sm","no-caps":"",target:"_blank"}})],1)],1)],1)})),0)],1)},l=[],i=(s("a434"),s("5319"),s("1e25"),s("d7b0")),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-select",e._b({attrs:{options:e.options,value:e.optValue,label:"Select Menu","option-label":"name"},on:{input:e.doEmit}},"q-select",e.$attrs,!1))},o=[],r=s("2071"),c={name:"MenuSelectDropDown",mixins:[r["a"]],computed:{options(){return _.map(this.$store.state.menus.data)}}},d=c,u=s("2877"),p=s("ddd8"),m=s("eebe"),b=s.n(m),g=Object(u["a"])(d,n,o,!1,null,null,null),h=g.exports;b()(g,"components",{QSelect:p["a"]});var v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-select",e._b({attrs:{options:e.options,value:e.optValue,label:"Type"},on:{input:e.doEmit}},"q-select",e.$attrs,!1))},f=[],y=s("232e"),q={name:"OrderTypeSelectDropDown",mixins:[r["a"]],props:["skip"],computed:{options(){return _.difference(y["OrderTypes"],this.skips)},skips(){return _.isString(this.skip)?[this.skip]:this.skip}}},x=q,D=Object(u["a"])(x,v,f,!1,null,null,null),C=D.exports;b()(D,"components",{QSelect:p["a"]});var w=s("9708"),k=s("9061"),S=s("5632"),Q=s("5dee"),O=s("b1c1"),R=s("2f62"),E=s("ab75");const{GH75F:z,JI36A:T}=s("adfa").FEATURES;var M={name:"PageOnlineMenuQRCodes",components:{DateTime:Q["a"],SeatSelectDropDown:S["a"],PriceListSelectDropDown:k["a"],OrderCustomer:w["a"],OrderTypeSelectDropDown:C,MenuSelectDropDown:h,QrcodeVue:i["a"]},data(){return{GH75F:z,menu:null,type:null,customer:null,price_list:null,seating:null,size:300,validity:Object(O["q"])("YYYY-MM-DD HH:mm:ss"),enable_order:!1,all_tables:"Yes",qr_codes:[],url:[T?E["b"]:_.trimEnd(LOGIN.replace("login","menu"),"/"),"#",T||"local",""].join("/")}},computed:Object(R["d"])({seats:e=>e.seating.data,customers:e=>e.customers.data,menus:e=>e.menus.data,pls:e=>e.prices.list}),methods:{encode(e){return this.url+encodeURI(btoa(JSON.stringify(Object.assign({},e,{validity:this.validity,branch:_BRANCH}))))},generate(){if(this.qr_codes.splice(0,this.qr_codes.length),this.enable_order&&"No"!==z){let e=[{type:this.type,price_list:this.price_list,menu:this.menu}],t=[_.get(this.pls,[this.price_list,"name"])+" Price List "+this.type+" QR Code"];if("Home Delivery"===this.type&&(e[0]["customer"]=this.customer,t[0]=t[0]+" for "+_.get(this.customers,[this.customer,"name"])),"Dining"===this.type&&(delete e[0]["price_list"],"No"===this.all_tables&&(e[0]["seating"]=this.seating,t[0]=_.get(this.seats,[this.seating,"name"])+" Dining QR Code"),"Yes"===this.all_tables)){let s=_.clone(e[0]);_(this.seats).filter(["status","Active"]).forEach((function(a,l){t[l]=a.name+" Dining QR Code",0===l?e[l]["seating"]=a.id:e.push(_.set(_.clone(s),"seating",a.id))}))}_.forEach(e,((e,s)=>this.qr_codes.push([t[s],this.encode(e)])))}else this.qr_codes.push([_.get(this.menus,[this.menu,"name"],"").replaceAll("menu","")+" Menu QR Code",this.encode({menu:this.menu,price_list:this.price_list})])},download(e){let t=this.$refs["QR"+e][0].$el.children[0],s=document.createElement("a"),a=_.startCase(this.qr_codes[e][0]).replace(/\s/g,"");s.setAttribute("download",a+".png"),s.setAttribute("href",t.toDataURL("image/png").replace("image/png","image/octet-stream")),s.click()}}},Y=M,A=s("9989"),H=s("27f9"),$=s("9564"),j=s("9c40"),N=s("f09f"),F=s("d847"),I=s("2c91"),L=s("a370"),P=Object(u["a"])(Y,a,l,!1,null,null,null);t["default"]=P.exports;b()(P,"components",{QPage:A["a"],QInput:H["a"],QToggle:$["a"],QSelect:p["a"],QBtn:j["a"],QCard:N["a"],QBar:F["a"],QSpace:I["a"],QCardSection:L["a"]})}}]);