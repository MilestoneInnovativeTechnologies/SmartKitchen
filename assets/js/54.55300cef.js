(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[54],{"2f20":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("q-page",{staticClass:"q-gutter-y-xs",attrs:{padding:""}},[t("div",{staticClass:"row q-col-gutter-xs items-center"},[t("div",{staticClass:"col-6"},[t("q-input",{attrs:{type:"number",outlined:"",label:"QRCode Size"},model:{value:e.size,callback:function(t){e.size=e._n(t)},expression:"size"}})],1),t("div",{staticClass:"col-6"},[t("DateTime",{attrs:{outlined:"",label:"Valid Until (clear for unlimited validity)",clearable:""},model:{value:e.validity,callback:function(t){e.validity=t},expression:"validity"}})],1),t("div",{staticClass:"col-xs-12 col-md-4"},[t("MenuSelectDropDown",{attrs:{get:"id",outlined:""},model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}})],1),t("div",{staticClass:"col-xs-6 col-md-4"},[t("PriceListSelectDropDown",{attrs:{readonly:e.enable_order&&"Dining"===e.type,label:"Select Price List",get:"id",outlined:""},model:{value:e.price_list,callback:function(t){e.price_list=t},expression:"price_list"}})],1),"Yes"===e.GH75F?t("div",{staticClass:"col-xs-6 col-md-4"},[t("q-toggle",{attrs:{size:"lg","checked-icon":"check","unchecked-icon":"clear",color:"primary",label:"Enable Ordering from online menu"},model:{value:e.enable_order,callback:function(t){e.enable_order=t},expression:"enable_order"}})],1):e._e()]),t("transition",{attrs:{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"}},[e.enable_order?t("div",{staticClass:"row q-col-gutter-xs items-center q-mt-xs"},[t("div",{staticClass:"col-6"},[t("OrderTypeSelectDropDown",{attrs:{skip:["Other","Remote"],outlined:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),"Home Delivery"===e.type?t("div",{staticClass:"col-6"},[t("OrderCustomer",{attrs:{get:"id",outlined:""},model:{value:e.customer,callback:function(t){e.customer=t},expression:"customer"}})],1):e._e(),"Dining"===e.type?[t("div",{staticClass:"col-6"},[t("q-select",{attrs:{options:["Yes","No"],label:"For All Tables",outlined:""},model:{value:e.all_tables,callback:function(t){e.all_tables=t},expression:"all_tables"}})],1),t("div",{staticClass:"col-12"},[t("SeatSelectDropDown",{attrs:{readonly:"Yes"===e.all_tables,get:"id",outlined:"",name:({name:e})=>e},model:{value:e.seating,callback:function(t){e.seating=t},expression:"seating"}})],1)]:e._e()],2):e._e()]),t("q-btn",{staticClass:"full-width",attrs:{label:"Generate",color:"primary",padding:"md lg"},on:{click:e.generate}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.qr_codes.length,expression:"qr_codes.length"}],staticClass:"row q-col-gutter-xs q-mt-xs"},e._l(e.qr_codes,(function(s,a){return t("div",{key:"olm-qrcode-"+a,staticClass:"col-xs-12 col-sm-12 col-md-6 col-lg-4 col-xl-3"},[t("q-card",[t("q-bar",{staticClass:"bg-primary text-white text-caption q-py-lg"},[e._v(e._s(s[0])),t("q-space"),t("q-btn",{attrs:{icon:"get_app",flat:"",round:""},on:{click:function(t){return e.download(a)}}})],1),t("q-card-section",{staticClass:"text-center"},[t("QrcodeVue",{ref:"QR"+a,refInFor:!0,attrs:{value:s[1],size:e.size,level:e.level}})],1),t("q-card-section",{staticClass:"bg-grey-2 text-primary text-center text-caption"},[t("q-btn",{attrs:{type:"a",href:s[1],label:s[0],dense:"",flat:"",size:"sm","no-caps":"",target:"_blank"}})],1)],1)],1)})),0)],1)},l=[],i=(s("5319"),s("b7ef"),s("14d9"),s("d7b0")),n=function(){var e=this,t=e._self._c;return t("q-select",e._b({attrs:{options:e.options,value:e.optValue,label:"Select Menu","option-label":"name"},on:{input:e.doEmit}},"q-select",e.$attrs,!1))},o=[],r=s("2071"),c={name:"MenuSelectDropDown",mixins:[r["a"]],computed:{options(){return _.map(this.$store.state.menus.data)}}},d=c,u=s("2877"),p=s("ddd8"),m=s("eebe"),b=s.n(m),g=Object(u["a"])(d,n,o,!1,null,null,null),h=g.exports;b()(g,"components",{QSelect:p["a"]});var v=function(){var e=this,t=e._self._c;return t("q-select",e._b({attrs:{options:e.options,value:e.optValue,label:"Type"},on:{input:e.doEmit}},"q-select",e.$attrs,!1))},f=[],y=s("232e"),q={name:"OrderTypeSelectDropDown",mixins:[r["a"]],props:["skip"],computed:{options(){return _.difference(y["OrderTypes"],this.skips)},skips(){return _.isString(this.skip)?[this.skip]:this.skip}}},D=q,x=Object(u["a"])(D,v,f,!1,null,null,null),C=x.exports;b()(x,"components",{QSelect:p["a"]});var w=s("9708"),k=s("9061"),S=s("5632"),Q=s("5dee"),O=s("b1c1"),R=s("2f62"),z=s("ab75"),E=s("adfa");const{GH75F:T,JI36A:M}=s("adfa").FEATURES;var Y={name:"PageOnlineMenuQRCodes",components:{DateTime:Q["a"],SeatSelectDropDown:S["a"],PriceListSelectDropDown:k["a"],OrderCustomer:w["a"],OrderTypeSelectDropDown:C,MenuSelectDropDown:h,QrcodeVue:i["a"]},data(){return{GH75F:T,menu:null,type:null,customer:null,price_list:null,seating:null,size:300,level:settings("qr_code_level")||"M",validity:Object(O["s"])("YYYY-MM-DD HH:mm:ss"),enable_order:!1,all_tables:"Yes",qr_codes:[],url:[M?"https://"+z["b"]:_.trimEnd(LOGIN.replace("login","menu"),"/"),"#",M||"local",btoa(JSON.stringify(z["a"])),""].join("/")}},computed:Object(R["d"])({seats:e=>e.seating.data,customers:e=>e.customers.data,menus:e=>e.menus.data,pls:e=>e.prices.list}),methods:{encode(e){return this.url+encodeURI(btoa(JSON.stringify(Object.assign({},e,{validity:this.validity,branch:E["BRANCH_CODE"]}))))},generate(){if(this.qr_codes.splice(0,this.qr_codes.length),this.enable_order&&"No"!==T){let e=[{type:this.type,price_list:this.price_list,menu:this.menu}],t=[_.get(this.pls,[this.price_list,"name"])+" Price List "+this.type+" QR Code"];if("Home Delivery"===this.type&&(e[0]["customer"]=this.customer,t[0]=t[0]+" for "+_.get(this.customers,[this.customer,"name"])),"Dining"===this.type&&(delete e[0]["price_list"],"No"===this.all_tables&&(e[0]["seating"]=this.seating,t[0]=_.get(this.seats,[this.seating,"name"])+" Dining QR Code"),"Yes"===this.all_tables)){let s=_.clone(e[0]);_(this.seats).filter(["status","Active"]).forEach((function(a,l){t[l]=a.name+" Dining QR Code",0===l?e[l]["seating"]=a.id:e.push(_.set(_.clone(s),"seating",a.id))}))}_.forEach(e,((e,s)=>this.qr_codes.push([t[s],this.encode(e)])))}else this.qr_codes.push([_.get(this.menus,[this.menu,"name"],"").replace("menu","")+" Menu QR Code",this.encode({menu:this.menu,price_list:this.price_list})])},download(e){let t=this.$refs["QR"+e][0].$el.children[0],s=document.createElement("a"),a=_.startCase(this.qr_codes[e][0]).replace(/\s/g,"");s.setAttribute("download",`${a}.png`),s.setAttribute("href",t.toDataURL("image/png").replace("image/png","image/octet-stream")),s.click()}}},H=Y,N=s("9989"),j=s("27f9"),A=s("9564"),F=s("9c40"),I=s("f09f"),L=s("d847"),P=s("2c91"),$=s("a370"),G=Object(u["a"])(H,a,l,!1,null,null,null);t["default"]=G.exports;b()(G,"components",{QPage:N["a"],QInput:j["a"],QToggle:A["a"],QSelect:p["a"],QBtn:F["a"],QCard:I["a"],QBar:L["a"],QSpace:P["a"],QCardSection:$["a"]})}}]);