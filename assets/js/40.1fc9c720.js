(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[40],{a6fa:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"q-gutter-y-md",attrs:{padding:""}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.delivery_today_pending.length,expression:"delivery_today_pending.length"}]},[s("div",{staticClass:"text-h6 q-px-xs text-subtitle1"},[e._v("Today Deliverable Orders")]),s("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},e._l(e.delivery_today_pending,(function(t){return s("q-expansion-item",{key:e.hKey("dpo",t),attrs:{group:"dpo","switch-toggle-side":""},scopedSlots:e._u([{key:"header",fn:function(){return[s("q-item-section",[t.customer?s("q-item-label",[e._v(e._s(e.customers[parseInt(t.customer)].name))]):e._e(),s("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.date_human))])],1),s("q-item-section",{attrs:{side:""}},[s("q-badge",{staticClass:"q-px-sm q-py-sm",attrs:{color:e.tpc[t.progress],label:t.progress}})],1)]},proxy:!0}],null,!0)},[s("q-card",{staticClass:"bg-grey-1"},[s("q-card-section",{staticClass:"q-py-xs"},[s("q-list",{attrs:{separator:""}},e._l(t.items,(function(r){return s("q-item",{key:e.hKey("roti",r)},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{square:""}},[s("img",{attrs:{src:e.image(e.items[r.item].image)}})])],1),s("q-item-section",[s("q-item-label",[e._v(e._s(r.quantity)+" x "+e._s(e.items[r.item].name))]),s("q-item-label",{attrs:{caption:""}},[e._v("Delivery On: "+e._s(r.deliver_human))]),r.kitchen?s("q-item-label",{attrs:{caption:""}},[e._v("Kitchen: "+e._s(e.kitchens[r.kitchen].name))]):e._e()],1),s("q-item-section",{attrs:{side:""}},[s("q-badge",{staticClass:"q-px-sm q-py-xs",attrs:{color:e.tipc[r.progress],label:r.progress}})],1),e.cancelable.includes(r.progress)?s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{icon:"close",color:"red",dense:"",round:"",size:"sm"},on:{click:function(s){return e.cancel(r,t,!1)}}})],1):e._e(),e.serve_able.includes(r.progress)?s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{icon:"how_to_reg",color:"positive",dense:"",round:"",size:"sm"},on:{click:function(s){return e.serve(r,t,!1)}}})],1):e._e()],1)})),1)],1)],1)],1)})),1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.delivery_past_pending.length,expression:"delivery_past_pending.length"}]},[s("div",{staticClass:"text-h6 q-px-xs text-subtitle1"},[e._v("Pending Past Orders")]),s("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},e._l(e.delivery_past_pending,(function(t){return s("q-expansion-item",{key:e.hKey("dpp",t),attrs:{group:"dpp","switch-toggle-side":""},scopedSlots:e._u([{key:"header",fn:function(){return[s("q-item-section",[t.customer?s("q-item-label",[e._v(e._s(e.customers[parseInt(t.customer)].name))]):e._e(),s("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.date_human))])],1),s("q-item-section",{attrs:{side:""}},[s("q-badge",{staticClass:"q-px-sm q-py-sm",attrs:{color:e.tpc[t.progress],label:t.progress}})],1)]},proxy:!0}],null,!0)},[s("q-card",{staticClass:"bg-grey-1"},[s("q-card-section",{staticClass:"q-py-xs"},[s("q-list",{attrs:{separator:""}},e._l(t.items,(function(r){return s("q-item",{key:e.hKey("roti",r)},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{square:""}},[s("img",{attrs:{src:e.image(e.items[r.item].image)}})])],1),s("q-item-section",[s("q-item-label",[e._v(e._s(r.quantity)+" x "+e._s(e.items[r.item].name))]),s("q-item-label",{attrs:{caption:""}},[e._v("Delivery On: "+e._s(r.deliver_human))]),r.kitchen?s("q-item-label",{attrs:{caption:""}},[e._v("Kitchen: "+e._s(e.kitchens[r.kitchen].name))]):e._e()],1),s("q-item-section",{attrs:{side:""}},[s("q-badge",{staticClass:"q-px-sm q-py-xs",attrs:{color:e.tipc[r.progress],label:r.progress}})],1),e.cancelable.includes(r.progress)?s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{icon:"close",color:"red",dense:"",round:"",size:"sm"},on:{click:function(s){return e.cancel(r,t,!1)}}})],1):e._e(),e.serve_able.includes(r.progress)?s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{icon:"how_to_reg",color:"positive",dense:"",round:"",size:"sm"},on:{click:function(s){return e.serve(r,t,!1)}}})],1):e._e()],1)})),1)],1)],1)],1)})),1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.delivery_tomorrow.length,expression:"delivery_tomorrow.length"}]},[s("div",{staticClass:"text-h6 q-px-xs text-subtitle1"},[e._v("Tomorrow Deliverable Orders")]),s("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},e._l(e.delivery_tomorrow,(function(t){return s("q-expansion-item",{key:e.hKey("tdo",t),attrs:{group:"tdo","switch-toggle-side":""},scopedSlots:e._u([{key:"header",fn:function(){return[s("q-item-section",[t.customer?s("q-item-label",[e._v(e._s(e.customers[parseInt(t.customer)].name))]):e._e(),s("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.date_human))])],1),s("q-item-section",{attrs:{side:""}},[s("q-badge",{staticClass:"q-px-sm q-py-sm",attrs:{color:e.tpc[t.progress],label:t.progress}})],1)]},proxy:!0}],null,!0)},[s("q-card",{staticClass:"bg-grey-1"},[s("q-card-section",{staticClass:"q-py-xs"},[s("q-list",{attrs:{separator:""}},e._l(t.items,(function(r){return s("q-item",{key:e.hKey("roti",r)},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{square:""}},[s("img",{attrs:{src:e.image(e.items[r.item].image)}})])],1),s("q-item-section",[s("q-item-label",[e._v(e._s(r.quantity)+" x "+e._s(e.items[r.item].name))]),s("q-item-label",{attrs:{caption:""}},[e._v("Delivery On: "+e._s(r.deliver_human))]),r.kitchen?s("q-item-label",{attrs:{caption:""}},[e._v("Kitchen: "+e._s(e.kitchens[r.kitchen].name))]):e._e()],1),s("q-item-section",{attrs:{side:""}},[s("q-badge",{staticClass:"q-px-sm q-py-xs",attrs:{color:e.tipc[r.progress],label:r.progress}})],1),e.cancelable.includes(r.progress)?s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{icon:"close",color:"red",dense:"",round:"",size:"sm"},on:{click:function(s){return e.cancel(r,t,!1)}}})],1):e._e(),e.serve_able.includes(r.progress)?s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{icon:"how_to_reg",color:"positive",dense:"",round:"",size:"sm"},on:{click:function(s){return e.serve(r,t,!1)}}})],1):e._e()],1)})),1)],1)],1)],1)})),1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.delivery_tomorrow.length,expression:"delivery_tomorrow.length"}]},[s("div",{staticClass:"text-h6 q-px-xs text-subtitle1"},[e._v("Upcoming Orders")]),s("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},e._l(e.delivery_upcoming,(function(t){return s("q-expansion-item",{key:e.hKey("dup",t),attrs:{group:"dup","switch-toggle-side":""},scopedSlots:e._u([{key:"header",fn:function(){return[s("q-item-section",[t.customer?s("q-item-label",[e._v(e._s(e.customers[parseInt(t.customer)].name))]):e._e(),s("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.date_human))])],1),s("q-item-section",{attrs:{side:""}},[s("q-badge",{staticClass:"q-px-sm q-py-sm",attrs:{color:e.tpc[t.progress],label:t.progress}})],1)]},proxy:!0}],null,!0)},[s("q-card",{staticClass:"bg-grey-1"},[s("q-card-section",{staticClass:"q-py-xs"},[s("q-list",{attrs:{separator:""}},e._l(t.items,(function(r){return s("q-item",{key:e.hKey("roti",r)},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{square:""}},[s("img",{attrs:{src:e.image(e.items[r.item].image)}})])],1),s("q-item-section",[s("q-item-label",[e._v(e._s(r.quantity)+" x "+e._s(e.items[r.item].name))]),s("q-item-label",{attrs:{caption:""}},[e._v("Delivery On: "+e._s(r.deliver_human))]),r.kitchen?s("q-item-label",{attrs:{caption:""}},[e._v("Kitchen: "+e._s(e.kitchens[r.kitchen].name))]):e._e()],1),s("q-item-section",{attrs:{side:""}},[s("q-badge",{staticClass:"q-px-sm q-py-xs",attrs:{color:e.tipc[r.progress],label:r.progress}})],1),e.cancelable.includes(r.progress)?s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{icon:"close",color:"red",dense:"",round:"",size:"sm"},on:{click:function(s){return e.cancel(r,t,!1)}}})],1):e._e(),e.serve_able.includes(r.progress)?s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{icon:"how_to_reg",color:"positive",dense:"",round:"",size:"sm"},on:{click:function(s){return e.serve(r,t,!1)}}})],1):e._e()],1)})),1)],1)],1)],1)})),1)],1),s("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[s("q-page-sticky",{directives:[{name:"show",rawName:"v-show",value:e.fab||!e.orders.length,expression:"fab || !orders.length"}],attrs:{position:"bottom-right",offset:e.offset}},[s("q-fab",{directives:[{name:"touch-pan",rawName:"v-touch-pan.prevent.mouse",value:e.move,expression:"move",modifiers:{prevent:!0,mouse:!0}}],attrs:{icon:"add",color:"primary",glossy:"",to:{name:"orders_remote_new"}}})],1)],1),s("q-dialog",{attrs:{value:!!e.confirm,persistent:""},on:{"before-hide":function(t){e.confirm=!1}}},[e.confirm?s("q-card",[s("q-card-section",{staticClass:"text-white",class:"bg-"+e.property[e.prop][0]},[s("div",{staticClass:"text-h6"},[e._v("Are you sure???")]),s("div",[e._v(e._s(e.property[e.prop][1]))])]),s("q-card-section",[s("q-list",{attrs:{dense:"",separator:""}},[s("q-item",{attrs:{clickable:""}},[s("q-item-section",[e._v("Customer")]),s("q-item-section",{staticClass:"text-bold text-red",attrs:{side:""}},[e._v(e._s(e.customers[e.confirm.customer].name))])],1),s("q-item",{attrs:{clickable:""}},[s("q-item-section",[e._v("Token ID")]),s("q-item-section",{staticClass:"text-bold text-red",attrs:{side:""}},[e._v(e._s(e.confirm.token))])],1),s("q-item",{attrs:{clickable:""}},[s("q-item-section",[e._v("Order Date")]),s("q-item-section",{staticClass:"text-bold text-red",attrs:{side:""}},[e._v(e._s(e.confirm.date_human))])],1),s("q-item",{attrs:{clickable:""}},[s("q-item-section",[e._v("Deliver Date")]),s("q-item-section",{staticClass:"text-bold text-red",attrs:{side:""}},[e._v(e._s(e.confirm.deliver))])],1),s("q-item",{attrs:{clickable:""}},[s("q-item-section",[e._v("Item Name")]),s("q-item-section",{staticClass:"text-bold text-red",attrs:{side:""}},[e._v(e._s(e.items[e.confirm.item].name))])],1),s("q-item",{attrs:{clickable:""}},[s("q-item-section",[e._v("Item Quantity")]),s("q-item-section",{staticClass:"text-bold text-red",attrs:{side:""}},[e._v(e._s(e.confirm.quantity)+" ")])],1)],1)],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancel",color:"primary"}}),s("q-btn",{staticClass:"q-px-md",attrs:{loading:e.loading,color:e.property[e.prop][0],label:"Yes, Proceed"},on:{click:function(t){"cancel"===e.prop?e.cancel(e.confirm,e.confirm,!0):e.serve(e.confirm,e.confirm,!0)}}})],1)],1):e._e()],1)],1)},i=[],a=s("ded3"),o=s.n(a),n=s("2f62"),c=s("b1c1"),l=s("232e"),m={name:"PageRemoteOrders",data(){return{tpc:l["TokenProgressColor"],tipc:l["TokenItemProgressColor"],fab:!0,offset:[24,24],confirm:!1,loading:!1,cancelable:["New","Accepted"],serve_able:["Completed"],prop:"",property:{cancel:["red","You are about to cancel an item of remote order"],serve:["positive","You are about to serve an item of remote order"]}}},computed:o()(o()(o()({},Object(n["d"])({customers:e=>e.customers.data,items:e=>e.items.data,kitchens:e=>e.kitchens.data})),Object(n["b"])({orders:"tokens/remote"})),{},{delivery_today_pending(){return _.filter(this.orders,(({items:e})=>_.some(e,(({deliver:e,progress:t})=>Object(c["j"])(e)&&d({progress:t})))))},delivery_past_pending(){return _.filter(this.orders,(({items:e})=>_.some(e,(({deliver:e,progress:t})=>Object(c["i"])(e,8)&&d({progress:t})))))},delivery_tomorrow(){return _.filter(this.orders,(({items:e})=>_.some(e,(({deliver:e,progress:t})=>Object(c["k"])(e)&&d({progress:t})))))},delivery_upcoming(){return _(this.orders).filter((({items:e})=>_.some(e,(({deliver:e})=>Object(c["h"])(e)&&!Object(c["k"])(e))))).sortBy(p).value()}}),methods:{ip:c["k"],hKey(e,{id:t}){return Object(c["d"])(e,t)},image(e){return Object(c["e"])(e)},move(e){this.offset=[this.offset[0]-e.delta.x,this.offset[1]-e.delta.y]},cancel(e,t,s){if(this.prop="cancel",!s)return this.confirm=Object.assign({},t,e,{token:t.id});this.loading=!0;let r=this;post("token","cancel",{id:e.id}).then((()=>r.confirm=!1)).catch().then((()=>this.loading=!1))},serve(e,t,s){if(this.prop="serve",!s)return this.confirm=Object.assign({},t,e,{token:t.id});this.loading=!0;let r=this;post("token","served",{id:e.id}).then((()=>r.confirm=!1)).catch().then((()=>this.loading=!1))}}};function d({progress:e}){return["New","Processing","Accepted"].includes(e)}function p({items:e}){return _(e).map((({deliver:e})=>Object(c["c"])(e,"YYYY-MM-DD HH:mm:ss").getTime())).min()}var u=m,q=s("2877"),v=s("9989"),g=s("1c1c"),b=s("3b73"),h=s("4074"),y=s("0170"),f=s("58a8"),x=s("f09f"),k=s("a370"),C=s("66e5"),w=s("cb32"),O=s("9c40"),Q=s("de5e"),j=s("c294"),D=s("24e8"),I=s("4b7e"),K=s("75c3"),P=s("7f67"),N=s("eebe"),z=s.n(N),S=Object(q["a"])(u,r,i,!1,null,null,null);t["default"]=S.exports,z()(S,"components",{QPage:v["a"],QList:g["a"],QExpansionItem:b["a"],QItemSection:h["a"],QItemLabel:y["a"],QBadge:f["a"],QCard:x["a"],QCardSection:k["a"],QItem:C["a"],QAvatar:w["a"],QBtn:O["a"],QPageSticky:Q["a"],QFab:j["a"],QDialog:D["a"],QCardActions:I["a"]}),z()(S,"directives",{TouchPan:K["a"],ClosePopup:P["a"]})}}]);