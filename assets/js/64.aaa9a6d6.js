(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[64],{"16e6":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticClass:"q-gutter-y-sm",attrs:{padding:""}},[i("ReceptionistBillSummary"),i("ReceptionistServableItems"),i("ReceptionistHomeDeliveryStatuses"),i("OnlineOrdersPendingList",{attrs:{color:"purple",title:"Pending Online Orders"}}),i("ReceptionistNonDiningTokens",{attrs:{color:"teal"},on:{action:e.OSA_action}}),i("ReceptionistRemoteTokens"),i("OrderSummaryActionPopups",e._b({on:{done:e.OSA_action_done}},"OrderSummaryActionPopups",e.OSA_CB,!1))],1)},s=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row q-col-gutter-xs"},[i("div",{staticClass:"col-xs-6 col-md-3"},[i("DigitMetric",{attrs:{value:e.pending.length,bg:"cyan",text:"white",title:"Pending Bills",icon:"receipt"}})],1),i("div",{staticClass:"col-xs-6 col-md-3"},[i("DigitMetric",{attrs:{value:e.pending_amount,bg:"orange",text:"white",title:"Pending Amount",icon:"request_quote"}})],1),i("div",{staticClass:"col-xs-6 col-md-3"},[i("DigitMetric",{attrs:{value:e.paid.length,bg:"lime",text:"white",title:"Paid Bills",icon:"file_copy"}})],1),i("div",{staticClass:"col-xs-6 col-md-3"},[i("DigitMetric",{attrs:{value:e.paid_amount,bg:"green",text:"white",title:"Total Payments",icon:"payments"}})],1)])},a=[],o=i("84ba"),l=i("58d1"),c=i("b1c1"),m={name:"ReceptionistBillSummary",components:{DigitMetric:o["a"]},mixins:[l["a"]],computed:{today(){return _(this.bills).filter((({date:e})=>Object(c["o"])(e))).value()},pending(){return _(this.today).filter(["progress","Pending"]).value()},pending_amount(){return _.sumBy(this.pending,(({payable:e})=>_.toNumber(e)))},paid(){return _(this.today).filter((({progress:e})=>["Paid","Partial"].includes(e))).value()},paid_amount(){return _.sumBy(this.paid,(({paid:e})=>_.toNumber(e)))}}},d=m,u=i("2877"),p=Object(u["a"])(d,r,a,!1,null,null,null),g=p.exports,v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.Tokens.length?i("q-card",[i("q-card-section",{staticClass:"row justify-between text-bold text-white items-center q-py-xs",class:"bg-"+e.clr},[i("div",[e._v("Non Dining Orders")]),i("FilterInputText",{staticClass:"gt-xs",staticStyle:{width:"50vw"},attrs:{"bg-color":"white",label:"Filter",lazy:""},on:{text:function(t){e.filter=t}}}),i("div",[e._v(e._s(e.Tokens.length))])],1),i("q-card-section",{staticClass:"q-pa-xs"},[i("FilterInputText",{staticClass:"q-mb-sm lt-sm",attrs:{label:"Search",lazy:""},on:{text:function(t){e.filter=t}}}),i("Masonry",{attrs:{items:e.Filtered_tokens,width:"260"},scopedSlots:e._u([{key:"item",fn:function(t){return[i("OrderSummaryReceptionistOrder",e._g({attrs:{token:t}},e.$listeners))]}}],null,!1,2438893413)})],1)],1):e._e()},h=[],b=(i("26e9"),i("ddb0"),i("3b1b")),f=i("c624"),y=i("3f08"),k=i("5ab9"),q={name:"ReceptionistNonDiningTokens",components:{FilterInputText:k["a"],Masonry:f["a"],OrderSummaryReceptionistOrder:b["a"]},mixins:[l["a"],y["a"]],props:["color"],data(){return{activeProgress:["New","Processing","Completed","Billed","Pending"],displayTypes:["Take Away","Sale","Other"],filter:""}},computed:{Tokens(){return _(this.tokens).filter((({type:e,progress:t})=>this.displayTypes.includes(e)&&this.activeProgress.includes(t))).map((e=>Object.assign({},e,{bill:this.token_bill[e.id]},{slug:x(e,this.token_bill[e.id])}))).reverse().value()},Filtered_tokens(){return this.filter?_.filter(this.Tokens,(e=>_.includes(e.slug,_.toLower(this.filter)))):_.take(this.Tokens,10)},clr(){return this.color||"teal"}},methods:{hKey({id:e}){return Object(c["e"])("receptionist","non","dining","token",e)}}};function x(e,t){let i=_.pick(_.get(e,"customer"),["name","phone"]),n=_.map(_.get(e,"items"),"item.name"),s=_.get(e,["waiter","name"]),r=(_.get(e,"type"),_.get(t,"id")),a=_.get(t,"amount");return _.toLower(_.join(_.concat(e.id,r,n,_.values(i),s,a)," "))}var w=q,C=i("f09f"),S=i("a370"),O=i("eebe"),T=i.n(O),R=Object(u["a"])(w,v,h,!1,null,null,null),P=R.exports;T()(R,"components",{QCard:C["a"],QCardSection:S["a"]});var D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.items.length?i("q-card",[i("q-card-section",{staticClass:"row justify-between text-bold bg-green text-white"},[i("div",[e._v("Servable Items")]),e.items.length>0?i("div",[e._v(e._s(e.items.length))]):e._e()]),i("q-list",{attrs:{separator:"",bordered:""}},e._l(e.items,(function(t){return i("q-item",{key:"order-receptionist-servable-item-"+t.id},[i("q-item-section",[i("q-item-label",[e._v(e._s(t.quantity)+" X "+e._s(t.item?t.item.name:""))]),i("q-item-label",{attrs:{caption:""}},[i("q-icon",{attrs:{name:"outdoor_grill"}}),e._v(" "+e._s(t.kitchen?t.kitchen.name:""))],1),i("q-item-label",{attrs:{caption:""}},[i("q-icon",{attrs:{name:"event_seat"}}),e._v(" "+e._s(e.SeatingName(t.token)))],1),i("q-item-label",{staticClass:"text-bold",attrs:{caption:""}},[i("q-icon",{attrs:{name:"account_box"}}),e._v(" "+e._s(t.user?t.user.name:""))],1)],1),i("q-item-section",{attrs:{side:""}},[i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.itemTiming(t.progress_timing))+" ago")])],1),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{icon:"how_to_reg",color:"positive",round:"",dense:""},on:{click:function(i){return e.served(t.id)}}})],1),e.serving.includes(t.id)?i("q-inner-loading",{attrs:{showing:!0}},[i("q-spinner-facebook",{attrs:{color:"primary",size:"2em"}})],1):e._e()],1)})),1)],1):e._e()},j=[],Q=(i("5db7"),i("73d9"),i("3758")),I={name:"ReceptionistServableItems",mixins:[Q["a"]],data(){return{now:0,serving:[]}},computed:{items(){return _.flatMap(this.tokens_own,(e=>"Dining"!==e.type?[]:_.filter(e.items,["progress","Completed"])))}},methods:{SeatingName(e){return _.get(_.find(this.tokens,["id",e]),["seating","name"])},itemTiming(e){let t=this.now-_.get(_.last(e),"time");return t<60?t+" seconds":t<3600?_.toInteger(t/60)+" minutes":_.toInteger(t/3600)+" hours"},served(e){this.serving.push(e),post("token","served",{id:e}).then((()=>this.serving=_.difference(this.serving,[e])))}},created(){setInterval((e=>e.now=_.toInteger((new Date).getTime()/1e3)),1e3,this)},watch:{items(e,t){(!t||t.length<e.length)&&Object(c["b"])()}}},B=I,M=i("1c1c"),F=i("66e5"),A=i("4074"),E=i("0170"),L=i("0016"),N=i("9c40"),$=i("74f7"),H=i("e669"),Y=Object(u["a"])(B,D,j,!1,null,null,null),z=Y.exports;T()(Y,"components",{QCard:C["a"],QCardSection:S["a"],QList:M["a"],QItem:F["a"],QItemSection:A["a"],QItemLabel:E["a"],QIcon:L["a"],QBtn:N["a"],QInnerLoading:$["a"],QSpinnerFacebook:H["a"]});var K=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.remote_client&&e.rTokens.length?i("q-card",[i("q-card-section",{staticClass:"bg-grey-2 row justify-between text-bold"},[i("div",[e._v("Remote Orders Statuses")]),i("div",[e._v(e._s(e.rTokens.length))])]),i("ReceptionistRecentRemoteTokensSummary",{attrs:{tokens:e.rTokens}})],1):e._e()},V=[],G=(i("498a"),i("ded3")),J=i.n(G),U=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-list",{attrs:{separator:""}},e._l(e.tokens,(function(t){return i("q-expansion-item",{key:"rrrtk-t-"+t.id,attrs:{group:"one",dense:""},scopedSlots:e._u([{key:"header",fn:function(){return[i("q-item-section",[i("q-item-label",[e._v(e._s(e.to_format("D/MMM",t.date)))])],1),i("q-item-section",[i("q-item-label",[e._v(e._s(t.customer?t.customer.name:"--no-customer--"))])],1),i("q-item-section",{attrs:{side:""}},[i("q-badge",{staticClass:"q-py-xs",attrs:{color:e.tpc[e.progress(t)],label:e.progress(t)}})],1)]},proxy:!0}],null,!0)},[i("q-card",[i("q-list",{attrs:{separator:"",dense:""}},e._l(t.items,(function(n){return i("q-item",{key:"rrrtk-ti-t-"+t.id+"-ti-"+n.id+"-i-"+n.item.id},[i("q-item-section",[i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.to_format("D/MMM hh:mm A",n.deliver)))])],1),i("q-item-section",[i("q-item-label",{attrs:{caption:""}},[e._v(e._s(n.quantity)+"x "+e._s(n.item?n.item.name:"--no-item--"))])],1),i("q-item-section",{attrs:{side:""}},[i("q-badge",{staticClass:"q-py-xs",attrs:{color:e.tpc[n.progress],label:n.progress}})],1)],1)})),1)],1)],1)})),1)},X=[],W=i("232e"),Z={name:"ReceptionistRecentRemoteTokensSummary",props:["tokens"],data(){return{tpc:W["TokenProgressColor"]}},computed:{},methods:{to_format:c["E"],progress({progress:e,items:t}){return"Processing"!==e?e:_.every(t,{progress:"Completed"})?"Completed":e}}},ee=Z,te=i("3b73"),ie=i("58a8"),ne=Object(u["a"])(ee,U,X,!1,null,null,null),se=ne.exports;T()(ne,"components",{QList:M["a"],QExpansionItem:te["a"],QItemSection:A["a"],QItemLabel:E["a"],QBadge:ie["a"],QCard:C["a"],QItem:F["a"]});var re=i("2f62");const{CC71V:ae,DP71V:oe,KK99V:le}=i("adfa").FEATURES;var ce={name:"ReceptionistRemoteTokens",components:{ReceptionistRecentRemoteTokensSummary:se},mixins:[Q["a"]],data(){return{remote_client:"Yes"===ae&&""!==_.trim(oe)&&"Yes"===le}},computed:J()(J()({},Object(re["b"])({progresses:"bills/token_progresses"})),{},{rTokens(){return _(this.tokens_remote).filter(me).filter((({items:e,id:t})=>de(e)||this.not_paid(t))).sortBy(ue).value()}}),methods:{hKey({id:e}){return Object(c["e"])("receptionist","remote","token",e)},not_paid(e){return"Paid"!==_.get(this.progresses,e)}}};function me({items:e}){return _.some(e,(({deliver:e})=>Object(c["o"])(e)||Object(c["m"])(e,3)||Object(c["l"])(e,3)))}function de(e){return _.some(e,(({progress:e})=>["New","Processing","Accepted","Completed"].includes(e)))}function ue({items:e}){return _(e).map((({deliver:e})=>Object(c["d"])(e,"YYYY-MM-DD HH:mm:ss").getTime())).min()}var pe=ce,ge=Object(u["a"])(pe,K,V,!1,null,null,null),_e=ge.exports;T()(ge,"components",{QCard:C["a"],QCardSection:S["a"]});var ve=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.Tokens.length||e.filter?i("q-card",[i("q-card-section",{staticClass:"bg-deep-purple text-white row justify-between text-bold items-center q-py-xs"},[i("div",[e._v("Home Delivery Statuses")]),i("FilterInputText",{staticClass:"gt-xs",staticStyle:{width:"50vw"},attrs:{"bg-color":"white",label:"Filter",lazy:""},on:{text:function(t){e.filter=t}}}),i("div",[e._v(e._s(e.Tokens.length))])],1),i("q-card-section",{staticClass:"lt-sm"},[i("FilterInputText",{attrs:{label:"Search",lazy:""},on:{text:function(t){e.filter=t}}})],1),i("OrderSummaryDeliveryBoy",{attrs:{tokens:e.show,kitchen:"",user:""},on:{generate:function(t){e.generating=t},deliver:function(t){e.delivering=t}}}),i("q-dialog",{attrs:{persistent:"",value:null!==e.generating},on:{hide:function(t){e.generating=null}}},[e.generating?i("BillGenerateCard",{style:e.popup_width(),attrs:{token:e.generating,close:!0},on:{generated:function(t){e.generating=null}}}):e._e()],1),i("q-dialog",{attrs:{persistent:"",value:null!==e.delivering},on:{hide:function(t){e.delivering=null}}},[e.delivering?i("DeliveryBoyPaymentCard",{style:e.popup_width(),attrs:{token:e.delivering},on:{paid:function(t){e.delivering=null}}}):e._e()],1)],1):e._e()},he=[],be=i("db7a"),fe=i("bf22"),ye=i("1cd8"),ke={name:"ReceptionistHomeDeliveryStatuses",mixins:[l["a"]],components:{FilterInputText:k["a"],DeliveryBoyPaymentCard:ye["a"],BillGenerateCard:fe["a"],OrderSummaryDeliveryBoy:be["a"]},data(){return{generating:null,delivering:null,filter:""}},computed:{Tokens(){return _(this.tokens).filter(["type","Home Delivery"]).filter((({progress:e})=>!["Paid","Cancelled"].includes(e))).map((e=>e.customer?e:Object.assign({},e,{customer:W["NoCustomer"]}))).map((e=>Object.assign({},e,{slug:qe(e),bill:_.get(this.token_bill,e.id)}))).sortBy("id").reverse().value()},show(){return this.filter?_.filter(this.Tokens,(e=>_.includes(e.slug,_.toLower(this.filter)))):_.take(this.Tokens,10)}},methods:{image:c["i"],popup_width:c["y"]}};function qe(e){let t=_.pick(_.get(e,"customer"),["name","phone"]),i=_.map(_.get(e,"items"),"item.name"),n=_.get(e,["waiter","name"]);return _.toLower(_.join(_.concat(e.id,i,_.values(t),n)," "))}var xe=ke,we=i("24e8"),Ce=Object(u["a"])(xe,ve,he,!1,null,null,null),Se=Ce.exports;T()(Ce,"components",{QCard:C["a"],QCardSection:S["a"],QDialog:we["a"]});var Oe=i("79d0"),Te=i("c9df"),Re={name:"PageReceptionistIndex",components:{OrderSummaryActionPopups:Te["a"],OnlineOrdersPendingList:Oe["a"],ReceptionistRemoteTokens:_e,ReceptionistServableItems:z,ReceptionistNonDiningTokens:P,ReceptionistBillSummary:g,ReceptionistHomeDeliveryStatuses:Se},mixins:[y["a"]]},Pe=Re,De=i("9989"),je=Object(u["a"])(Pe,n,s,!1,null,null,null);t["default"]=je.exports;T()(je,"components",{QPage:De["a"]})}}]);