(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{b56d:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-layout",{attrs:{view:"hhh LpR fFf"}},[s("q-header",{staticClass:"bg-primary text-white",attrs:{reveal:"",elevated:"","height-hint":"98"}},[e.special?s("q-toolbar",[s("q-toolbar-title",[s("div",{staticClass:"row items-center"},[s("q-btn",{attrs:{to:{name:"chef_index"},flat:"",round:"",dense:"",icon:"arrow_back_ios"}}),s("KitchenSelectElement",{attrs:{dark:"",borderless:""},model:{value:e.kitchen,callback:function(t){e.kitchen=t},expression:"kitchen"}})],1)]),s("q-toolbar-title",{staticClass:"gt-xs text-center"},[s("span",{staticClass:"text-white text-subtitle2"},[e._v(e._s(e.time))])]),s("q-toolbar-title",{staticClass:"row"},[s("q-space"),s("KitchenTokenDisplayMode",{attrs:{dark:"",borderless:""},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}}),s("q-btn",{staticClass:"q-mx-sm self-center",attrs:{rounded:"",color:"white",icon:"undo","text-color":"red"},on:{click:function(t){e.reset=!0}}}),s("ManualSync")],1)],1):s("q-toolbar",[s("q-toolbar-title",[e.$store.state.back?s("q-btn",{attrs:{to:e.$store.state.back,flat:"",round:"",dense:"",icon:"arrow_back_ios"}}):e._e(),e._v("\n        "+e._s(e.$store.state.title||e.chef)+"\n      ")],1),s("ManualSync"),s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"power_settings_new",type:"a",href:e.logout}})],1)],1),s("q-page-container",[s("router-view"),s("q-dialog",{attrs:{value:e.k_show,persistent:""}},[s("KitchenSelect",{staticStyle:{width:"75vw","max-width":"330px"}})],1)],1),s("q-footer",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.footer&&!e.special,expression:"$store.state.footer && !special"}],staticClass:"bg-primary text-white",attrs:{elevated:""}},[s("q-tabs",{attrs:{align:"left"}},[s("q-route-tab",{attrs:{to:{name:"chef_index"},label:"Home",icon:"home"}}),s("q-route-tab",{attrs:{to:{name:e.kitchens_route},label:"Kitchens",icon:"kitchen"}}),s("q-route-tab",{attrs:{to:{name:"tokens"},label:"Tokens",icon:"receipt"}})],1)],1)],1)},i=[],n=s("ed79"),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-card",[s("q-card-section",{staticClass:"bg-grey-2 row items-center"},[s("div",{staticClass:"text-bold"},[e._v("Select Kitchen")]),s("q-space"),s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.selected.length&&0!==e.selected[0],expression:"selected.length && selected[0] !== 0"},{name:"close-popup",rawName:"v-close-popup"}],staticClass:"text-weight-bold",attrs:{round:"",icon:"clear",flat:"",color:"red-12"}})],1),s("q-list",{attrs:{separator:"",bordered:""}},e._l(e.kitchens,(function(t){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.hKey(t),attrs:{clickable:""},on:{click:function(s){e.selected=t}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",[s("img",{attrs:{src:"img/defaults/kitchen.png"}})])],1),s("q-item-section",[s("q-item-label",[e._v(e._s(t.name))])],1),s("q-item-section",{attrs:{side:""}},[s("q-icon",{attrs:{size:"lg",name:"toggle_"+(e.is_selected(t)?"on":"off"),color:e.is_selected(t)?"positive":"grey"}})],1)],1)})),1)],1)},r=[],o=(s("ddb0"),s("ded3")),l=s.n(o),h=s("2f62"),d=s("b1c1"),u={name:"KitchenSelect",data(){return{}},computed:l()(l()({},Object(h["d"])("kitchens",{kitchens:"data",assigned:"assign"})),{},{selected:{get(){return this.assigned},set({id:e}){this.$store.dispatch("kitchens/chef",{kitchen:e})}}}),methods:{is_selected({id:e}){return this.selected.includes(e)},hKey({id:e}){return Object(d["d"])("chef","kitchen","select",e)}},created(){this.selected.length||1!==_.size(this.kitchens)||(this.selected=_.first(_.values(this.kitchens)))}},m=u,p=s("2877"),b=s("f09f"),k=s("a370"),g=s("2c91"),f=s("9c40"),v=s("1c1c"),w=s("66e5"),q=s("4074"),x=s("cb32"),Q=s("0170"),$=s("0016"),S=s("7f67"),y=s("714f"),C=s("eebe"),K=s.n(C),T=Object(p["a"])(m,c,r,!1,null,null,null),O=T.exports;K()(T,"components",{QCard:b["a"],QCardSection:k["a"],QSpace:g["a"],QBtn:f["a"],QList:v["a"],QItem:w["a"],QItemSection:q["a"],QAvatar:x["a"],QItemLabel:Q["a"],QIcon:$["a"]}),K()(T,"directives",{ClosePopup:S["a"],Ripple:y["a"]});var j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-select",e._b({attrs:{options:e.kitchens},model:{value:e.kitchen,callback:function(t){e.kitchen=t},expression:"kitchen"}},"q-select",e.$attrs,!1))},E=[],I={name:"KitchenSelectElement",props:["value"],computed:l()(l()({},Object(h["d"])("kitchens",{kitchens({data:e,assign:t}){return _(t).map((t=>_.get(e,t,null))).filter().map((({id:e,name:t})=>_.zipObject(["label","value"],[this.truncate(t),e]))).value()}})),{},{kitchen:{get(){return this.value&&_.find(this.kitchens,["value",_.toInteger(this.value)])?_.find(this.kitchens,["value",_.toInteger(this.value)]):_.first(this.kitchens)},set({value:e}){this.$emit("input",_.toInteger(e))}}}),methods:{truncate(e){return this.$q.screen.width<500?_.truncate(e,{length:10}):e}},mounted(){this.kitchen=_.cloneDeep(this.kitchen)}},D=I,L=s("ddd8"),M=Object(p["a"])(D,j,E,!1,null,null,null),N=M.exports;K()(M,"components",{QSelect:L["a"]});var R=s("3610"),z={name:"ChefLayout",components:{KitchenTokenDisplayMode:R["a"],KitchenSelectElement:N,KitchenSelect:O,ManualSync:n["a"]},data(){return{chef:_USER.name,logout:LOGOUT,kitchens_route:"chef_kitchens",k:null,m:null,time:B()}},computed:{assigned(){return this.$store.state.kitchens.assign},k_show(){return!this.assigned.length&&this.$route.name!==this.kitchens_route||1===this.assigned.length&&0===this.assigned[0]},special(){return"tokens"===this.$route.name},kitchen:{get(){return _.get(this.$store.state,["public","kitchen"],null)},set(e){this.$store.commit("public",{kitchen:e})}},mode:{get(){return _.get(this.$store.state,["public","mode"],null)},set(e){this.$store.commit("public",{mode:e})}},reset:{get(){return!!_.get(this.$store.state,["public","reset"],!1)},set(e){this.$store.commit("public",{reset:!!e})}}},watch:{time:{immediate:!0,handler(){setTimeout((e=>e.time=B()),1e3*(60-(new Date).getSeconds()),this)}}},created(){let e=_SECTION["kitchen"];this.$store.commit("kitchens/assign",e,{root:!0})}};function B(){return Object(d["p"])((new Date).getTime()+"","x")}var F=z,H=s("4d5a"),J=s("e359"),P=s("65c6"),U=s("6ac5"),A=s("09e3"),G=s("24e8"),V=s("7ff0"),W=s("429b"),X=s("7867"),Y=Object(p["a"])(F,a,i,!1,null,null,null);t["default"]=Y.exports;K()(Y,"components",{QLayout:H["a"],QHeader:J["a"],QToolbar:P["a"],QToolbarTitle:U["a"],QBtn:f["a"],QSpace:g["a"],QPageContainer:A["a"],QDialog:G["a"],QFooter:V["a"],QTabs:W["a"],QRouteTab:X["a"]})}}]);