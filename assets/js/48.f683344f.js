(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[48],{fcb2:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"flex-center flex column",attrs:{padding:""}},[s("q-card",{attrs:{flat:""}},[s("q-card-section",{directives:[{name:"show",rawName:"v-show",value:t.errorShow&&t.errorMsg,expression:"errorShow && errorMsg"}],staticClass:"text-red-10 text-center text-uppercase text-bold"},[t._v(t._s(t.errorMsg)+", Please try again")]),s("q-card-section",{directives:[{name:"show",rawName:"v-show",value:!t.SUBSCRIBE_HIDE_LOGIN,expression:"!SUBSCRIBE_HIDE_LOGIN"}],staticClass:"q-pa-none"},[s("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut",mode:"out-in"}},[s(t.components[t.login],{tag:"component",style:t.styles[t.login]})],1)],1),s("q-card-section",{staticClass:"q-pb-none q-pt-xs text-caption text-center text-grey-4"},[t._v("Milestone Smart Kitchen - v"+t._s(t.version))])],1),s("SubscriptionExpiring"),t.SUBSCRIBE_HIDE_LOGIN?s("div",{staticClass:"text-weight-bolder text-red",staticStyle:{"font-size":"5rem"}},[t._v(t._s(parseInt(t.HIDE_ALTER_WAIT/1e3)))]):t._e()],1)},a=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{attrs:{flat:""}},[s("q-card-section",[t.role?s("GetRoleUserLogin",{attrs:{role:t.role,loading:t.loading},on:{clear:function(e){t.role=""},user:function(e){t.user=e},login:t.login}}):s("RolesSelect",{staticClass:"q-mx-auto",on:{role:function(e){t.role=e}}}),s("form",{ref:"login_form",staticStyle:{position:"absolute"},attrs:{action:t.LOGIN,method:"post"}},[s("q-input",{attrs:{type:"hidden",name:"id",value:t.id}}),s("q-input",{attrs:{type:"hidden",name:"password",value:t.password}}),s("q-input",{attrs:{type:"hidden",name:t.select,value:t.selected}})],1)],1)],1)},r=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{staticClass:"q-mx-auto",staticStyle:{width:"90vw","max-width":"20rem"}},[s("q-card-section",{staticClass:"bg-primary"},[s("div",{staticClass:" text-white items-start"},[s("q-icon",{staticStyle:{"margin-top":"-0.2rem",cursor:"pointer"},attrs:{name:"arrow_back_ios",size:"xs"},on:{click:function(e){return t.$emit("clear")}}}),t._v("\n      Click on user to login\n    ")],1)]),s("q-card-section",[s("q-list",{attrs:{separator:"",bordered:""}},t._l(t.users,(function(e,i){return s("q-expansion-item",{key:"user-"+e.id,attrs:{group:"login"},on:{click:function(s){t.s_user=e}},scopedSlots:t._u([{key:"header",fn:function(){return[s("q-item-section",{attrs:{avatar:""}},[t._v(t._s(i+1))]),s("q-item-section",[s("q-item-label",[t._v(t._s(e.name))])],1)]},proxy:!0}],null,!0)},[s("q-item-section",{staticClass:"q-px-lg q-py-xs q-gutter-y-xs"},[s("q-input",{attrs:{type:"password",dense:"",name:"password",outlined:"",label:"Password"},on:{focus:function(s){t.s_user=e}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s(t.component,{tag:"component",on:{selected:t.selected}}),s("q-btn",{attrs:{label:"Login",color:"primary",loading:t.loading},on:{click:t.login}})],1)],1)})),1)],1)],1)},l=[],c=s("ded3"),d=s.n(c),p=s("2f62"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",{attrs:{options:t.options,label:"Select Menu",dense:"",value:t.menu,"map-options":"",outlined:""},on:{input:t.emit}})},m=[],h={name:"LoginMenuSelect",data(){return{menu:null}},computed:{menus(){return this.$store.state.menus.data},options(){return _.map(this.menus,(({id:t,name:e})=>_.zipObject(["label","value"],[e,t])))}},methods:{emit({value:t}){this.$emit("selected",t),this.menu=t}}},v=h,g=s("2877"),b=s("ddd8"),I=s("eebe"),x=s.n(I),E=Object(g["a"])(v,u,m,!1,null,null,null),S=E.exports;x()(E,"components",{QSelect:b["a"]});var C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",{attrs:{options:t.options,label:"Select Kitchen",dense:"",value:t.kitchen,"map-options":"",outlined:""},on:{input:t.emit}})},O=[],q={name:"LoginKitchenSelect",data(){return{kitchen:null}},computed:{kitchens(){return this.$store.getters["kitchens/non_remote"]},options(){return _.map(this.kitchens,(({id:t,name:e})=>_.zipObject(["label","value"],[e,t])))}},methods:{emit({value:t}){this.$emit("selected",t),this.kitchen=t}}},f=q,y=Object(g["a"])(f,C,O,!1,null,null,null),w=y.exports;x()(y,"components",{QSelect:b["a"]});var R={name:"GetRoleUserLogin",components:{LoginKitchenSelect:w,LoginMenuSelect:S},props:["role","loading"],data(){return{s_user:null,password:"",s_selected:null,defaults:LoginSelect}},computed:d()(d()({},Object(p["b"])("users",["role_users"])),{},{users(){return this.role_users(this.role)},roleItem(){return _.has(this.defaults,this.role)?_.capitalize(this.defaults[this.role]):null},component(){return this.roleItem?`Login${this.roleItem}Select`:null}}),methods:{selected(t){this.s_selected=t},login(){if(this.password)return this.$emit("login",_.zipObject(["user","password",_.toLower(this.defaults[this.role])],[this.s_user,this.password,[this.s_selected]]))}}},T=R,N=s("f09f"),L=s("a370"),D=s("0016"),A=s("1c1c"),P=s("3b73"),k=s("4074"),Q=s("0170"),Y=s("27f9"),B=s("9c40"),U=Object(g["a"])(T,o,l,!1,null,null,null),M=U.exports;x()(U,"components",{QCard:N["a"],QCardSection:L["a"],QIcon:D["a"],QList:A["a"],QExpansionItem:P["a"],QItemSection:k["a"],QItemLabel:Q["a"],QInput:Y["a"],QBtn:B["a"]});var $=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-gutter-y-xs"},t._l(t.roles,(function(e){return s("q-card",{key:"role-"+e,staticClass:"bg-primary q-mx-auto",staticStyle:{cursor:"pointer",width:"16rem","max-width":"65vh"},attrs:{dark:""},on:{click:function(s){return t.$emit("role",e)}}},[s("q-card-section",{staticClass:"text-center"},[s("div",{staticClass:"text-h6"},[t._v(t._s(e))])])],1)})),1)},G=[],X={name:"RolesSelect",computed:Object(p["b"])("users",["roles"])},z=X,j=Object(g["a"])(z,$,G,!1,null,null,null),H=j.exports;x()(j,"components",{QCard:N["a"],QCardSection:L["a"]});var W={name:"LoginPassword",components:{GetRoleUserLogin:M,RolesSelect:H},data(){return{role:"",user:null,loading:!1,LOGIN:LOGIN,id:"",password:"",select:"",selected:[]}},methods:{login({user:{id:t},password:e,menu:s,kitchen:i}){if(this.loading=!0,!t||!e)return this.loading=!1;this.id=t,this.password=e,this.select=s?"menu":i?"kitchen":"",this.selected=s||i||[],this.loading=!1,this.$nextTick((()=>this.$refs["login_form"].submit()))}}},F=W,V=Object(g["a"])(F,n,r,!1,null,null,null),K=V.exports;x()(V,"components",{QCard:N["a"],QCardSection:L["a"],QInput:Y["a"]});var J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"bg-grey-2"},[s("div",{staticClass:"row q-col-gutter-x-xs"},t._l(t.digs,(function(e,i){return s("div",{key:"dif-"+i,staticClass:"col-3"},[s("div",{staticClass:"text-center bg-white q-pa-sm text-bold text-grey-8",staticStyle:{"font-size":"1.85rem"},domProps:{innerHTML:t._s(e)}})])})),0)]),s("q-card-section",[s("div",{staticClass:"row q-col-gutter-xs"},[t._l(9,(function(e){return s("div",{key:"pin-number-"+e,staticClass:"col-4"},[s("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1.25rem"},attrs:{label:e,color:"primary",glossy:"",size:"md",padding:"md md"},on:{click:function(s){t.digs=e}}})],1)})),s("div",{staticClass:"col-4"},[s("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1.25rem"},attrs:{icon:"backspace",color:"primary",glossy:"",size:"md",padding:"md md"},on:{click:t.backspace}})],1),s("div",{staticClass:"col-4"},[s("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1.25rem"},attrs:{label:"0",color:"primary",glossy:"",size:"md",padding:"md md"},on:{click:function(e){t.digs=0}}})],1),s("div",{staticClass:"col-4"},[s("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1.25rem"},attrs:{icon:"keyboard_return",color:"primary",glossy:"",size:"md",padding:"md md",disable:t.pin.length<4},on:{click:t.login}})],1)],2),s("form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"login_form",attrs:{action:t.LOGIN,method:"post"}},[s("q-input",{attrs:{type:"hidden",name:"pin",value:t.pin}})],1)]),s("q-inner-loading",{attrs:{showing:t.loading}},[s("q-spinner-grid",{attrs:{size:"150px",color:"primary"}})],1)],1)},Z=[],tt=(s("843c"),{name:"LoginPin",data(){return{pin:"",LOGIN:LOGIN,loading:!1}},computed:{digs:{get(){return _.padEnd(this.pin,4,"_").split("")},set(t){this.pin=(this.pin+t).substr(-4)}}},methods:{backspace(){this.pin=this.pin.substr(0,_.size(this.pin)-1)},login(){this.loading=!0,this.$refs["login_form"].submit()}}}),et=tt,st=s("74f7"),it=s("981c"),at=Object(g["a"])(et,J,Z,!1,null,null,null),nt=at.exports;x()(at,"components",{QCard:N["a"],QCardSection:L["a"],QBtn:B["a"],QInput:Y["a"],QInnerLoading:st["a"],QSpinnerGrid:it["a"]});var rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"bg-primary text-white"},[s("div",{staticClass:"text-h6"},[t._v("Display Screens")])]),s("q-list",{attrs:{separator:""}},[s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{"text-color":"primary",rounded:"",icon:"person"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-primary text-bold"},[t._v("Kitchen")]),s("q-item-label",{attrs:{caption:""}},[t._v("Displays kitchen items")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{"text-color":"primary",rounded:"",icon:"logout"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-primary text-bold"},[t._v("Home Delivery")]),s("q-item-label",{attrs:{caption:""}},[t._v("Delivery orders tracking")])],1)],1)],1)],1)},ot=[],lt={name:"DisplayBoards"},ct=lt,dt=s("66e5"),pt=s("cb32"),ut=s("714f"),mt=Object(g["a"])(ct,rt,ot,!1,null,null,null),_t=mt.exports;x()(mt,"components",{QCard:N["a"],QCardSection:L["a"],QList:A["a"],QItem:dt["a"],QItemSection:k["a"],QAvatar:pt["a"],QItemLabel:Q["a"]}),x()(mt,"directives",{Ripple:ut["a"]});var ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.SUBSCRIPTION_NOTIFY?s("q-card",{staticClass:"q-mt-md",attrs:{flat:""}},[t.EXPIRED?s("q-card-section",[s("q-card-section",{staticClass:"text-center",staticStyle:{border:"1px solid #b71c1c"}},[s("div",{staticClass:"text-bold bg-red-10 text-white q-py-sm q-mb-sm"},[t._v("SUBSCRIPTION EXPIRED")]),s("div",{staticClass:"text-bold text-red-10"},[t._v("ONLY ADMINISTRATOR CAN LOGIN")]),s("div",{staticClass:"text-bold text-red"},[t._v("OTHER LOGINS ARE TEMPORARILY DISABLED UNTIL NEW SUBSCRIPTION ADDED")])])],1):s("q-card-section",{staticClass:"text-red"},[t.DAYS_TO_EXPIRE>15?s("q-card-section",{staticClass:"text-grey-6"},[s("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is about to expire.. Only "),s("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>10?s("q-card-section",{staticClass:"text-black"},[s("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is about to expire.. Only "),s("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>7?s("q-card-section",{staticClass:"text-red"},[s("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is getting expired.. Only "),s("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>5?s("q-card-section",{staticClass:"text-red-10",staticStyle:{border:"5px double #B71C1C"}},[s("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is expiring.. Only "),s("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>2?s("q-card-section",{staticClass:"text-red bg-grey-3"},[s("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is expiring.. Only "),s("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>1?s("q-card-section",{staticClass:"text-white bg-red-8"},[s("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is expiring.. Only "),s("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>0?s("q-card-section",{staticClass:"text-white bg-red-10 text-center"},[s("div",{staticClass:"text-bold"},[t._v("ATTENTION")]),s("div",{staticClass:"text-bold"},[t._v("SUBSCRIPTION ENDS TOMORROW")]),s("div",{staticClass:"text-bold"},[t._v("PLEASE RENEW NOW ITSELF FOR UNINTERRUPTED SERVICE")])]):s("q-card-section",{staticClass:"text-center",staticStyle:{border:"1px solid #b71c1c"}},[s("div",{staticClass:"text-bold bg-red-10 text-white q-py-sm q-mb-sm"},[t._v("ATTENTION")]),s("div",{staticClass:"text-bold"},[t._v("SUBSCRIPTION ENDING TODAY")]),s("div",{staticClass:"text-bold"},[t._v("SERVICES WILL BE LIMITED FROM TOMORROW ONWARDS")])])],1)],1):t._e()},vt=[],gt=s("adfa");const bt=_.toInteger(Math.abs(gt["VALID_UPTO_REMAINS"])/86400);var It={data(){return{VALID_UPTO_REMAINS:gt["VALID_UPTO_REMAINS"],EXPIRED:gt["VALID_UPTO_REMAINS"]<0,DAYS_TO_EXPIRE:bt,NOTIFY_DURATION:25,SUBSCRIBE_HIDE_LOGIN:bt<6,HIDE_ALTER_WAIT:1e4,interval:null}},computed:{SUBSCRIPTION_NOTIFY(){return this.DAYS_TO_EXPIRE<this.NOTIFY_DURATION}},created(){this.SUBSCRIBE_HIDE_LOGIN&&(this.HIDE_ALTER_WAIT=bt>3?2500:2500+1e3*(4-bt),this.interval=setInterval((t=>{t.HIDE_ALTER_WAIT-=1e3,t.HIDE_ALTER_WAIT<=0&&(clearInterval(this.interval),t.SUBSCRIBE_HIDE_LOGIN=!1)}),1e3,this))}},xt={name:"SubscriptionExpiring",mixins:[It]},Et=xt,St=Object(g["a"])(Et,ht,vt,!1,null,null,null),Ct=St.exports;x()(St,"components",{QCard:N["a"],QCardSection:L["a"]});var Ot=s("3c10"),qt={name:"PageLoginIndex",components:{SubscriptionExpiring:Ct,DisplayBoards:_t,LoginPin:nt,LoginPassword:K},mixins:[It],data(){return{styles:{pin:{maxWidth:"330px",width:"90vw"},password:{maxWidth:"330px",width:"90vw"},display:{width:"680px"}},components:{pin:"LoginPin",password:"LoginPassword",display:"DisplayBoards"},errorShow:!0,version:Ot["h"]}},computed:{login(){return this.$store.state.public.login||"pin"},errorMsg(){return location.search&&"?msg="===location.search.substr(0,5)?decodeURI(location.search.substr(5)):""}},created(){this.errorMsg&&setTimeout((t=>t.errorShow=!1),7e3,this)}},ft=qt,yt=s("9989"),wt=Object(g["a"])(ft,i,a,!1,null,null,null);e["default"]=wt.exports;x()(wt,"components",{QPage:yt["a"],QCard:N["a"],QCardSection:L["a"]})}}]);