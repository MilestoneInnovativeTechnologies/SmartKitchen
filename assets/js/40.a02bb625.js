(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[40],{"16e6":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticClass:"q-gutter-y-sm",attrs:{padding:""}},[i("ReceptionistBillSummary"),i("ReceptionistServableItems"),i("ReceptionistNonDiningTokens")],1)},s=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row q-col-gutter-xs"},[i("div",{staticClass:"col-xs-6 col-md-3"},[i("DigitMetric",{attrs:{value:e.pending.length,bg:"cyan",text:"white",title:"Pending Bills",icon:"receipt"}})],1),i("div",{staticClass:"col-xs-6 col-md-3"},[i("DigitMetric",{attrs:{value:e.pending_amount,bg:"orange",text:"white",title:"Pending Amount",icon:"request_quote"}})],1),i("div",{staticClass:"col-xs-6 col-md-3"},[i("DigitMetric",{attrs:{value:e.paid.length,bg:"lime",text:"white",title:"Paid Bills",icon:"file_copy"}})],1),i("div",{staticClass:"col-xs-6 col-md-3"},[i("DigitMetric",{attrs:{value:e.paid_amount,bg:"green",text:"white",title:"Total Payments",icon:"payments"}})],1)])},r=[],o=i("84ba"),l=i("58d1"),c=i("b1c1"),d={name:"ReceptionistBillSummary",components:{DigitMetric:o["a"]},mixins:[l["a"]],computed:{today(){return _(this.bills).filter((({date:e})=>Object(c["h"])(e))).value()},pending(){return _(this.today).filter(["progress","Pending"]).value()},pending_amount(){return _.sumBy(this.pending,(({payable:e})=>_.toNumber(e)))},paid(){return _(this.today).filter((({progress:e})=>["Paid","Partial"].includes(e))).value()},paid_amount(){return _.sumBy(this.paid,(({paid:e})=>_.toNumber(e)))}}},m=d,u=i("2877"),g=Object(u["a"])(m,a,r,!1,null,null,null),p=g.exports,v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-card",[i("q-card-section",{staticClass:"bg-grey-2 row justify-between text-bold"},[i("div",[e._v("Non Dining Orders")]),e.oTokens.length?i("div",[e._v(e._s(e.oTokens.length))]):e._e()]),i("q-card-section",{staticClass:"q-pa-xs"},[i("Masonry",{attrs:{items:e.oTokens,width:"260"},scopedSlots:e._u([{key:"item",fn:function(e){return[i("OrderSummaryReceptionistOrder",{attrs:{id:e.id}})]}}])})],1)],1)},b=[],h=i("3758"),f=i("3b1b"),q=i("c624"),y={name:"ReceptionistNonDiningTokens",components:{Masonry:q["a"],OrderSummaryReceptionistOrder:f["a"]},mixins:[h["a"]],data(){return{activeProgress:["New","Processing","Completed","Billed","Pending"]}},computed:{oTokens(){return _(this.tokens).filter((({type:e,progress:t})=>"Dining"!==e&&this.activeProgress.includes(t))).value()}},methods:{hKey({id:e}){return Object(c["d"])("receptionist","non","dining","token",e)}}},w=y,x=i("f09f"),k=i("a370"),C=i("eebe"),S=i.n(C),I=Object(u["a"])(w,v,b,!1,null,null,null),O=I.exports;S()(I,"components",{QCard:x["a"],QCardSection:k["a"]});var P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-card",[i("q-card-section",{staticClass:"row justify-between text-bold bg-green text-white"},[i("div",[e._v("Servable Items")]),e.items.length>0?i("div",[e._v(e._s(e.items.length))]):e._e()]),e.items.length?i("q-list",{attrs:{separator:"",bordered:""}},e._l(e.items,(function(t){return i("q-item",{key:"order-receptionist-servable-item-"+t.id},[i("q-item-section",[i("q-item-label",[e._v(e._s(t.quantity)+" X "+e._s(t.item?t.item.name:""))]),i("q-item-label",{attrs:{caption:""}},[i("q-icon",{attrs:{name:"outdoor_grill"}}),e._v(" "+e._s(t.kitchen?t.kitchen.name:""))],1),i("q-item-label",{attrs:{caption:""}},[i("q-icon",{attrs:{name:"event_seat"}}),e._v(" "+e._s(e.SeatingName(t.token)))],1),i("q-item-label",{staticClass:"text-bold",attrs:{caption:""}},[i("q-icon",{attrs:{name:"account_box"}}),e._v(" "+e._s(t.user?t.user.name:""))],1)],1),i("q-item-section",{attrs:{side:""}},[i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.itemTiming(t.progress_timing))+" ago")])],1),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{icon:"how_to_reg",color:"positive",round:"",dense:""},on:{click:function(i){return e.served(t.id)}}})],1),e.serving.includes(t.id)?i("q-inner-loading",{attrs:{showing:!0}},[i("q-spinner-facebook",{attrs:{color:"primary",size:"2em"}})],1):e._e()],1)})),1):i("q-card-section",{staticClass:"text-center"},[e._v("NO ITEMS")])],1)},Q=[],D=(i("5db7"),i("73d9"),{name:"ReceptionistServableItems",mixins:[h["a"]],data(){return{now:0,serving:[]}},computed:{items(){return _.flatMap(this.tokens,(e=>"Dining"!==e.type?[]:_.filter(e.items,["progress","Completed"])))}},methods:{SeatingName(e){return _.get(_.find(this.tokens,["id",e]),["seating","name"])},itemTiming(e){let t=this.now-_.get(_.last(e),"time");return t<60?t+" seconds":t<3600?_.toInteger(t/60)+" minutes":_.toInteger(t/3600)+" hours"},served(e){this.serving.push(e),post("token","served",{id:e}).then((()=>this.serving=_.difference(this.serving,[e])))}},created(){setInterval((e=>e.now=_.toInteger((new Date).getTime()/1e3)),1e3,this)},watch:{items(e,t){(!t||t.length<e.length)&&Object(c["a"])()}}}),R=D,T=i("1c1c"),N=i("66e5"),j=i("4074"),B=i("0170"),M=i("0016"),E=i("9c40"),$=i("74f7"),L=i("e669"),J=Object(u["a"])(R,P,Q,!1,null,null,null),z=J.exports;S()(J,"components",{QCard:x["a"],QCardSection:k["a"],QList:T["a"],QItem:N["a"],QItemSection:j["a"],QItemLabel:B["a"],QIcon:M["a"],QBtn:E["a"],QInnerLoading:$["a"],QSpinnerFacebook:L["a"]});var A={name:"PageReceptionistIndex",components:{ReceptionistServableItems:z,ReceptionistNonDiningTokens:O,ReceptionistBillSummary:p}},F=A,K=i("9989"),X=Object(u["a"])(F,n,s,!1,null,null,null);t["default"]=X.exports;S()(X,"components",{QPage:K["a"]})}}]);