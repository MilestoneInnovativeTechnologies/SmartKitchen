(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[49],{1984:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("q-page",{attrs:{padding:""}},[e("div",{staticClass:"q-mx-auto",staticStyle:{width:"90vw"}},[e("KitchenItemsDisplay",{staticClass:"q-mb-sm",attrs:{kitchen:t.id}})],1)])},i=[],n=function(){var t=this,e=t._self._c;return e("q-card",{key:"kid-update-"+t.update_key},[e("q-card-section",{staticClass:"bg-grey-2"},[e("div",{staticClass:"text-h6"},[t._v(t._s(t.name))])]),e("q-card-actions",{staticClass:"q-px-md"},[t._v("\n    Users: "+t._s(t.users.length)+" "),e("q-space"),e("q-btn",{attrs:{icon:"add_box",color:"primary",flat:""},on:{click:function(e){t.add_mode=!0}}})],1),e("q-separator"),e("q-list",{attrs:{separator:""}},[e("q-item",{staticClass:"text-bold"},[e("q-item-section",[e("q-item-label",[t._v("Item")])],1),e("q-item-section",[e("q-item-label",[t._v("Stock")])],1),e("q-item-section",[e("q-item-label",[t._v("Duration")])],1),e("q-item-section",[e("q-item-label",[t._v("Auto Process")])],1),e("q-item-section",[e("q-item-label",[t._v("Auto Complete")])],1),e("q-item-section",{attrs:{side:""}},[t._v("Â ")])],1),e("q-item",{staticClass:"text-bold"},[e("q-item-section",[e("FilterInputText",{attrs:{label:"Filter Items"},on:{text:function(e){t.filter=e}}})],1)],1),t._l(t.filtered,(function(s){return e("KitchenItemsDisplayItemRow",t._b({key:t.hKey(s),attrs:{name:t.item(s).name,temp:t.filtered}},"KitchenItemsDisplayItemRow",s,!1))}))],2),e("q-card-section",{staticClass:"bg-grey-2"},[e("div",{staticClass:"row q-col-gutter-y-xs items-center"},[e("q-select",{staticClass:"col-6",attrs:{label:"Auto Process",outlined:"",dense:"",options:["Yes","No"]},model:{value:t.auto_process,callback:function(e){t.auto_process=e},expression:"auto_process"}}),e("q-btn",{staticClass:"col-5 offset-1",attrs:{label:"Set for all",color:"indigo",dense:"",padding:"xs sm",loading:t.loading},on:{click:function(e){return t.items_all("auto_process")}}}),e("q-select",{staticClass:"col-6",attrs:{label:"Auto Complete",outlined:"",dense:"",options:["Yes","No"]},model:{value:t.auto_complete,callback:function(e){t.auto_complete=e},expression:"auto_complete"}}),e("q-btn",{staticClass:"col-5 offset-1",attrs:{label:"Set for all",color:"indigo",dense:"",padding:"xs sm",loading:t.loading},on:{click:function(e){return t.items_all("auto_complete")}}}),e("q-input",{staticClass:"col-6",attrs:{label:"Stock",outlined:"",dense:"",type:"number"},model:{value:t.stock,callback:function(e){t.stock=t._n(e)},expression:"stock"}}),e("q-btn",{staticClass:"col-5 offset-1",attrs:{label:"Set for all",color:"indigo",dense:"",padding:"xs sm",loading:t.loading},on:{click:function(e){return t.items_all("stock")}}}),e("q-input",{staticClass:"col-6",attrs:{label:"Duration",type:"number",outlined:"",dense:""},model:{value:t.duration,callback:function(e){t.duration=t._n(e)},expression:"duration"}}),e("q-btn",{staticClass:"col-5 offset-1",attrs:{label:"Set for all",color:"indigo",dense:"",padding:"xs sm",loading:t.loading},on:{click:function(e){return t.items_all("duration")}}})],1)]),e("q-dialog",{attrs:{persistent:""},model:{value:t.add_mode,callback:function(e){t.add_mode=e},expression:"add_mode"}},[e("KitchenItemAdd",{staticStyle:{width:"700px","max-width":"60vw"},attrs:{kitchen:t.kitchen},on:{close:function(e){t.add_mode=!1}}})],1)],1)},o=[],l=s("2f62"),c=s("43fa"),r=s("b1c1"),m=function(){var t=this,e=t._self._c;return e("q-item",[e("q-item-section",[e("q-item-label",{attrs:{caption:"",lines:"3"}},[t._v(t._s(t.name))])],1),e("q-item-section",[e("q-item-label",{attrs:{caption:""}},[e("q-input",{attrs:{dense:"",type:"number"},model:{value:t.params.stock,callback:function(e){t.$set(t.params,"stock",e)},expression:"params.stock"}})],1)],1),e("q-item-section",[e("q-item-label",{attrs:{caption:""}},[e("q-input",{attrs:{dense:"",type:"number"},model:{value:t.params.duration,callback:function(e){t.$set(t.params,"duration",e)},expression:"params.duration"}})],1)],1),e("q-item-section",[e("q-item-label",{attrs:{caption:""}},[e("q-select",{attrs:{dense:"",options:["Yes","No"]},model:{value:t.params.auto_process,callback:function(e){t.$set(t.params,"auto_process",e)},expression:"params.auto_process"}})],1)],1),e("q-item-section",[e("q-item-label",{attrs:{caption:""}},[e("q-select",{attrs:{dense:"",options:["Yes","No"]},model:{value:t.params.auto_complete,callback:function(e){t.$set(t.params,"auto_complete",e)},expression:"params.auto_complete"}})],1)],1),e("q-item-section",{attrs:{side:""}},[t.loading?e("q-spinner-hourglass",{attrs:{size:"xs",color:"primary"}}):e("q-btn",{attrs:{size:"md",color:"red",dense:"",flat:"",icon:"clear",round:""},on:{click:t.del}})],1)],1)},d=[],u={name:"KitchenItemsDisplayItemRow",props:["id","name"],data(){return{params:{stock:0,duration:0,auto_process:"No",auto_complete:"No",id:null},ready:!1,loading:!1}},methods:{...Object(l["c"])("kitchens",["item_remove"]),del(){this.loading=!0,post("kitchen","item",{delete:this.id}).then((()=>this.loading=this.item_remove({kitchen:this.$attrs["kitchen"],id:this.id})&&!1))}},created(){_.forEach(["stock","duration","auto_process","auto_complete"],(t=>this.params[t]=this.$attrs[t])),this.params.id=this.id,this.$nextTick((()=>this.ready=!0))},watch:{params:{deep:!0,handler(t){if(this.loading=!0,!this.ready||!t.id)return this.loading=!1;post("kitchen","item",t).then((()=>this.loading=!1))}}}},p=u,h=s("2877"),b=s("66e5"),k=s("4074"),f=s("0170"),q=s("27f9"),g=s("ddd8"),x=s("9149"),v=s("9c40"),I=s("eebe"),y=s.n(I),C=Object(h["a"])(p,m,d,!1,null,null,null),Q=C.exports;y()(C,"components",{QItem:b["a"],QItemSection:k["a"],QItemLabel:f["a"],QInput:q["a"],QSelect:g["a"],QSpinnerHourglass:x["a"],QBtn:v["a"]});var S=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"row items-center q-pb-none"},[e("div",{staticClass:"text-h6"},[t._v("Add Item to Kitchen")]),e("q-space"),e("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){return t.$emit("close",null)}}})],1),e("q-card-section",{staticClass:"q-gutter-xs q-pb-none"},[e("q-select",{attrs:{outlined:"",dense:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:t.item_options_unique,label:"Select Item",clearable:""},on:{filter:t.filter},model:{value:t.item_obj,callback:function(e){t.item_obj=e},expression:"item_obj"}}),e("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Stock"},model:{value:t.params.stock,callback:function(e){t.$set(t.params,"stock",t._n(e))},expression:"params.stock"}}),e("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Prepare Duration in Minutes"},model:{value:t.params.duration,callback:function(e){t.$set(t.params,"duration",t._n(e))},expression:"params.duration"}}),e("q-select",{attrs:{dense:"",outlined:"",options:["Yes","No"],label:"Auto Process on Accept"},model:{value:t.params.auto_process,callback:function(e){t.$set(t.params,"auto_process",e)},expression:"params.auto_process"}}),e("q-select",{attrs:{dense:"",outlined:"",options:["Yes","No"],label:"Auto Complete on Processing"},model:{value:t.params.auto_complete,callback:function(e){t.$set(t.params,"auto_complete",e)},expression:"params.auto_complete"}})],1),e("q-card-actions",{staticClass:"q-px-md q-pt-xs",attrs:{align:"right"}},[e("q-btn",{attrs:{color:"primary",label:"Add Item",type:"submit",loading:t.loading},on:{click:function(e){return e.preventDefault(),t.add.apply(null,arguments)}}})],1)],1)},w=[],j=(s("caad"),{name:"KitchenItemAdd",props:["kitchen"],data(){return{item_obj:null,item_options:[],loading:!1,params:{item:null,stock:1,duration:0,auto_process:"No",auto_complete:"No",kitchen:null}}},computed:{...Object(l["d"])({items:({items:{data:t}})=>t,kitchen_items:({kitchens:{items:t}})=>t}),my_kitchen_items(){return _.map(this.kitchen_items[_.toSafeInteger(this.kitchen)],"item")},item_options_unique(){return _.filter(this.item_options,(({id:t})=>!_.includes(this.my_kitchen_items,_.toSafeInteger(t))))}},methods:{filter(t,e){e((()=>{const e=(t||"").toLowerCase();this.item_options=e?Object(r["x"])(this.items,["name"]).filter((t=>_.values(t).join(" ").toLowerCase().indexOf(e)>-1)):Object(r["x"])(this.items,["name"])}))},add(){if(this.loading=!0,this.params.item=_.get(this.item_obj,"id",null),this.params.kitchen=this.kitchen,!this.params.kitchen||!this.params.item)return this.loading=!1;post("kitchen","item",this.params).then((()=>this.$emit("close"))).catch().then((()=>this.loading=!1))}},created(){this.item_options=Object(r["x"])(this.items,["name"],"")}}),A=j,K=s("f09f"),O=s("a370"),$=s("2c91"),D=s("4b7e"),N=Object(h["a"])(A,S,w,!1,null,null,null),Y=N.exports;y()(N,"components",{QCard:K["a"],QCardSection:O["a"],QSpace:$["a"],QBtn:v["a"],QSelect:g["a"],QInput:q["a"],QCardActions:D["a"]});var P=s("5ab9"),L={name:"KitchenItemsDisplay",props:["kitchen"],data(){return{add_mode:!1,filter:"",auto_process:"Yes",auto_complete:"Yes",stock:100,duration:180,update_key:0,loading:!1}},components:{FilterInputText:P["a"],KitchenItemAdd:Y,KitchenItemsDisplayItemRow:Q,CardImageTitle:c["a"]},computed:{kid(){return _.toInteger(this.kitchen)},...Object(l["d"])("kitchens",{name:function({data:t}){return _.get(t,[this.kid,"name"])},k_items:function({items:t}){return _.get(t,this.kid)},users:function({status:t}){return _.get(t,[this.kid,"users"],[])}}),...Object(l["d"])("items",{items:"data"}),filtered(){return this.filter?_.filter(this.k_items,this.match):this.k_items}},methods:{item({item:t}){return _.get(this.items,_.toSafeInteger(t),{})},hKey({id:t,item:e}){return Object(r["e"])("kitchen",this.kitchen,"items",t,"item",e)},match({item:t}){return Object(r["r"])(this.items[t],["id","name","detail"],this.filter)},items_all(t){this.loading=!0,post("kitchen","items_all",{kitchen:this.kid,item:t,process:this[t]}).then((t=>this.loading=!++this.update_key))}}},R=L,T=s("eb85"),B=s("1c1c"),F=s("24e8"),z=Object(h["a"])(R,n,o,!1,null,null,null),J=z.exports;y()(z,"components",{QCard:K["a"],QCardSection:O["a"],QCardActions:D["a"],QSpace:$["a"],QBtn:v["a"],QSeparator:T["a"],QList:B["a"],QItem:b["a"],QItemSection:k["a"],QItemLabel:f["a"],QSelect:g["a"],QInput:q["a"],QDialog:F["a"]});var E={name:"PageKitchenItems",props:["id"],components:{KitchenItemsDisplay:J},computed:{},methods:{}},H=E,M=s("9989"),U=Object(h["a"])(H,a,i,!1,null,null,null);e["default"]=U.exports;y()(U,"components",{QPage:M["a"]})}}]);