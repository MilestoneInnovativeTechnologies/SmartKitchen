(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"572d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("q-splitter",{staticStyle:{height:"85vh"},attrs:{horizontal:t.horizontal},scopedSlots:t._u([{key:"before",fn:function(){return[a("q-card",[a("q-tabs",{staticClass:"text-grey",attrs:{"active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"seating",label:"Seating"}}),a("q-tab",{attrs:{name:"items",label:"Items"}})],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"seating"}},[a("SeatSelect",{on:{selected:t.seat}})],1),a("q-tab-panel",{staticClass:"q-pa-none",attrs:{name:"items"}},[a("q-splitter",{scopedSlots:t._u([{key:"before",fn:function(){return[a("MenuGroupTabs",{staticStyle:{height:"85vh"},on:{selected:function(e){t.group=e}}})]},proxy:!0},{key:"after",fn:function(){return[a("GroupItemsPanel",{staticStyle:{height:"85vh"},attrs:{selected:t.group?t.group.id:null},on:{item:t.item}})]},proxy:!0}]),model:{value:t.iSplit,callback:function(e){t.iSplit=e},expression:"iSplit"}})],1)],1)],1)]},proxy:!0},{key:"after",fn:function(){return[a("OrderSeatingInfo",{staticClass:"q-mt-sm q-px-md",attrs:{seating:t.params.seating}}),a("OrderCustomer",{key:t.refresh,staticClass:"q-mt-sm q-px-md",on:{customer:t.customer}}),a("OrderItemsSummary",{staticClass:"q-ma-sm",attrs:{items:t.params.items,price_list:t.params.price_list},on:{quantity:t.quantity,update:t.update,delete:t.remove}}),a("div",{staticClass:"q-mt-sm q-px-md"},[a("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:"Submit",disable:!t.params.items.length,loading:t.loading},on:{click:t.create}})],1)]},proxy:!0}]),model:{value:t.split,callback:function(e){t.split=e},expression:"split"}})],1)},r=[],n=(a("a434"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row q-col-gutter-xs"},t._l(t.seats,(function(e){return a("div",{key:t.hKey(e),staticClass:"col-xs-6 col-sm-4 col-md-3 col-2",staticStyle:{cursor:"pointer"}},[a("SeatSelectItem",{attrs:{id:e.id},on:{selected:function(a){return t.$emit("selected",e)}}})],1)})),0)}),i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{on:{click:function(e){return t.$emit("selected",t.seat)}}},[a("q-img",{attrs:{src:t.src,basic:""}},[a("div",{staticClass:"absolute-bottom text-subtitle2 text-center"},[t._v("\n      "+t._s(t.seat.name)+"\n    ")])])],1)},l=[],c={name:"SeatSelectItem",props:["id"],computed:{seat(){return _.get(this.$store.state.seating.data,_.toSafeInteger(this.id))},src(){return"https://cdn.quasar.dev/img/parallax2.jpg"}}},u=c,m=a("2877"),d=a("f09f"),p=a("068f"),h=a("eebe"),b=a.n(h),f=Object(m["a"])(u,o,l,!1,null,null,null),g=f.exports;b()(f,"components",{QCard:d["a"],QImg:p["a"]});var q=a("b1c1"),v={name:"SeatSelect",components:{SeatSelectItem:g},computed:{seats(){return this.$store.state.seating.data}},methods:{hKey({id:t}){return Object(q["a"])("seat","select","item",t)}}},y=v,x=Object(m["a"])(y,n,i,!1,null,null,null),C=x.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-scroll-area",[a("div",{staticClass:"row text-center q-col-gutter-y-xs q-pa-xs text-primary"},[a("div",{staticClass:"col-12",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.$emit("selected",null)}}},[a("Jumbotron",{attrs:{text:"All"}})],1),t._l(t.groups,(function(e){return a("div",{key:t.hKey(e),staticClass:"col-12",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.$emit("selected",e)}}},[a("Jumbotron",{attrs:{text:e.name}})],1)}))],2)])},I=[],$=(a("5db7"),a("73d9"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{attrs:{flat:void 0!==t.flat&&t.flat,bordered:void 0!==t.bordered&&t.bordered}},[t.img?a("q-img",{attrs:{basic:"",src:t.img}},[a("div",{staticClass:"absolute-bottom text-subtitle2 text-center"},[t._v(t._s(t.text))])]):a("q-card-section",[t.icon?a("q-icon",{attrs:{name:t.icon,size:t.size||"sm"}}):t._e(),a("div",{class:"text-"+(t.weight||"bold")},[t._v(t._s(t.text))])],1)],1)}),k=[],Q={name:"Jumbotron",props:["text","icon","weight","size","bordered","flat","img"]},w=Q,O=a("a370"),j=a("0016"),E=Object(m["a"])(w,$,k,!1,null,null,null),N=E.exports;b()(E,"components",{QCard:d["a"],QImg:p["a"],QCardSection:O["a"],QIcon:j["a"]});var P={name:"MenuGroupTabs",components:{Jumbotron:N},data(){return{tab:"all"}},computed:{menus(){return this.$store.state.menus.s_items},m_groups(){return _.flatMap(_.pick(this.$store.state.menus.data,this.menus),(({groups:t})=>_.map(t,_.toSafeInteger)))},groups(){return _.pick(this.$store.state.groups.data,this.m_groups)}},methods:{hKey({id:t}){return Object(q["a"])("menu","group","select",t)}}},T=P,K=a("4983"),z=Object(m["a"])(T,S,I,!1,null,null,null),A=z.exports;b()(z,"components",{QScrollArea:K["a"]});var D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-scroll-area",[a("q-tab-panels",{attrs:{animated:"","transition-prev":"slide-down","transition-next":"slide-up"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("q-tab-panel",{staticClass:"row q-col-gutter-xs",attrs:{name:"group-all"}},t._l(t.all_items,(function(e){return a("div",{key:t.hKey({id:e},"all-item"),staticClass:"col-xs-6 col-sm-4 col-md-3 col-2"},[a("ItemSelectCard",{attrs:{id:e},on:{selected:function(e){return t.$emit("item",e)}}})],1)})),0),t._l(t.m_groups,(function(e){return a("q-tab-panel",{key:t.hKey({id:e},"group"),staticClass:"row q-col-gutter-xs",attrs:{name:"group-"+e}},t._l(t.groupItems(e),(function(s){return a("div",{key:t.hKey({id:s},e+"-item"),staticClass:"col-xs-6 col-sm-4 col-md-3 col-2"},[a("ItemSelectCard",{attrs:{id:s},on:{selected:function(e){return t.$emit("item",e)}}})],1)})),0)}))],2)],1)},M=[],G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.item?a("q-card",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.$emit("selected",t.item)}}},[a("q-img",{attrs:{basic:"",src:t.src}},[a("div",{staticClass:"absolute-bottom text-subtitle2 text-center"},[t._v("\n      "+t._s(t.item.name)+"\n    ")])])],1):t._e()},J=[],U={name:"ItemSelectCard",props:["id"],computed:{item(){return _.get(this.$store.state.items.data,_.toSafeInteger(this.id))},src(){return"https://cdn.quasar.dev/img/parallax2.jpg"}}},B=U,F=Object(m["a"])(B,G,J,!1,null,null,null),L=F.exports;b()(F,"components",{QCard:d["a"],QImg:p["a"]});var R={name:"GroupItemsPanel",components:{ItemSelectCard:L},props:["selected"],computed:{menus(){return this.$store.state.menus.s_items},m_groups(){return _.flatMap(_.pick(this.$store.state.menus.data,this.menus),(({groups:t})=>_.map(t,_.toSafeInteger)))},value(){return"group-"+(this.selected||"all")},all_items(){return _.uniq(_.flatMap(this.m_groups,this.groupItems))}},methods:{groupItems(t){return _.uniq(_.map(_.get(this.$store.state.groups.data,[_.toSafeInteger(t),"items"]),_.toSafeInteger))},hKey({id:t},e){return Object(q["a"])("group","items","panel",e,t)}}},V=R,H=a("adad"),W=a("823b"),X=Object(m["a"])(V,D,M,!1,null,null,null),Y=X.exports;b()(X,"components",{QScrollArea:K["a"],QTabPanels:H["a"],QTabPanel:W["a"]});var Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-select",{attrs:{outlined:"",dense:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:t.options,label:"Select Customer",clearable:""},on:{filter:t.filter,"new-value":t.createCustomer},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}}),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.create_mode,callback:function(e){t.create_mode=e},expression:"create_mode"}},[a("CustomerCreate",{staticStyle:{width:"700px","max-width":"60vw"},attrs:{param:t.param,param_value:t.param_value},on:{close:t.closeCreate,customer:t.closeCreate}})],1)],1)},tt=[],et=(a("c975"),a("ddb0"),a("75b8")),at={name:"OrderCustomer",components:{CustomerCreate:et["a"]},data(){return{create_mode:!1,param:"name",param_value:"",customer:null,options:[]}},computed:{customers(){return this.$store.state.customers.data}},methods:{filter(t,e){e((()=>{const e=(t||"").toLowerCase();this.options=e?Object(q["c"])(this.customers).filter((t=>_.values(t).join(" ").toLowerCase().indexOf(e)>-1)):Object(q["c"])(this.customers)}))},createCustomer(t){this.param=_.toNumber(t)==t?"phone":"name",this.param_value=t,this.customer=null,this.create_mode=!0},closeCreate(t){this.create_mode=!1,this.customer=t?Object(q["b"])(t):null}},created(){this.options=Object(q["c"])(this.customers)},watch:{customer(t){this.$emit("customer",t)}}},st=at,rt=a("ddd8"),nt=a("24e8"),it=Object(m["a"])(st,Z,tt,!1,null,null,null),ot=it.exports;b()(it,"components",{QSelect:rt["a"],QDialog:nt["a"]});var lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-list",{attrs:{bordered:"",separator:""}},[t._l(t.items,(function(e,s){return a("q-item",{key:t.hKey(e)},[a("q-item-section",{attrs:{avatar:""}},[t._v(t._s(s+1))]),a("q-item-section",[a("q-item-label",{staticClass:"row justify-between items-center"},[a("div",{staticClass:"text-weight-bold text-grey-9"},[t._v(t._s(e.quantity)+" x "+t._s(t.item(e.item).name))])]),e.delay?a("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v("Delay: "+t._s(e.delay)+" minutes")]):t._e(),e.narration?a("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(e.narration))]):t._e()],1),a("q-item-section",{attrs:{side:""}},[a("div",{staticClass:"text-bold",domProps:{textContent:t._s(t.iTotal(e))}})]),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{icon:"delete",dense:"",color:"negative",flat:""},on:{click:function(a){return t.$emit("delete",e)}}}),a("q-btn",{attrs:{icon:"edit",dense:"",color:"warning",flat:""},on:{click:function(a){return t.edit(e)}}})],1)],1)})),a("q-item",[a("q-item-section",[a("q-item-label",{staticClass:"content-end"},[a("div",{staticClass:"text-weight-bold text-h6 text-grey-9"},[t._v("Total")])])],1),a("q-item-section",{attrs:{side:""}},[a("div",{staticClass:"text-h6",domProps:{textContent:t._s(t.precision(t.total,2))}})])],1),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.update_mode,callback:function(e){t.update_mode=e},expression:"update_mode"}},[t.update_obj?a("OrderItemUpdateForm",t._b({staticStyle:{width:"700px","max-width":"60vw"},on:{close:t.close,update:t.update}},"OrderItemUpdateForm",t.update_obj,!1)):t._e()],1)],2)},ct=[],ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("Update Order Item")]),a("q-space"),a("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){return t.$emit("close",null)}}})],1),a("q-card-section",{staticClass:"q-gutter-xs q-pb-none"},[a("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Quantity"},model:{value:t.quantity,callback:function(e){t.quantity=t._n(e)},expression:"quantity"}}),a("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Delay in Minutes"},model:{value:t.delay,callback:function(e){t.delay=t._n(e)},expression:"delay"}}),a("q-input",{attrs:{dense:"",type:"textarea",outlined:"",label:"Narration if any"},model:{value:t.narration,callback:function(e){t.narration=e},expression:"narration"}})],1),a("q-card-actions",{staticClass:"q-px-md q-pt-xs",attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Update",type:"submit"},on:{click:function(e){return e.preventDefault(),t.update(e)}}})],1)],1)},mt=[],dt={name:"OrderItemUpdateForm",props:["item"],data(){return{quantity:1,delay:0,narration:null}},created(){_.forEach(["quantity","delay","narration"],(t=>this[t]=_.toNumber(this.$attrs[t])==this.$attrs[t]?_.toNumber(this.$attrs[t]):this.$attrs[t]))},methods:{update(){this.$emit("update",{item:_.toSafeInteger(this.item),quantity:_.toNumber(this.quantity),delay:_.toNumber(this.delay),narration:this.narration||null})}}},pt=dt,ht=a("2c91"),bt=a("9c40"),_t=a("27f9"),ft=a("4b7e"),gt=Object(m["a"])(pt,ut,mt,!1,null,null,null),qt=gt.exports;b()(gt,"components",{QCard:d["a"],QCardSection:O["a"],QSpace:ht["a"],QBtn:bt["a"],QInput:_t["a"],QCardActions:ft["a"]});var vt={name:"OrderItemsSummary",components:{OrderItemUpdateForm:qt},data(){return{update_mode:!1,update_obj:null}},props:["items","price_list"],computed:{price(){return _(this.$store.state.prices.data).filter(["price_list",_.toSafeInteger(this.price_list)]).mapKeys("item").mapValues("price").value()},total(){return _.sumBy(this.items,(({item:t,quantity:e})=>(_.toNumber(e)||0)*(_.toNumber(_.get(this.price,t))||0)))}},methods:{hKey({item:t}){return Object(q["a"])("order","summary","item",t)},item(t){return _.get(this.$store.state.items.data,_.toSafeInteger(t))},quantity(t,e){this.$emit("quantity",{item:t,quantity:_.toNumber(e.target.value)})},iTotal({item:t,quantity:e}){return Object(q["e"])(e*this.price[t],2)},precision(t){return Object(q["e"])(t,2)},edit(t){this.update_obj=t,this.update_mode=!0},update(t){this.$emit("update",t),this.close()},close(){this.update_mode=!1,this.update_obj=null}}},yt=vt,xt=a("1c1c"),Ct=a("66e5"),St=a("4074"),It=a("0170"),$t=Object(m["a"])(yt,lt,ct,!1,null,null,null),kt=$t.exports;b()($t,"components",{QList:xt["a"],QItem:Ct["a"],QItemSection:St["a"],QItemLabel:It["a"],QInput:_t["a"],QBtn:bt["a"],QDialog:nt["a"]});var Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.seating?a("div",{staticClass:"row content-around"},[a("div",{staticClass:"col text-weight-bold"},[t._v("Seat"),a("div",{staticClass:"text-caption"},[t._v(t._s(t.seat.name))])]),a("div",{staticClass:"col text-weight-bold"},[t._v("Price List"),a("div",{staticClass:"text-caption"},[t._v(t._s(t.price.name))])])]):t._e()},wt=[],Ot={name:"OrderSeatingInfo",props:["seating"],computed:{seat(){return _.get(this.$store.state.seating.data,_.toSafeInteger(this.seating))},price(){return _.get(this.$store.state.prices.list,_.toSafeInteger(this.seat.price_list))}}},jt=Ot,Et=Object(m["a"])(jt,Qt,wt,!1,null,null,null),Nt=Et.exports,Pt={name:"PageOrderNew",components:{OrderSeatingInfo:Nt,OrderItemsSummary:kt,OrderCustomer:ot,GroupItemsPanel:Y,MenuGroupTabs:A,SeatSelect:C},data(){return{tab:"seating",split:60,iSplit:20,pos:null,group:null,loading:!1,refresh:0,params:{seating:null,price_list:null,customer:null,items:[]}}},computed:{horizontal(){let{height:t,width:e}=this.$q.screen;return null===this.pos?e<=t:this.pos}},methods:{seat({id:t,price_list:e}){this.params.seating=t,this.params.price_list=e,this.tab="items"},item({id:t}){let e=_.find(this.params.items,["item",t]);e?e.quantity++:this.params.items.push({item:t,quantity:1,delay:0,narration:null})},quantity({item:t,quantity:e}){t=_.toSafeInteger(t),e=_.toNumber(e);let a=_.find(this.params.items,["item",t]);a?a.quantity=e:this.params.items.push({item:t,quantity:e})},remove({item:t}){let e=_.findIndex(this.params.items,["item",_.toSafeInteger(t)]);e>-1&&this.params.items.splice(e,1)},update(t){let e=_.find(this.params.items,["item",t.item]);if(!e)return null;_.forEach(_.omit(t,"item"),((t,a)=>e[a]=t))},customer(t){this.params.customer=t?t.id:null},create(){this.loading=!0,post("token","create",this.params).then((t=>{this.loading=!1,this.params.seating=null,this.params.items.splice(0,this.params.items.length),this.tab="seating",this.refresh++}))}}},Tt=Pt,Kt=a("9989"),zt=a("8562"),At=a("429b"),Dt=a("7460"),Mt=a("eb85"),Gt=Object(m["a"])(Tt,s,r,!1,null,null,null);e["default"]=Gt.exports,b()(Gt,"components",{QPage:Kt["a"],QSplitter:zt["a"],QCard:d["a"],QTabs:At["a"],QTab:Dt["a"],QSeparator:Mt["a"],QTabPanels:H["a"],QTabPanel:W["a"],QBtn:bt["a"]})},"75b8":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("New Customer")]),a("q-space"),a("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){return t.$emit("close",null)}}})],1),a("q-card-section",{staticClass:"q-gutter-xs"},[a("q-input",{attrs:{dense:"",outlined:"",label:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("q-input",{attrs:{dense:"",outlined:"",label:"Phone"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),a("q-input",{attrs:{dense:"",type:"email",outlined:"",label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("q-input",{attrs:{dense:"",type:"textarea",outlined:"",label:"Address"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{staticClass:"text-grey",attrs:{color:"primary",label:"Reset",type:"reset",flat:""},on:{click:function(e){return e.preventDefault(),t.reset(e)}}}),a("q-btn",{attrs:{color:"primary",label:"Submit",type:"submit"},on:{click:function(e){return e.preventDefault(),t.submit(e)}}})],1)],1)},r=[],n={name:"CustomerCreate",props:["param","param_value"],data(){return{name:"",phone:"",email:"",address:""}},methods:{reset(){this.name=this.phone=this.email=this.address=""},submit(){if(!this.name&&!this.phone)return;let t=_.zipObject(["name","phone","email","address"],[this.name,this.phone,this.email,this.address]);post("customer","create",t).then((t=>{this.$emit("customer",t),this.reset()}))}},created(){this[this.param]=this.param_value}},i=n,o=a("2877"),l=a("f09f"),c=a("a370"),u=a("2c91"),m=a("9c40"),d=a("27f9"),p=a("4b7e"),h=a("eebe"),b=a.n(h),f=Object(o["a"])(i,s,r,!1,null,null,null);e["a"]=f.exports,b()(f,"components",{QCard:l["a"],QCardSection:c["a"],QSpace:u["a"],QBtn:m["a"],QInput:d["a"],QCardActions:p["a"]})},b1c1:function(t,e,a){"use strict";function s(){return Array.from(arguments).join("-")}function r(t){return _.assign({},t,{label:[t.name,t.phone].join(", ")})}function n(t){return _(t).map(r).value()}function i(t,e){return _.toNumber(t).toFixed(e||2)}function o(t,e,a){let s=_.map(e,(e=>t[e])).join(a||",");return _.assign({},t,{label:s})}function l(t,e,a){return _.map(t,(t=>o(t,e,a||", ")))}a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"e",(function(){return i})),a.d(e,"d",(function(){return l}))}}]);