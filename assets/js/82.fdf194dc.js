(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[82],{"149a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[t.customer&&t.mode?a("ReportCard",{attrs:{title:"Customer Payments by Mode",head:t.head,table:t.table,foot:t.foot,index:"",center:["Bill/Token"],right:["Bill Amount","Paid Amount","Bill Balance"]}}):a("div",{staticClass:"text-center text-bold"},[t._v("Please select Customer and Payment Mode")])],1)},i=[],r=(a("5db7"),a("73d9"),a("ded3")),n=a.n(r),o=a("460a"),l=a("b1c1"),m=a("58d1"),u={name:"PageReportCustomerByPaymentType",components:{ReportCard:o["a"]},mixins:[m["a"]],computed:{range(){return Object(l["z"])(this.$store.state.public.range)},customer(){return _.get(this.$store.state,["public","customer"])},mode(){return _.get(this.$store.state,["public","payment_type"])},head(){return _.zipObject(["Customer","Mode","Start Date","End Date","Total Bills",this.mode+" Payments"],[this.customer.name,this.mode,Object(l["D"])("DD/MM/YYYY hh:mm A",this.range.from),Object(l["D"])("DD/MM/YYYY hh:mm A",this.range.to),_.size(this.my_bills),_.size(this.payments)])},my_bills(){return _.keyBy(_.filter(this.bills,(({date:t,customer:e})=>Object(l["i"])(t,this.range.from,this.range.to)&&_.get(this.customer,"id")===_.get(e,"id"))),"id")},payments(){return _(this.my_bills).flatMap("payments").filter({type:this.mode,status:"Active"}).sortBy((({date:t})=>new Date(t))).value()},table(){return _(this.payments).map((({date:t,bill:e,amount:a})=>_.zipObject(["Date","Bill/Token","Type","Bill Amount","Status","Paid Amount","Bill Balance"],[Object(l["f"])(t,!0),e+"/"+this.bd(e,["token","id"]),this.bd(e,["token","type"]),Object(l["y"])(this.bd(e,"amount")),this.bd(e,"progress"),Object(l["y"])(a),this.balance(e)]))).value()},foot(){return n()(n()({},this.group_sum("Type","Paid Amount")),{},{Total:Object(l["y"])(_.sumBy(this.table,(t=>_.toNumber(t["Paid Amount"]))))})}},methods:{bd(t,e){return _.get(_.get(this.my_bills,t),e)},balance(t){return Object(l["y"])(this.bd(t,"payable")-this.bd(t,"paid"))},group_sum(t,e){return _(this.table).groupBy(t).mapValues((t=>Object(l["y"])(_.sumBy(t,(t=>_.toNumber(t[e])))))).value()}}},d=u,b=a("2877"),c=a("9989"),h=a("eebe"),p=a.n(h),y=Object(b["a"])(d,s,i,!1,null,null,null);e["default"]=y.exports;p()(y,"components",{QPage:c["a"]})}}]);