(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[45],{"1c7d":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{attrs:{padding:""}},[s("div",{staticClass:"text-center q-py-md q-my-md cursor-pointer",on:{click:function(){return t.mode++&&(t.page=1)}}},[s("div",{staticClass:"text-caption",staticStyle:{"line-height":"0.75rem"}},[t._v("Total "+t._s(t.idx)+" Payments")]),s("div",{staticClass:"text-bold text-positive text-h3"},[t._v(t._s(t.precision(t.Totals[t.idx])))])]),s("q-list",{attrs:{separator:""}},t._l(t.Showing,(function(e){return s("q-item",{key:"dbp-"+e.id},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{rounded:""}},[s("q-img",{attrs:{src:t.image(e.customer.image)}})],1)],1),s("q-item-section",[s("q-item-label",{staticClass:"text-bold"},[t._v(t._s(e.token)+", "+t._s(e.customer.name))]),s("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(e.bill)+" - "+t._s(e.items))]),s("q-item-label",{staticClass:"text-positive",attrs:{caption:""}},[t._v(t._s(e.type)+" Payment")])],1),s("q-item-section",{attrs:{side:""}},[s("q-item-label",{staticClass:"text-bold text-positive"},[t._v(t._s(t.precision(e.amount)))])],1)],1)})),1),s("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.Payments[t.idx].length>t.Showing.length,expression:"Payments[idx].length > Showing.length"}],staticClass:"full-width q-mt-md",attrs:{label:"Load More",flat:"",dense:"",color:"amber"},on:{click:function(e){t.page++}}})],1)},i=[],n=(s("5db7"),s("26e9"),s("73d9"),s("58d1")),r=s("b1c1"),o=s("232e"),l={name:"DeliveryBoyPayments",mixins:[n["a"]],data(){return{me:parseInt(this.$route.meta.me.id),mode:0,page:1}},computed:{Bills(){return _(this.bills).filter((({date:t,progress:e,token:{type:s}})=>"Home Delivery"===s&&["Partial","Paid"].includes(e)&&Object(r["n"])(t))).filter(["user.id",this.me]).value()},Payments(){return _(this.Bills).flatMap((t=>_.map(t.payments,(e=>"Active"===e.status?Object.assign({},e,{token:t.token.id,customer:t.customer,items:m(t.token.items)}):null)))).sortBy("id").reverse().groupBy("type").value()},Totals(){return _.mapValues(this.Payments,(t=>_.sumBy(t,(t=>_.toNumber(t.amount)))))},idx(){return o["PaymentsTypes"][this.mode%o["PaymentsTypes"].length]},Showing(){return _.take(this.Payments[this.idx],10*this.page)}},methods:{image:r["h"],precision:r["y"]}};function m(t){return _.map(t,(t=>_.get(t,["item","name"]))).join(", ")}var c=l,d=s("2877"),u=s("9989"),p=s("1c1c"),h=s("66e5"),v=s("4074"),y=s("cb32"),g=s("068f"),b=s("0170"),x=s("9c40"),q=s("eebe"),f=s.n(q),w=Object(d["a"])(c,a,i,!1,null,null,null);e["default"]=w.exports;f()(w,"components",{QPage:u["a"],QList:p["a"],QItem:h["a"],QItemSection:v["a"],QAvatar:y["a"],QImg:g["a"],QItemLabel:b["a"],QBtn:x["a"]})}}]);