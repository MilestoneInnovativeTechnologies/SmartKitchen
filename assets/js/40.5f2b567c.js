(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[40],{bb03:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{attrs:{padding:""}},[i("div",{staticClass:"q-px-md q-mb-sm"},[i("FilterInputText",{attrs:{label:"Filter",lazy:"true"},on:{text:function(t){e.filter=t}}})],1),i("q-list",e._l(e.FilteredTokens,(function(t){return i("TokenDetailDeliveryBoyExpansion",{key:"dbc-bltk-"+t.id,attrs:{token:t,group:"own",color:"positive",popup:"",label:e.label(t),caption:e.caption(t)},on:{deliver:function(i){return e.deliver(t)}}})})),1),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:!e.filter&&e.AllTokens.length>e.show,expression:"!filter && AllTokens.length > show"}],staticClass:"full-width q-mt-md",attrs:{label:"Show more",flat:"",dense:"",color:"amber"},on:{click:function(t){e.page++}}}),i("q-dialog",{attrs:{persistent:""},on:{"before-hide":function(t){e.deliver_mode=!1}},model:{value:e.deliver_mode,callback:function(t){e.deliver_mode=t},expression:"deliver_mode"}},[e.deliver_mode?i("DeliveryBoyPaymentCard",{style:e.popup_width(),attrs:{token:e.selected},on:{paid:e.paid}}):e._e()],1),i("OrderNewFabDeliveryBoy")],1)},r=[],n=(i("26e9"),i("faa7")),o=i("b1c1"),s=i("1cd8"),a=i("9416"),d=i("58d1"),u=i("5ab9"),c=i("3c10"),p={name:"DeliveryBoyBilled",components:{FilterInputText:u["a"],OrderNewFabDeliveryBoy:a["a"],DeliveryBoyPaymentCard:s["a"],TokenDetailDeliveryBoyExpansion:n["a"]},mixins:[d["a"]],data(){return{me:parseInt(this.$route.meta.me.id),deliver_mode:!1,selected:null,filter:"",page:1}},computed:{show(){return this.page*_.ceil((settings("items_per_page")||c["d"])/3)},hide_others(){return!0===Object(o["A"])(settings("delivery_boy_hide_others_billed"))},AllTokens(){return _(this.bills).filter((e=>["Pending","Partial"].includes(e.progress)&&"Home Delivery"===e.token.type)).filter((e=>!this.hide_others||m(e,this.$route.meta.me.id))).sortBy("id").reverse().map((e=>Object.assign({},e.token,{bill:e,slug:v(e)}))).value()},FilteredTokens(){return this.filter?_.filter(this.AllTokens,(e=>_.includes(e.slug,_.toLower(this.filter)))):_.take(this.AllTokens,this.show)}},methods:{popup_width:o["x"],label(e){return`${e.id}, ${e.customer.name}`},caption(e){return["Bill: ",e.bill.id,", Time:",Object(o["C"])(e.date)].join(" ")},deliver(e){this.selected=e,this.deliver_mode=!0},paid(){this.deliver_mode=!1,this.selected=null}}};function m({user:e},t){return!e||e.id===t||"Delivery Boy"!==e.role}function h(e){return(e||"").replaceAll(/\n/g,", ")}function v({id:e,token:t,payable:i}){return _.toLower([e,i,t.id,t.customer.name,t.customer.phone,h(t.customer.address)].join(" "))}var b=p,y=i("2877"),f=i("9989"),w=i("1c1c"),k=i("9c40"),g=i("24e8"),B=i("eebe"),D=i.n(B),T=Object(y["a"])(b,l,r,!1,null,null,null);t["default"]=T.exports;D()(T,"components",{QPage:f["a"],QList:w["a"],QBtn:k["a"],QDialog:g["a"]})}}]);