(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[82],{"6b17":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{attrs:{padding:""}},[t.customer?s("ReportCard",{attrs:{title:"Customer Payments",head:t.head,table:t.table,foot:t.foot,index:"",center:["Bill/Token"],right:["Amount"]}}):s("div",{staticClass:"text-center text-bold"},[t._v("Please select a customer")])],1)},n=[],r=(s("5db7"),s("73d9"),s("ded3")),i=s.n(r),o=s("460a"),l=s("b1c1"),m=s("58d1"),u={name:"PageReportCustomerPayments",components:{ReportCard:o["a"]},mixins:[m["a"]],computed:{range(){return Object(l["z"])(this.$store.state.public.range)},customer(){return _.get(this.$store.state,["public","customer"])},head(){return _.zipObject(["Customer","Start Date","End Date","Total Bills","Total Payments"],[this.customer.name,Object(l["D"])("DD/MM/YYYY hh:mm A",this.range.from),Object(l["D"])("DD/MM/YYYY hh:mm A",this.range.to),_.size(this.my_bills),_.size(this.payments)])},my_bills(){return _.keyBy(_.filter(this.bills,(({date:t,customer:e})=>Object(l["i"])(t,this.range.from,this.range.to)&&_.get(this.customer,"id")===_.get(e,"id"))),"id")},payments(){return _(this.my_bills).flatMap("payments").filter({status:"Active"}).sortBy((({date:t})=>new Date(t))).value()},table(){return _(this.payments).map((t=>_.zipObject(["Date","Mode","Bill/Token","Type","Amount"],[Object(l["f"])(t.date,!0),t.type,t.bill+"/"+_.get(this.my_bills,[t.bill,"token","id"]),_.get(this.my_bills,[t.bill,"token","type"]),Object(l["y"])(t.amount)]))).value()},foot(){return i()(i()({},_(this.payments).groupBy("type").mapValues((t=>Object(l["y"])(_.sumBy(t,(t=>_.toNumber(t.amount)))))).value()),{},{Amount:Object(l["y"])(_.sumBy(this.table,(({Amount:t})=>_.toNumber(t))))})}},methods:{}},c=u,b=s("2877"),p=s("9989"),d=s("eebe"),h=s.n(d),y=Object(b["a"])(c,a,n,!1,null,null,null);e["default"]=y.exports;h()(y,"components",{QPage:p["a"]})}}]);