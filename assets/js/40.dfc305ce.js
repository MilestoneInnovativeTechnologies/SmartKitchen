(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[40],{bb03:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e._self._c;return t("q-page",{attrs:{padding:""}},[t("div",{staticClass:"q-px-md q-mb-sm"},[t("FilterInputText",{attrs:{label:"Filter",lazy:"true"},on:{text:function(t){e.filter=t}}})],1),t("q-list",e._l(e.FilteredTokens,(function(i){return t("TokenDetailDeliveryBoyExpansion",{key:"dbc-bltk-"+i.id,attrs:{token:i,group:"own",color:"positive",popup:"",label:e.label(i),caption:e.caption(i)},on:{action:e.OSA_action}})})),1),t("q-btn",{directives:[{name:"show",rawName:"v-show",value:!e.filter&&e.AllTokens.length>e.show,expression:"!filter && AllTokens.length > show"}],staticClass:"full-width q-mt-md",attrs:{label:"Show more",flat:"",dense:"",color:"amber"},on:{click:function(t){e.page++}}}),t("OrderSummaryActionPopups",e._b({on:{done:e.OSA_action_done}},"OrderSummaryActionPopups",e.OSA_CB,!1)),t("OrderNewFabDeliveryBoy")],1)},n=[],o=(i("caad"),i("5319"),i("faa7")),l=i("b1c1"),s=i("1cd8"),a=i("9416"),d=i("58d1"),c=i("5ab9"),u=i("3c10"),p=i("c9df"),m=i("3f08"),h={name:"DeliveryBoyBilled",components:{OrderSummaryActionPopups:p["a"],FilterInputText:c["a"],OrderNewFabDeliveryBoy:a["a"],DeliveryBoyPaymentCard:s["a"],TokenDetailDeliveryBoyExpansion:o["a"]},mixins:[d["a"],m["a"]],data(){return{me:parseInt(this.$route.meta.me.id),filter:"",page:1}},computed:{show(){return this.page*_.ceil((settings("items_per_page")||u["d"])/3)},hide_others(){return!0===Object(l["B"])(settings("delivery_boy_hide_others_billed"))},AllTokens(){return _(this.bills).filter((e=>["Pending","Partial"].includes(e.progress)&&"Home Delivery"===e.token.type)).filter((e=>!this.hide_others||b(e,this.$route.meta.me.id))).sortBy("id").reverse().map((e=>Object.assign({},e.token,{bill:e,slug:f(e)}))).value()},FilteredTokens(){return this.filter?_.filter(this.AllTokens,(e=>_.includes(e.slug,_.toLower(this.filter)))):_.take(this.AllTokens,this.show)}},methods:{popup_width:l["y"],label(e){return`${e.id}, ${e.customer.name}`},caption(e){return["Bill: ",e.bill.id,", Time:",Object(l["D"])(e.date)].join(" ")},deliver(e){this.selected=e,this.deliver_mode=!0},paid(){this.deliver_mode=!1,this.selected=null}}};function b({user:e},t){return!e||e.id===t||"Delivery Boy"!==e.role}function y(e){return(e||"").replace(/\n/g,", ")}function f({id:e,token:t,payable:i}){return _.toLower([e,i,t.id,t.customer.name,t.customer.phone,y(t.customer.address)].join(" "))}var v=h,w=i("2877"),k=i("9989"),g=i("1c1c"),B=i("9c40"),O=i("eebe"),T=i.n(O),A=Object(w["a"])(v,r,n,!1,null,null,null);t["default"]=A.exports;T()(A,"components",{QPage:k["a"],QList:g["a"],QBtn:B["a"]})}}]);