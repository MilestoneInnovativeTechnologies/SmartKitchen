(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[52],{fcb2:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"flex-center flex column",attrs:{padding:""}},[s("q-card",{attrs:{flat:""}},[s("q-card-section",{directives:[{name:"show",rawName:"v-show",value:t.errorShow&&t.errorMsg,expression:"errorShow && errorMsg"}],staticClass:"text-red-10 text-center text-uppercase text-bold"},[t._v(t._s(t.errorMsg)+", Please try again")]),s("q-card-section",{directives:[{name:"show",rawName:"v-show",value:!t.SUBSCRIBE_HIDE_LOGIN,expression:"!SUBSCRIBE_HIDE_LOGIN"}],staticClass:"q-pa-none"},[s("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut",mode:"out-in"}},[s(t.components[t.login],{tag:"component",style:t.styles[t.login]})],1)],1),s("q-card-section",{staticClass:"q-pb-none q-pt-xs text-caption text-center text-grey-4"},[t._v("Milestone Smart Kitchen - v"+t._s(t.version))])],1),s("SubscriptionExpiring"),t.SUBSCRIBE_HIDE_LOGIN?s("div",{staticClass:"text-weight-bolder text-red",staticStyle:{"font-size":"5rem"}},[t._v(t._s(parseInt(t.HIDE_ALTER_WAIT/1e3)))]):t._e()],1)},a=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{attrs:{flat:""}},[s("q-card-section",[t.role?s("GetRoleUserLogin",{attrs:{role:t.role,loading:t.loading},on:{clear:function(e){t.role=""},user:function(e){t.user=e},login:t.login}}):s("RolesSelect",{staticClass:"q-mx-auto",on:{role:function(e){t.role=e}}}),s("form",{ref:"login_form",staticStyle:{position:"absolute"},attrs:{action:t.LOGIN,method:"post"}},[s("q-input",{attrs:{type:"hidden",name:"id",value:t.id}}),s("q-input",{attrs:{type:"hidden",name:"password",value:t.password}}),s("q-input",{attrs:{type:"hidden",name:t.select,value:t.selected}})],1)],1)],1)},r=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{staticClass:"q-mx-auto",staticStyle:{width:"90vw","max-width":"20rem"}},[s("q-card-section",{staticClass:"bg-primary"},[s("div",{staticClass:" text-white items-start"},[s("q-icon",{staticStyle:{"margin-top":"-0.2rem",cursor:"pointer"},attrs:{name:"arrow_back_ios",size:"xs"},on:{click:function(e){return t.$emit("clear")}}}),t._v("\n      Click on user to login\n    ")],1)]),s("q-card-section",[s("q-list",{attrs:{separator:"",bordered:""}},t._l(t.users,(function(e,i){return s("q-expansion-item",{key:"user-"+e.id,attrs:{group:"login"},on:{click:function(s){t.s_user=e}},scopedSlots:t._u([{key:"header",fn:function(){return[s("q-item-section",{attrs:{avatar:""}},[t._v(t._s(i+1))]),s("q-item-section",[s("q-item-label",[t._v(t._s(e.name))])],1)]},proxy:!0}],null,!0)},[s("q-item-section",{staticClass:"q-px-lg q-py-xs q-gutter-y-xs"},[s("q-input",{attrs:{type:"password",dense:"",name:"password",outlined:"",label:"Password"},on:{focus:function(s){t.s_user=e}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s(t.component,{tag:"component",on:{selected:t.selected}}),s("q-btn",{attrs:{label:"Login",color:"primary",loading:t.loading},on:{click:t.login}})],1)],1)})),1)],1)],1)},l=[],c=s("ded3"),d=s.n(c),p=s("2f62"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",{attrs:{options:t.options,label:"Select Menu",dense:"",value:t.menu,"map-options":"",outlined:""},on:{input:t.emit}})},m=[],h={name:"LoginMenuSelect",data(){return{menu:null}},computed:{menus(){return this.$store.state.menus.data},options(){return _.map(this.menus,(({id:t,name:e})=>_.zipObject(["label","value"],[e,t])))}},methods:{emit({value:t}){this.$emit("selected",t),this.menu=t}}},v=h,g=s("2877"),b=s("ddd8"),I=s("eebe"),x=s.n(I),y=Object(g["a"])(v,u,m,!1,null,null,null),E=y.exports;x()(y,"components",{QSelect:b["a"]});var S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",{attrs:{options:t.options,label:"Select Kitchen",dense:"",value:t.kitchen,"map-options":"",outlined:""},on:{input:t.emit}})},C=[],f={name:"LoginKitchenSelect",data(){return{kitchen:null}},computed:{kitchens(){return this.$store.getters["kitchens/non_remote"]},options(){return _.map(this.kitchens,(({id:t,name:e})=>_.zipObject(["label","value"],[e,t])))}},methods:{emit({value:t}){this.$emit("selected",t),this.kitchen=t}}},O=f,q=Object(g["a"])(O,S,C,!1,null,null,null),w=q.exports;x()(q,"components",{QSelect:b["a"]});var R={name:"GetRoleUserLogin",components:{LoginKitchenSelect:w,LoginMenuSelect:E},props:["role","loading"],data(){return{s_user:null,password:"",s_selected:null,defaults:LoginSelect}},computed:d()(d()({},Object(p["b"])("users",["role_users"])),{},{users(){return this.role_users(this.role)},roleItem(){return _.has(this.defaults,this.role)?_.capitalize(this.defaults[this.role]):null},component(){return this.roleItem?`Login${this.roleItem}Select`:null}}),methods:{selected(t){this.s_selected=t},login(){if(this.password)return this.$emit("login",_.zipObject(["user","password",_.toLower(this.defaults[this.role])],[this.s_user,this.password,[this.s_selected]]))}}},T=R,L=s("f09f"),D=s("a370"),k=s("0016"),N=s("1c1c"),A=s("3b73"),P=s("4074"),B=s("0170"),Q=s("27f9"),Y=s("9c40"),U=Object(g["a"])(T,o,l,!1,null,null,null),M=U.exports;x()(U,"components",{QCard:L["a"],QCardSection:D["a"],QIcon:k["a"],QList:N["a"],QExpansionItem:A["a"],QItemSection:P["a"],QItemLabel:B["a"],QInput:Q["a"],QBtn:Y["a"]});var $=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-gutter-y-xs"},t._l(t.roles,(function(e){return s("q-card",{key:"role-"+e,staticClass:"bg-primary q-mx-auto",staticStyle:{cursor:"pointer",width:"16rem","max-width":"65vh"},attrs:{dark:""},on:{click:function(s){return t.$emit("role",e)}}},[s("q-card-section",{staticClass:"text-center"},[s("div",{staticClass:"text-h6"},[t._v(t._s(e))])])],1)})),1)},G=[],j={name:"RolesSelect",computed:Object(p["b"])("users",["roles"])},X=j,z=Object(g["a"])(X,$,G,!1,null,null,null),H=z.exports;x()(z,"components",{QCard:L["a"],QCardSection:D["a"]});var W={name:"LoginPassword",components:{GetRoleUserLogin:M,RolesSelect:H},data(){return{role:"",user:null,loading:!1,LOGIN:LOGIN,id:"",password:"",select:"",selected:[]}},methods:{login({user:{id:t},password:e,menu:s,kitchen:i}){if(this.loading=!0,!t||!e)return this.loading=!1;this.id=t,this.password=e,this.select=s?"menu":i?"kitchen":"",this.selected=s||i||[],this.loading=!1,this.$nextTick((()=>this.$refs["login_form"].submit()))}}},K=W,F=Object(g["a"])(K,n,r,!1,null,null,null),V=F.exports;x()(F,"components",{QCard:L["a"],QCardSection:D["a"],QInput:Q["a"]});var J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"bg-grey-2"},[s("div",{staticClass:"row q-col-gutter-x-xs"},t._l(t.digs,(function(e,i){return s("div",{key:"dif-"+i,staticClass:"col-3"},[s("div",{staticClass:"text-center bg-white q-pa-sm text-bold text-grey-8",staticStyle:{"font-size":"1.85rem"},domProps:{innerHTML:t._s(e)}})])})),0)]),s("q-card-section",[s("div",{staticClass:"row q-col-gutter-xs"},[t._l(9,(function(e){return s("div",{key:"pin-number-"+e,staticClass:"col-4"},[s("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1.25rem"},attrs:{label:e,color:"primary",glossy:"",size:"md",padding:"md md"},on:{click:function(s){t.digs=e}}})],1)})),s("div",{staticClass:"col-4"},[s("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1.25rem"},attrs:{icon:"backspace",color:"primary",glossy:"",size:"md",padding:"md md"},on:{click:t.backspace}})],1),s("div",{staticClass:"col-4"},[s("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1.25rem"},attrs:{label:"0",color:"primary",glossy:"",size:"md",padding:"md md"},on:{click:function(e){t.digs=0}}})],1),s("div",{staticClass:"col-4"},[s("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1.25rem"},attrs:{icon:"keyboard_return",color:"primary",glossy:"",size:"md",padding:"md md",disable:t.pin.length<4},on:{click:t.login}})],1)],2),s("form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"login_form",attrs:{action:t.LOGIN,method:"post"}},[s("q-input",{attrs:{type:"hidden",name:"pin",value:t.pin}})],1)]),s("q-inner-loading",{attrs:{showing:t.loading}},[s("q-spinner-grid",{attrs:{size:"150px",color:"primary"}})],1)],1)},Z=[],tt=(s("fb6a"),s("843c"),s("b1c1")),et={name:"LoginPin",data(){return{pin:"",LOGIN:LOGIN,loading:!1}},computed:{digs:{get(){return _.padEnd(this.pin,4,"_").split("")},set(t){Object(tt["B"])(),this.pin=(this.pin+t).slice(-4)}}},methods:{backspace(){Object(tt["B"])(),this.pin=this.pin.slice(0,_.size(this.pin)-1)},login(){Object(tt["B"])(),this.loading=!0,this.$refs["login_form"].submit()},eventManage(t){this.$q.platform.is.desktop&&(t("keypress",this.docListen),t("keyup",this.docListenKeyup))},docListenKeyup(t){["Backspace","Delete","Escape","Tab"].includes(t.key)&&this.docListen(t)},docListen(t){return[0,1,2,3,4,5,6,7,8,9,"0","1","2","3","4","5","6","7","8","9"].includes(t.key)?this.digs=t.key:["Enter","+","=","Tab"].includes(t.key)&&!t.ctrlKey||["Enter","\n"].includes(t.key)&&t.ctrlKey?this.login():["b","B","Backspace"].includes(t.key)?this.backspace():["c","C","Delete","Escape"].includes(t.key)?Object(tt["B"])()||(this.pin=""):void 0}},created(){this.eventManage(document.addEventListener)},beforeDestroy(){this.eventManage(document.removeEventListener)}},st=et,it=s("74f7"),at=s("981c"),nt=Object(g["a"])(st,J,Z,!1,null,null,null),rt=nt.exports;x()(nt,"components",{QCard:L["a"],QCardSection:D["a"],QBtn:Y["a"],QInput:Q["a"],QInnerLoading:it["a"],QSpinnerGrid:at["a"]});var ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"bg-primary text-white"},[s("div",{staticClass:"text-h6"},[t._v("Display Screens")])]),s("q-list",{attrs:{separator:""}},t._l(t.screens,(function(e,i){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:"ds-"+i,attrs:{clickable:"",to:e.to}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{"text-color":t.textColor,rounded:"",icon:e.icon}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-primary text-bold"},[t._v(t._s(e.name))]),s("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.caption))])],1)],1)})),1)],1)},lt=[],ct=[{name:"Kitchen Item Processing",caption:"Displays tokens which are currently processing in a kitchen.",icon:"person",to:{name:"display_kitchen_processing_tokens"}},{name:"Active Tokens",caption:"Active tokens details",icon:"receipt",to:{name:"display_active_tokens"}},{name:"Daily Order",caption:"Today's full orders",icon:"receipt"},{name:"Home Delivery",caption:"Delivery orders tracking",icon:"logout"},{name:"Table Status",caption:"Realtime view each tables order status and progress",icon:"logout"},{name:"Delivery Boy",caption:"View the activities of active delivery boys handling orders",icon:"logout"},{name:"Bill Payments",caption:"Displays list of Pending Bills, and on selecting any bill Payment UPI QR Code will be displayed for making easy payment..",icon:"attach_money",to:{name:"display_pay_bill_qr_code"}}],dt={name:"DisplayBoards",data(){return{textColor:"primary",screens:ct}}},pt=dt,ut=s("66e5"),mt=s("cb32"),_t=s("714f"),ht=Object(g["a"])(pt,ot,lt,!1,null,null,null),vt=ht.exports;x()(ht,"components",{QCard:L["a"],QCardSection:D["a"],QList:N["a"],QItem:ut["a"],QItemSection:P["a"],QAvatar:mt["a"],QItemLabel:B["a"]}),x()(ht,"directives",{Ripple:_t["a"]});var gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.SUBSCRIPTION_NOTIFY?s("q-card",{staticClass:"q-mt-md",attrs:{flat:""}},[t.EXPIRED?s("q-card-section",[s("q-card-section",{staticClass:"text-center",staticStyle:{border:"1px solid #b71c1c"}},[s("div",{staticClass:"text-bold bg-red-10 text-white q-py-sm q-mb-sm"},[t._v("SUBSCRIPTION EXPIRED")]),s("div",{staticClass:"text-bold text-red-10"},[t._v("ONLY ADMINISTRATOR CAN LOGIN")]),s("div",{staticClass:"text-bold text-red"},[t._v("OTHER LOGINS ARE TEMPORARILY DISABLED UNTIL NEW SUBSCRIPTION ADDED")])])],1):s("q-card-section",{staticClass:"text-red"},[t.DAYS_TO_EXPIRE>15?s("q-card-section",{staticClass:"text-grey-6"},[s("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is about to expire.. Only "),s("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>10?s("q-card-section",{staticClass:"text-black"},[s("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is about to expire.. Only "),s("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>7?s("q-card-section",{staticClass:"text-red"},[s("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is getting expired.. Only "),s("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>5?s("q-card-section",{staticClass:"text-red-10",staticStyle:{border:"5px double #B71C1C"}},[s("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is expiring.. Only "),s("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>2?s("q-card-section",{staticClass:"text-red bg-grey-3"},[s("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is expiring.. Only "),s("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>1?s("q-card-section",{staticClass:"text-white bg-red-8"},[s("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is expiring.. Only "),s("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>0?s("q-card-section",{staticClass:"text-white bg-red-10 text-center"},[s("div",{staticClass:"text-bold"},[t._v("ATTENTION")]),s("div",{staticClass:"text-bold"},[t._v("SUBSCRIPTION ENDS TOMORROW")]),s("div",{staticClass:"text-bold"},[t._v("PLEASE RENEW NOW ITSELF FOR UNINTERRUPTED SERVICE")])]):s("q-card-section",{staticClass:"text-center",staticStyle:{border:"1px solid #b71c1c"}},[s("div",{staticClass:"text-bold bg-red-10 text-white q-py-sm q-mb-sm"},[t._v("ATTENTION")]),s("div",{staticClass:"text-bold"},[t._v("SUBSCRIPTION ENDING TODAY")]),s("div",{staticClass:"text-bold"},[t._v("SERVICES WILL BE LIMITED FROM TOMORROW ONWARDS")])])],1)],1):t._e()},bt=[],It=s("adfa");const xt=_.toInteger(Math.abs(It["VALID_UPTO_REMAINS"])/86400);var yt={data(){return{VALID_UPTO_REMAINS:It["VALID_UPTO_REMAINS"],EXPIRED:It["VALID_UPTO_REMAINS"]<0,DAYS_TO_EXPIRE:xt,NOTIFY_DURATION:25,SUBSCRIBE_HIDE_LOGIN:xt<6,HIDE_ALTER_WAIT:1e4,interval:null}},computed:{SUBSCRIPTION_NOTIFY(){return this.DAYS_TO_EXPIRE<this.NOTIFY_DURATION}},created(){this.SUBSCRIBE_HIDE_LOGIN&&(this.HIDE_ALTER_WAIT=xt>3?2500:2500+1e3*(4-xt),this.interval=setInterval((t=>{t.HIDE_ALTER_WAIT-=1e3,t.HIDE_ALTER_WAIT<=0&&(clearInterval(this.interval),t.SUBSCRIBE_HIDE_LOGIN=!1)}),1e3,this))}},Et={name:"SubscriptionExpiring",mixins:[yt]},St=Et,Ct=Object(g["a"])(St,gt,bt,!1,null,null,null),ft=Ct.exports;x()(Ct,"components",{QCard:L["a"],QCardSection:D["a"]});var Ot=s("3c10"),qt={name:"PageLoginIndex",components:{SubscriptionExpiring:ft,DisplayBoards:vt,LoginPin:rt,LoginPassword:V},mixins:[yt],data(){return{styles:{pin:{maxWidth:"330px",width:"90vw"},password:{maxWidth:"330px",width:"90vw"},display:{width:"680px"}},components:{pin:"LoginPin",password:"LoginPassword",display:"DisplayBoards"},errorShow:!0,version:Ot["k"]}},computed:{login(){return this.$store.state.public.login||"pin"},errorMsg(){return location.search&&"?msg="===location.search.substr(0,5)?decodeURI(location.search.substr(5)):""}},created(){this.errorMsg&&setTimeout((t=>t.errorShow=!1),7e3,this)}},wt=qt,Rt=s("9989"),Tt=Object(g["a"])(wt,i,a,!1,null,null,null);e["default"]=Tt.exports;x()(Tt,"components",{QPage:Rt["a"],QCard:L["a"],QCardSection:D["a"]})}}]);