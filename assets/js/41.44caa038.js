(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[41],{ef79:function(e,t,l){"use strict";l.r(t);var n=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("q-page",{attrs:{padding:""}},[l("div",{staticClass:"q-px-md q-mb-sm"},[l("FilterInputText",{attrs:{label:"Filter",lazy:"true"},on:{text:function(t){e.filter=t}}})],1),l("q-list",e._l(e.FilteredTokens,(function(t){return l("TokenDetailDeliveryBoyExpansion",{key:"dbc-cm-tk-"+t.id,attrs:{token:t,group:"own",color:"purple",popup:"",label:e.label(t),caption:e.caption(t)},on:{bill:function(l){return e.bill(t)}}})})),1),l("q-btn",{directives:[{name:"show",rawName:"v-show",value:!e.filter&&e.AllTokens.length>e.show,expression:"!filter && AllTokens.length > show"}],staticClass:"full-width q-mt-md",attrs:{label:"Show more",flat:"",dense:"",color:"amber"},on:{click:function(t){e.page++}}}),l("q-dialog",{attrs:{persistent:""},on:{"before-hide":function(t){e.bill_mode=!1}},model:{value:e.bill_mode,callback:function(t){e.bill_mode=t},expression:"bill_mode"}},[e.bill_mode?l("BillGenerateCard",{style:e.popup_width(),attrs:{token:e.selected},on:{generated:e.generated}}):e._e()],1),l("OrderNewFabDeliveryBoy")],1)},r=[],i=(l("26e9"),l("faa7")),o=l("b1c1"),s=l("bf22"),a=l("1cd8"),d=l("232e"),c=l("9416"),u=l("3758"),p=l("5ab9"),m=l("3c10"),b={name:"DeliveryBoyCompleted",components:{FilterInputText:p["a"],OrderNewFabDeliveryBoy:c["a"],DeliveryBoyPaymentCard:a["a"],BillGenerateCard:s["a"],TokenDetailDeliveryBoyExpansion:i["a"]},mixins:[u["a"]],data(){return{me:parseInt(this.$route.meta.me.id),bill_mode:!1,deliver_mode:!1,selected:null,filter:"",page:1}},computed:{billed_tokens(){return this.$store.getters["tokens/billed"]},show(){return this.page*_.ceil((settings("items_per_page")||m["d"])/3)},AllTokens(){return _(this.tokens).filter((e=>"Home Delivery"===e.type&&"Cancelled"!==e.progress&&f(e)&&!_.includes(this.billed_tokens,e.id))).map((e=>e.customer?e:Object.assign({},e,{customer:d["NoCustomer"]}))).map((e=>Object.assign({},e,{slug:g(e)}))).sortBy("id").reverse().value()},FilteredTokens(){return this.filter?_.filter(this.AllTokens,(e=>_.includes(e.slug,_.toLower(this.filter)))):_.take(this.AllTokens,this.show)}},methods:{popup_width:o["x"],label(e){return`${e.id}, ${e.customer.name}`},caption(e){return h(_.get(e,["customer","address"],""))},bill(e){this.selected=e,this.bill_mode=!0},generated(){this.bill_mode=!1,this.selected=null}}};function h(e){return(e||"").replaceAll(/\n/g,", ")}function f({items:e}){return e.length&&_.every(e,(({progress:e})=>_.includes(["Cancelled","Completed","Served"],e)))}function g({id:e,customer:t}){return _.toLower([e,t.name,t.phone,h(t.address)].join(" "))}var k=b,w=l("2877"),v=l("9989"),y=l("1c1c"),x=l("9c40"),T=l("24e8"),B=l("eebe"),C=l.n(B),D=Object(w["a"])(k,n,r,!1,null,null,null);t["default"]=D.exports;C()(D,"components",{QPage:v["a"],QList:y["a"],QBtn:x["a"],QDialog:T["a"]})}}]);