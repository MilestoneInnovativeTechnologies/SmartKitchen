(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[82],{"149a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("q-page",{attrs:{padding:""}},[t.customer&&t.mode?e("ReportCard",{attrs:{title:"Customer Payments by Mode",head:t.head,table:t.table,foot:t.foot,index:"",center:["Bill/Token"],right:["Bill Amount","Paid Amount","Bill Balance"]}}):e("div",{staticClass:"text-center text-bold"},[t._v("Please select Customer and Payment Mode")])],1)},i=[],r=a("460a"),n=a("b1c1"),o=a("58d1"),l={name:"PageReportCustomerByPaymentType",components:{ReportCard:r["a"]},mixins:[o["a"]],computed:{range(){return Object(n["A"])(this.$store.state.public.range)},customer(){return _.get(this.$store.state,["public","customer"])},mode(){return _.get(this.$store.state,["public","payment_type"])},head(){return _.zipObject(["Customer","Mode","Start Date","End Date","Total Bills",this.mode+" Payments"],[this.customer.name,this.mode,Object(n["E"])("DD/MM/YYYY hh:mm A",this.range.from),Object(n["E"])("DD/MM/YYYY hh:mm A",this.range.to),_.size(this.my_bills),_.size(this.payments)])},my_bills(){return _.keyBy(_.filter(this.bills,(({date:t,customer:e})=>Object(n["j"])(t,this.range.from,this.range.to)&&_.get(this.customer,"id")===_.get(e,"id"))),"id")},payments(){return _(this.my_bills).flatMap("payments").filter({type:this.mode,status:"Active"}).sortBy((({date:t})=>new Date(t))).value()},table(){return _(this.payments).map((({date:t,bill:e,amount:a})=>_.zipObject(["Date","Bill/Token","Type","Bill Amount","Status","Paid Amount","Bill Balance"],[Object(n["f"])(t,!0),e+"/"+this.bd(e,["token","id"]),this.bd(e,["token","type"]),Object(n["z"])(this.bd(e,"amount")),this.bd(e,"progress"),Object(n["z"])(a),this.balance(e)]))).value()},foot(){return{...this.group_sum("Type","Paid Amount"),Total:Object(n["z"])(_.sumBy(this.table,(t=>_.toNumber(t["Paid Amount"]))))}}},methods:{bd(t,e){return _.get(_.get(this.my_bills,t),e)},balance(t){return Object(n["z"])(this.bd(t,"payable")-this.bd(t,"paid"))},group_sum(t,e){return _(this.table).groupBy(t).mapValues((t=>Object(n["z"])(_.sumBy(t,(t=>_.toNumber(t[e])))))).value()}}},m=l,u=a("2877"),b=a("9989"),d=a("eebe"),c=a.n(d),h=Object(u["a"])(m,s,i,!1,null,null,null);e["default"]=h.exports;c()(h,"components",{QPage:b["a"]})}}]);