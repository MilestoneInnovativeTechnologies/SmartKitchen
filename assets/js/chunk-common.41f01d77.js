(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"12cd":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row q-col-gutter-xs"},[s("div",{staticClass:"col-12 row"},[s("FilterInputText",{on:{text:function(e){t.f_text=e}}}),s("q-space"),s("q-pagination",{attrs:{color:"purple",max:t.pages,"max-pages":t.view_links,"boundary-numbers":!0},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}})],1),s("Masonry",{attrs:{items:t.items,width:"200"},scopedSlots:t._u([{key:"item",fn:function(e){return[s("AdministratorImageItem",{attrs:{name:e[t.name],id:e.id,image:e.image,item:t.content}})]}}])})],1)},i=[],n=(s("fb6a"),s("b1c1")),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-img",{attrs:{basic:"",src:t.temp||t.src}},[s("div",{staticClass:"absolute-bottom text-subtitle2 text-center"},[t._v(t._s(t.name))])]),s("q-card-actions",{staticClass:"row q-col-gutter-x-sm",attrs:{align:"center"}},[s("div",[s("q-btn",{attrs:{icon:"clear",color:"red",padding:"xs",size:"md"},on:{click:t.remove}})],1),s("div",{staticClass:"col-grow"},[s("q-file",{staticClass:"full-width",attrs:{label:"New photo",outlined:"",clearable:"",dense:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"attach_file"}})]},proxy:!0}]),model:{value:t.media,callback:function(e){t.media=e},expression:"media"}})],1)]),s("q-inner-loading",{attrs:{showing:t.processing,"transition-hide":"fadeOut","transition-show":"fadeIn"}},[s("q-spinner-facebook",{attrs:{color:"primary",size:"2em"}})],1)],1)},o=[],l=s("f567"),c={name:"AdministratorImageItem",props:["item","id","name","image"],data(){return{processing:!1,temp:null}},computed:{src(){return this.image?Object(n["g"])(this.image):Object(n["g"])(l["a"].no)},media:{get(){return null},set(t){t&&(this.processing=!0,upload(this.item,this.id,t).then((({data:t})=>this.processing=!(this.temp=Object(n["g"])(t.image)))))}}},methods:{remove(){this.processing=!0,remove_upload(this.item,this.id).then((({data:t})=>this.processing=!(this.temp=Object(n["g"])(t.image))))}},watch:{image(){this.temp=null}}},d=c,u=s("2877"),m=s("f09f"),p=s("068f"),h=s("4b7e"),b=s("9c40"),g=s("7d53"),f=s("0016"),v=s("74f7"),q=s("e669"),y=s("eebe"),x=s.n(y),k=Object(u["a"])(d,r,o,!1,null,null,null),C=k.exports;x()(k,"components",{QCard:m["a"],QImg:p["a"],QCardActions:h["a"],QBtn:b["a"],QFile:g["a"],QIcon:f["a"],QInnerLoading:v["a"],QSpinnerFacebook:q["a"]});var w=s("5ab9"),Q=s("c624"),S={name:"AdministratorImageCommon",components:{Masonry:Q["a"],FilterInputText:w["a"],AdministratorImageItem:C},props:["content","list","name","filter"],data(){return{f_text:"",current:1,per_page:36,view_links:6}},computed:{filtered(){return this.f_text?_.filter(this.list,(t=>Object(n["o"])(t,this.filter,this.f_text))):Object.values(this.list)},items(){return _(this.filtered).slice((this.current-1)*this.per_page).take(this.per_page).value()},pages(){return _.ceil(_.size(this.filtered)/this.per_page)}},methods:{hKey({id:t}){return Object(n["d"])("administrator","image","content",this.content,"item",t)}}},I=S,$=s("2c91"),j=s("3b16"),O=Object(u["a"])(I,a,i,!1,null,null,null);e["a"]=O.exports,x()(O,"components",{QSpace:$["a"],QPagination:j["a"]})},"18cd":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"row justify-between text-white",class:"bg-"+(t.color||"primary"),attrs:{horizontal:""}},[s("q-card-section",{staticClass:"q-pr-xl",class:"bg-"+t.color+"-7"},[s("div",{staticClass:"text-caption text-italic",staticStyle:{"line-height":"0.9"}},[t._v(t._s(t.token.type))]),s("div",{staticClass:"text-h6",staticStyle:{"line-height":"1.5rem"}},[t._v("Token ID: "+t._s(t.token.id))]),s("div",{staticClass:"text-caption"},[t._v(t._s(t.token.date_human))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.token.narration,expression:"token.narration"}],staticClass:"text-caption text-italic q-mt-md"},[t._v(t._s(t.token.narration))])]),s("q-card-section",{staticClass:"col-grow"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"absolute-top-right q-mr-xs q-mt-xs",attrs:{icon:"close","text-color":"grey-1",dense:"",rounded:"",flat:""}}),s("q-badge",{staticClass:"q-mt-md q-px-lg q-py-sm",staticStyle:{transform:"translateX(-50%)"},attrs:{color:"grey-1","text-color":t.color||"primary",label:t.progress}}),t.customer?s("div",{staticClass:"text-right"},[s("div",{staticClass:"text-h6"},[t._v(t._s(t.customer.name))]),s("div",{staticClass:"text-caption",staticStyle:{"line-height":"0.5"}},[t._v(t._s(t.customer.phone))])]):t._e()],1)],1),s("q-card-section",{staticClass:"row items-center justify-between"},[t.token.price_list?s("ItemDetailStack",{attrs:{color:t.color,label:"price list"}},[t._v(t._s(t.token.price_list.name))]):t._e(),t.token.seating?s("ItemDetailStack",{attrs:{color:t.color,label:"seating"}},[t._v(t._s(t.token.seating.name))]):t._e(),t.token.waiter?s("ItemDetailStack",{attrs:{color:t.color,label:"waiter"}},[t._v(t._s(t.token.waiter.name))]):t._e()],1),s("q-list",{staticClass:"bg-grey-1",attrs:{bordered:""}},t._l(t.items,(function(e,a){return s("ArchiveTokenListItem",{key:"atd-t-"+t.token.id+"-i-i-"+e.id,class:{"bg-grey-3":a%2},attrs:{color:t.color,item:e}})})),1),s("q-card-actions",[s("q-space"),s("q-btn",{attrs:{dense:"",color:t.color,size:"sm",label:"Progress Timings"},on:{click:function(e){t.token_timings=!0}}}),s("q-btn",{attrs:{dense:"",color:t.color,size:"sm",label:"Print"},on:{click:function(e){return t.$emit("print")}}})],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.token_timings,callback:function(e){t.token_timings=e},expression:"token_timings"}},[s("TokenTimingCard",{staticStyle:{"min-width":"65vw"},attrs:{timing:t.timing,color:t.color,bordered:"",separator:""}})],1)],1)},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-bar",{staticClass:"text-white",class:"bg-"+t.color},[s("div",{staticStyle:{"font-size":"0.7rem"}},[t._v("Progress Timings")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",rounded:"",padding:"0",size:"sm",icon:"close"}})],1),s("q-list",t._b({},"q-list",t.$attrs,!1),t._l(t.times,(function(e,a){return s("q-item",{key:"ttl-"+a,staticClass:"q-py-xs"},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{size:"sm","text-color":t.color,icon:a?"subdirectory_arrow_right":"play_arrow"}})],1),s("q-item-section",[s("q-item-label",{staticStyle:{"font-size":"0.65rem"},attrs:{caption:""}},[t._v(t._s(t.rDate(e.time)))]),s("q-item-label",{class:"text-"+t.color,staticStyle:{"font-size":"0.85rem"}},[t._v(t._s(e.progress||e.status))])],1),s("q-item-section",{attrs:{side:""}},[s("q-badge",{staticClass:"q-py-xs q-px-sm",staticStyle:{"font-size":"0.65rem"},attrs:{color:e.delay[0],outline:"",label:e.delay.slice(1).join(" ")}})],1)],1)})),1)],1)},r=[];const o=s("fe09").date;var l={name:"TokenTimingCard",props:["timing","color"],computed:{times(){return _.map(this.timing,((t,e)=>Object.assign({},t,{delay:this.dText2(t,e)})))},initial(){return o.extractDate(_.toString(_.first(this.timing).time),"X")},final(){return o.extractDate(_.toString(_.last(this.timing).time),"X")},isSameDay(){return o.isSameDate(this.initial,this.final,"day")}},methods:{jDateX(t){return o.extractDate(_.toString(t),"X")},rDate(t){return o.formatDate(this.jDateX(t),this.isSameDay?"hh:mm A":"hh:mm A (DD/MMM)")},differ(t,e){return o.getDateDiff(this.jDateX(t),this.jDateX(e),"seconds")},dText({time:t},e){return e?this.differArray(this.differ(t,this.timing[e-1].time)):[]},dText2({time:t},e){return this.differArray(this.differ(this.timing[e+1]?this.timing[e+1].time:o.formatDate(new Date,"X"),t))},differArray(t){return t<60?["positive",t,"secs"]:t<180?["positive",_.round(t/60),"mins"]:t<420?["lime-9",_.round(t/60),"mins"]:t<900?["yellow-9",_.round(t/60),"mins"]:t<1800?["orange-10",_.round(t/60),"mins"]:t<3600?["deep-orange-10",_.round(t/60),"mins"]:t<10800?["brown-6",_.round(t/3600,1),"hrs"]:t<86400?["brown-10",_.round(t/3600,1),"hrs"]:t<5184e3?["brown-10",_.round(t/86400,1),"dys"]:["brown-10",_.round(t/86400,2),"mnths"]}}},c=l,d=s("2877"),u=s("f09f"),m=s("d847"),p=s("2c91"),h=s("9c40"),b=s("1c1c"),g=s("66e5"),f=s("4074"),v=s("cb32"),q=s("0170"),y=s("58a8"),x=s("a370"),k=s("05eb"),C=s("74af"),w=s("7f67"),Q=s("eebe"),S=s.n(Q),I=Object(d["a"])(c,n,r,!1,null,null,null),$=I.exports;S()(I,"components",{QCard:u["a"],QBar:m["a"],QSpace:p["a"],QBtn:h["a"],QList:b["a"],QItem:g["a"],QItemSection:f["a"],QAvatar:v["a"],QItemLabel:q["a"],QBadge:y["a"],QCardSection:x["a"],QTimeline:k["a"],QTimelineEntry:C["a"]}),S()(I,"directives",{ClosePopup:w["a"]});var j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-item",t._b({},"q-item",t.$attrs,!1),[s("ItemDetailStackLeft",{attrs:{color:t.color,label:t.item.price}},[s("span",{class:"text-"+t.color},[t._v(t._s(t.item.quantity)+" x ")]),s("span",[t._v(t._s(t.item.item.name))])]),t.item.kitchen?s("ItemDetailStackLeft",{attrs:{color:t.color,label:"kitchen"}},[t._v(t._s(t.item.kitchen.name))]):t._e(),s("q-item-section",{attrs:{side:""}},[s("q-badge",{attrs:{label:t.item.progress,outline:"",color:t.color||"primary"}})],1),s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{icon:"history_toggle_off",flat:"",rounded:"",dense:"",color:t.color||"primary"},on:{click:function(e){t.timing_show=!0}}})],1)],1),t.item.narration?s("div",{staticClass:"q-px-md text-italic text-caption text-grey-9",staticStyle:{transform:"translateY(-0.8rem)"}},[t._v(t._s(t.item.narration))]):t._e(),s("div",{staticClass:"flex q-px-md justify-between q-pb-xs"},[t.item.deliver?s("ItemDetailStack",{attrs:{color:t.color,label:"Delivery"}},[t._v(t._s(t.item.deliver_human))]):t._e(),t.item.photo?s("ItemDetailStack",{attrs:{color:t.color,label:"Photo"}},[s("q-btn",{attrs:{dense:"",rounded:"",padding:"none",type:"a",flat:"",size:"xs",label:"Click to View"},on:{click:function(e){return t.photo(t.item.photo)}}})],1):t._e(),s("q-space"),s("q-btn",{attrs:{label:"Change Progress","icon-right":"forward",size:"sm",padding:"xs sm",push:"",glossy:"",dense:"",color:t.color},on:{click:function(e){t.progress_change=!0}}})],1),s("q-separator"),s("q-dialog",{attrs:{persistent:""},model:{value:t.timing_show,callback:function(e){t.timing_show=e},expression:"timing_show"}},[s("TokenTimingCard",{staticStyle:{"min-width":"65vw"},attrs:{timing:t.timings,color:t.color||"primary"}})],1),t.image_url?s("q-dialog",{attrs:{persistent:""},model:{value:t.image_show,callback:function(e){t.image_show=e},expression:"image_show"}},[s("ImageViewCard",{staticStyle:{"min-width":"65vw"},attrs:{url:t.image_url}})],1):t._e(),s("q-dialog",{attrs:{persistent:""},model:{value:t.progress_change,callback:function(e){t.progress_change=e},expression:"progress_change"}},[s("TokenItemChangeProgress",{staticStyle:{"min-width":"65vw"},attrs:{item:t.item.id,progress:t.item.progress,kitchen:t.item.kitchen?t.item.kitchen.id:null},on:{done:function(e){t.progress_change=!1}}})],1)],1)},O=[],D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center text-bold text-caption",staticStyle:{"font-size":"0.7rem","line-height":"1.3"}},[t._t("default"),s("br"),s("span",{staticClass:"text-uppercase",class:"text-"+(t.color||"primary"),staticStyle:{"font-size":"0.65rem"}},[t._v(t._s(t.label))])],2)},T=[],P={name:"ItemDetailStack",props:["label","color"]},E=P,z=Object(d["a"])(E,D,T,!1,null,null,null),L=z.exports,N=s("5843"),A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{staticStyle:{"min-width":"65vw"},attrs:{flat:""}},[s("q-bar",{staticClass:"bg-secondary text-white"},[s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[s("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Close")])],1)],1),s("q-card-section",[s("q-img",{attrs:{src:t.url}})],1)],1)},B=[],M={name:"ImageViewCard",props:["url"]},K=M,U=s("05c0"),F=s("068f"),R=Object(d["a"])(K,A,B,!1,null,null,null),Y=R.exports;S()(R,"components",{QCard:u["a"],QBar:m["a"],QSpace:p["a"],QBtn:h["a"],QTooltip:U["a"],QCardSection:x["a"],QImg:F["a"]}),S()(R,"directives",{ClosePopup:w["a"]});var H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-bar",{staticClass:"bg-secondary text-white"},[s("div",{staticStyle:{"font-size":"0.7rem"}},[t._v("Change Progress of Token Item")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",rounded:"",padding:"0",size:"sm",icon:"close"}})],1),s("q-card-section",{staticClass:"q-gutter-y-xs q-pb-xs"},[s("q-card-section",{staticClass:"row justify-between q-col-gutter-x-xs",attrs:{horizontal:""}},[s("q-btn",{staticClass:"col",attrs:{outline:"",dense:"",color:"secondary",label:t.progress,"icon-right":"forward",disable:""}}),s("q-select",{staticClass:"col",attrs:{outlined:"",dense:"",color:"secondary",options:t.progresses},model:{value:t.progress_new,callback:function(e){t.progress_new=e},expression:"progress_new"}})],1),t.needs_kitchen?s("q-card-section",{staticClass:"row justify-between q-col-gutter-x-xs",attrs:{horizontal:""}},[s("q-btn",{staticClass:"col",attrs:{outline:"",dense:"",color:"secondary",label:t.kitchen_name||"Kitchen","icon-right":"forward",disable:""}}),s("KitchenSelectDropDown",{staticClass:"col",attrs:{outlined:"",dense:"",color:"secondary",get:"id","option-label":"name"},model:{value:t.kitchen_id,callback:function(e){t.kitchen_id=e},expression:"kitchen_id"}})],1):t._e()],1),s("q-card-actions",{staticClass:"q-px-md q-pt-xs",attrs:{align:"right"}},[s("q-btn",{attrs:{label:"Update",color:"secondary",disable:!t.updates,loading:t.loading},on:{click:t.submit}})],1)],1)},V=[],X=(s("c975"),s("bf8e"));const G=["New","Accepted","Processing","Completed","Served","Cancelled","Reset"],J=["reset","accept","process","complete","served","cancel","reset"],W=[[1,5],[2,5,6],[3,5,6],[4,5,6],[5,6],[6]];var Z={name:"TokenItemChangeProgress",components:{KitchenSelectDropDown:X["a"]},props:["item","progress","kitchen"],data(){return{kitchen_id:null,progress_new:null,loading:!1}},computed:{kitchen_name(){return _.get(this.$store.state.kitchens.data,[this.kitchen,"name"])},progresses(){return _.map(W[G.indexOf(this.progress)],(t=>G[t]))},method(){return J[G.indexOf(this.progress_new)]},needs_kitchen(){return["Accepted","Reset"].includes(this.progress_new)},updates(){return this.progress_new!==this.progress||this.kitchen_id!==this.kitchen}},watch:{kitchen:{immediate:!0,handler(t){this.kitchen_id=t}},progress:{immediate:!0,handler(t){this.progress_new=t}}},methods:{submit(){if(!this.updates||this.needs_kitchen&&!this.kitchen_id)return;this.loading=!0;let t={id:this.item,kitchen:this.needs_kitchen?this.kitchen_id:this.kitchen};post("token",this.method,t).then(this.done)},done(){this.loading=!1,this.$emit("done")}}},tt=Z,et=s("ddd8"),st=s("4b7e"),at=Object(d["a"])(tt,H,V,!1,null,null,null),it=at.exports;S()(at,"components",{QCard:u["a"],QBar:m["a"],QSpace:p["a"],QBtn:h["a"],QCardSection:x["a"],QSelect:et["a"],QCardActions:st["a"]}),S()(at,"directives",{ClosePopup:w["a"]});var nt={name:"ArchiveTokenListItem",components:{TokenItemChangeProgress:it,ImageViewCard:Y,ItemDetailStackLeft:N["a"],ItemDetailStack:L,TokenTimingCard:$},props:["item","color"],data(){return{timing_show:!1,image_show:!1,progress_change:!1,image_url:""}},computed:{img_cache(){return this.$store.state.tokens.img},timings(){return this.item.progress_timing}},methods:{photo(t){if(_.has(this.img_cache,t))return this.image_show=!!(this.image_url=this.img_cache[t]);storage(t,!0).then((e=>this.photo(t,this.$store.commit("tokens/image",{name:t,url:e},{root:!0}))))}}},rt=nt,ot=s("eb85"),lt=s("24e8"),ct=Object(d["a"])(rt,j,O,!1,null,null,null),dt=ct.exports;S()(ct,"components",{QItem:g["a"],QItemSection:f["a"],QBadge:y["a"],QBtn:h["a"],QSpace:p["a"],QSeparator:ot["a"],QDialog:lt["a"]});var ut={name:"ArchiveTokenDetail",components:{ItemDetailStack:L,ArchiveTokenListItem:dt,TokenTimingCard:$},props:["token","color"],data(){return{token_timings:!1}},computed:{progress(){let t=this.token.progress;return["Pending","Partial"].includes(t)?{Pending:"Payment Pending",Partial:"Paid Partially"}[t]:t},customer(){return this.token.customer},items(){return this.token.items||[]},timing(){return this.token.progress_timing||[]}}},mt=ut,pt=Object(d["a"])(mt,a,i,!1,null,null,null);e["a"]=pt.exports,S()(pt,"components",{QCard:u["a"],QCardSection:x["a"],QBtn:h["a"],QBadge:y["a"],QList:b["a"],QCardActions:st["a"],QSpace:p["a"],QDialog:lt["a"]}),S()(pt,"directives",{ClosePopup:w["a"]})},2071:function(t,e,s){"use strict";e["a"]={props:["value","get","name"],computed:{options(){return{}},optValue(){return void 0===this.get?this.value:_.find(this.options,[this.get,this.value])}},methods:{clear(){this.$emit("input",null)},doEmit(t){this.$emit("input",this.get?_.get(t,this.get,null):t)},getName(t){return this.name?this.name(t):t.name}}}},2943:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",t._b({attrs:{options:t.options,value:t.optValue,label:"Select Tax Nature"},on:{input:t.doEmit}},"q-select",t.$attrs,!1))},i=[],n=(s("5db7"),s("73d9"),s("2071")),r={name:"TaxNatureSelectDropDown",mixins:[n["a"]],computed:{options(){return _.uniq(_.flatMap(this.$store.state.tax.data,(({contents:t})=>_.map(t,"nature"))))}}},o=r,l=s("2877"),c=s("ddd8"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,a,i,!1,null,null,null);e["a"]=m.exports,u()(m,"components",{QSelect:c["a"]})},"2b38":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-virtual-scroll",{attrs:{items:t.dGroups,"virtual-scroll-horizontal":""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.item;return e.index,[s("div",{key:t.hKey(a),staticClass:"q-pa-xs cursor-pointer",on:{click:function(e){return t.$emit("input",a)}}},[s("Jumbotron",t._b({attrs:{text:a.name}},"Jumbotron",t.bindColorFont(a),!1))],1)]}}])})},i=[],n=s("b1c1"),r=s("ec70"),o=s("2f62"),l={name:"MenuGroupScroll",components:{Jumbotron:r["a"]},props:["value","groups"],computed:Object(o["d"])({dGroups({groups:{data:t},items:e}){return this.groups||_.concat([{id:0,name:"All",items:_.map(e.data,(({id:t})=>_.toInteger(t)))}],_.filter(t,["status","Active"]))}}),methods:{hKey({id:t}){return Object(n["d"])("menu","group","select",t)},bindColorFont(t){let e={color:null,font:null},s=this.value,a={color:"secondary",font:"white"};return!s&&0===t.id||s&&s.id===t.id?a:e}},created(){this.$emit("input",this.dGroups[0])}},c=l,d=s("2877"),u=s("a12b"),m=s("eebe"),p=s.n(m),h=Object(d["a"])(c,a,i,!1,null,null,null);e["a"]=h.exports,p()(h,"components",{QVirtualScroll:u["a"]})},3610:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",t._b({attrs:{options:t.modes},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}},"q-select",t.$attrs,!1))},i=[],n=(s("5319"),s("232e")),r={name:"KitchenTokenDisplayMode",props:["value"],computed:{append(){return this.$q.screen.width<500?"":" Mode"},modes(){return n["KitchenTokensDisplayMode"].map((t=>t+this.append))},mode:{get(){return this.value?this.value+this.append:_.first(this.modes)},set(t){this.$emit("input",t.replace(this.append,""))}}},mounted(){this.value||(this.mode=_.first(this.modes))}},o=r,l=s("2877"),c=s("ddd8"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,a,i,!1,null,null,null);e["a"]=m.exports,u()(m,"components",{QSelect:c["a"]})},3758:function(t,e,s){"use strict";var a=s("2f62");e["a"]={computed:Object(a["d"])({tokens({tokens:{data:t,items:e},seating:s,prices:{list:a},users:i,customers:n}){return _(t).map((t=>Object.assign({},t,{items:_.map(_.get(e,t.id),(e=>this.tokenItemMap(e,parseInt(t.price_list)))),seating:_.get(s["data"],t.seating),price_list:_.get(a,t.price_list),waiter:_.get(i["data"],t.user),customer:_.get(n["data"],t.customer),progress:this.tokenProgress(t)}))).value()},tokens_remote(){return _.filter(this.tokens,(({type:t,id:e})=>"Remote"===t&&!this.$store.getters["remote/is"]("tokens",parseInt(e))))},tokens_own(){return _.filter(this.tokens,(({type:t,id:e})=>"Remote"!==t||!this.$store.getters["remote/is"]("tokens",parseInt(e))))}}),methods:{tokenItemMap(t,e){return Object.assign({},t,{item:_.get(this.$store.state.items,["data",t.item]),user:_.get(this.$store.state.users,["data",t.user]),kitchen:_.get(this.$store.state.kitchens,["data",t.kitchen]),price:_.get(this.$store.getters["prices/items"],[e,parseInt(t.item)])})},tokenProgress({id:t,progress:e}){if("Billed"!==e)return e;let s=_.find(this.$store.state.bills.data,(({token:e,progress:s})=>"Cancelled"!==s&&e===t));return s?s.progress:e}}}},"3b1b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"q-py-xs text-center text-white",class:t.cColor},["Dining"===t.token.type&&t.token.user?s("span",[t._v(t._s(t.token.user.name))]):t._e()]),s("CardImageTitle",{attrs:{image:t.src,title:t.token.seating?t.token.seating.name:t.token.customer?t.token.customer.name:t.token.type,caption:t.token.customer?t.token.customer.phone:null,info:"Home Delivery"===t.token.type},on:{info:function(e){t.info=!t.info}}}),s("q-card-actions",[s("q-badge",{staticClass:"q-py-sm q-px-sm",attrs:{label:t.token.id}}),s("q-badge",{staticClass:"q-py-sm q-ml-xs",attrs:{label:t.token.type}}),s("q-badge",{staticClass:"q-py-sm q-ml-xs",attrs:{label:t.token.progress}}),s("q-space"),"Billed"!==t.token.progress?s("q-btn",{attrs:{icon:"add_box",color:"primary",flat:"",padding:"0"},on:{click:function(e){t.add_mode=!0}}}):t._e()],1),s("OrderSummaryWaiterOrderItemsList",{attrs:{order:t.id,noserve:t.noserve}}),"Billed"!==t.token.progress?s("q-dialog",{attrs:{persistent:""},model:{value:t.add_mode,callback:function(e){t.add_mode=e},expression:"add_mode"}},[s("OrderSummaryItemAdd",{staticStyle:{width:"700px","max-width":"90vw"},attrs:{token:t.id},on:{close:function(e){t.add_mode=!1}}})],1):t._e(),"Home Delivery"===t.token.type?s("q-dialog",{attrs:{persistent:""},model:{value:t.info,callback:function(e){t.info=e},expression:"info"}},[s("CustomerDetailCard",{staticStyle:{"max-width":"360px",width:"90vw"},attrs:{id:t.token.customer.id,color:"purple"}})],1):t._e()],1)},i=[],n=(s("5319"),s("ded3")),r=s.n(n),o=s("a861"),l=s("e97b"),c=s("43fa"),d=s("2f62"),u=s("f567"),m=s("232e"),p=s("b1c1"),h=s("cae8"),b={components:{CustomerDetailCard:h["a"],CardImageTitle:c["a"],OrderSummaryItemAdd:l["a"],OrderSummaryWaiterOrderItemsList:o["a"]},data(){return{add_mode:!1,info:!1}},props:["id","noserve"],name:"OrderSummaryReceptionistOrder",computed:r()(r()({},Object(d["d"])({token:function({tokens:{data:t},seating:e,users:s,customers:a}){let i=t[_.toInteger(this.id)];return Object.assign({},i,{seating:e.data[_.toInteger(i.seating)]},{user:s.data[_.toInteger(i.user)]},{customer:a.data[_.toInteger(i.customer)]})}})),{},{image(){let t=this.token.type;return"Dining"===t?this.token.seating.image:"Home Delivery"===t&&this.token.customer?this.token.customer.image:u["a"][_.toLower(t).replace(/\s*/g,"")]},src(){return Object(p["g"])(this.image)},cColor(){return"bg-"+m["DiningTypeColor"][this.token.type]}})},g=b,f=s("2877"),v=s("f09f"),q=s("a370"),y=s("4b7e"),x=s("58a8"),k=s("2c91"),C=s("9c40"),w=s("24e8"),Q=s("eebe"),S=s.n(Q),I=Object(f["a"])(g,a,i,!1,null,null,null);e["a"]=I.exports,S()(I,"components",{QCard:v["a"],QCardSection:q["a"],QCardActions:y["a"],QBadge:x["a"],QSpace:k["a"],QBtn:C["a"],QDialog:w["a"]})},"43fa":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-img",{attrs:{basic:"",src:t.image}},[t.title?s("div",{staticClass:"absolute-bottom"},[s("div",{staticClass:"text-subtitle2 text-center",domProps:{textContent:t._s(t.title)}}),t.caption?s("div",{staticClass:"text-caption text-center",staticStyle:{"line-height":"0.65"},domProps:{textContent:t._s(t.caption)}}):t._e()]):t._e(),void 0!==t.info?s("span",{staticClass:"absolute-top-right bg-transparent q-pr-xs q-pt-xs"},[s("q-btn",{staticStyle:{transform:"rotate(180deg)"},attrs:{icon:"error_outline",flat:"",round:"",padding:"0",size:"md",color:"white",dense:""},on:{click:function(e){return e.stopPropagation(),t.$emit("info",!0)}}})],1):t._e()])},i=[],n={name:"CardImageTitle",props:["image","title","info","caption"]},r=n,o=s("2877"),l=s("068f"),c=s("9c40"),d=s("eebe"),u=s.n(d),m=Object(o["a"])(r,a,i,!1,null,null,null);e["a"]=m.exports,u()(m,"components",{QImg:l["a"],QBtn:c["a"]})},"440b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-list",{attrs:{bordered:"",separator:""}},[t._l(t.items,(function(e,a){return s("q-item",{key:t.hKey(e)},[s("q-item-section",{attrs:{avatar:""}},[t._v(t._s(a+1))]),s("q-item-section",[s("q-item-label",{staticClass:"row justify-between items-center"},[s("div",{staticClass:"text-weight-bold text-grey-9"},[t._v(t._s(e.quantity)+" x "+t._s(t.item(e.item).name))])]),e.delay?s("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v("Delay: "+t._s(e.delay)+" minutes")]):t._e(),e.narration?s("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(e.narration))]):t._e()],1),s("q-item-section",{attrs:{side:""}},[s("div",{staticClass:"text-bold",domProps:{textContent:t._s(t.iTotal(e))}})]),s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{icon:"delete",dense:"",color:"negative",flat:""},on:{click:function(s){return t.$emit("delete",e)}}}),s("q-btn",{attrs:{icon:"edit",dense:"",color:"warning",flat:""},on:{click:function(s){return t.edit(e)}}})],1)],1)})),s("q-item",[s("q-item-section",[s("q-item-label",{staticClass:"content-end"},[s("div",{staticClass:"text-weight-bold text-h6 text-grey-9"},[t._v("Total")])])],1),s("q-item-section",{attrs:{side:""}},[s("div",{staticClass:"text-h6",domProps:{textContent:t._s(t.precision(t.total,2))}})])],1),s("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.update_mode,callback:function(e){t.update_mode=e},expression:"update_mode"}},[t.update_obj?s("OrderItemUpdateForm",t._b({staticStyle:{width:"700px","max-width":"90vw"},on:{close:t.close,update:t.update}},"OrderItemUpdateForm",t.update_obj,!1)):t._e()],1)],2)},i=[],n=s("b1c1"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"row items-center q-pb-none"},[s("div",{staticClass:"text-h6"},[t._v("Update Order Item")]),s("q-space"),s("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){return t.$emit("close",null)}}})],1),s("q-card-section",{staticClass:"q-gutter-xs q-pb-none"},[s("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Quantity"},model:{value:t.quantity,callback:function(e){t.quantity=t._n(e)},expression:"quantity"}}),s("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Delay in Minutes"},model:{value:t.delay,callback:function(e){t.delay=t._n(e)},expression:"delay"}}),s("q-input",{attrs:{dense:"",type:"textarea",outlined:"",label:"Narration if any"},model:{value:t.narration,callback:function(e){t.narration=e},expression:"narration"}})],1),s("q-card-actions",{staticClass:"q-px-md q-pt-xs",attrs:{align:"right"}},[s("q-btn",{attrs:{color:"primary",label:"Update",type:"submit"},on:{click:function(e){return e.preventDefault(),t.update(e)}}})],1)],1)},o=[],l={name:"OrderItemUpdateForm",props:["item"],data(){return{quantity:1,delay:0,narration:null}},created(){_.forEach(["quantity","delay","narration"],(t=>this[t]=_.toNumber(this.$attrs[t])==this.$attrs[t]?_.toNumber(this.$attrs[t]):this.$attrs[t]))},methods:{update(){this.$emit("update",{item:_.toSafeInteger(this.item),quantity:_.toNumber(this.quantity),delay:_.toNumber(this.delay),narration:this.narration||null})}}},c=l,d=s("2877"),u=s("f09f"),m=s("a370"),p=s("2c91"),h=s("9c40"),b=s("27f9"),g=s("4b7e"),f=s("eebe"),v=s.n(f),q=Object(d["a"])(c,r,o,!1,null,null,null),y=q.exports;v()(q,"components",{QCard:u["a"],QCardSection:m["a"],QSpace:p["a"],QBtn:h["a"],QInput:b["a"],QCardActions:g["a"]});var x={name:"OrderItemsSummary",components:{OrderItemUpdateForm:y},data(){return{update_mode:!1,update_obj:null}},props:["items","price_list"],computed:{price(){return _(this.$store.state.prices.data).filter(["price_list",_.toSafeInteger(this.price_list)]).mapKeys("item").mapValues("price").value()},total(){return _.sumBy(this.items,(({item:t,quantity:e})=>(_.toNumber(e)||0)*(_.toNumber(_.get(this.price,t))||0)))}},methods:{hKey({item:t}){return Object(n["d"])("order","summary","item",t)},item(t){return _.get(this.$store.state.items.data,_.toSafeInteger(t))},quantity(t,e){this.$emit("quantity",{item:t,quantity:_.toNumber(e.target.value)})},iTotal({item:t,quantity:e}){return Object(n["u"])(e*this.price[t],2)},precision(t){return Object(n["u"])(t,2)},edit(t){this.update_obj=t,this.update_mode=!0},update(t){this.$emit("update",t),this.close()},close(){this.update_mode=!1,this.update_obj=null}}},k=x,C=s("1c1c"),w=s("66e5"),Q=s("4074"),S=s("0170"),I=s("24e8"),$=Object(d["a"])(k,a,i,!1,null,null,null);e["a"]=$.exports,v()($,"components",{QList:C["a"],QItem:w["a"],QItemSection:Q["a"],QItemLabel:S["a"],QInput:b["a"],QBtn:h["a"],QDialog:I["a"]})},5843:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return void 0===t.div?s("q-item-section",[s("q-item-label",{staticClass:"text-uppercase",class:"text-"+t.color,staticStyle:{"font-size":"0.65rem","line-height":"0rem !important"},attrs:{caption:""}},[t._v(t._s(t.label))]),s("q-item-label",{staticClass:"text-bold",staticStyle:{"font-size":"0.75rem"},attrs:{caption:""}},[t._t("default")],2)],1):s("div",[s("div",{staticClass:"text-uppercase",class:"text-"+t.color,staticStyle:{"font-size":"0.65rem","line-height":"0rem !important"},attrs:{caption:""}},[t._v(t._s(t.label))]),s("div",{staticClass:"text-bold",staticStyle:{"font-size":"0.75rem"},attrs:{caption:""}},[t._t("default")],2)])},i=[],n={name:"ItemDetailStackLeft",props:["div","label","color"]},r=n,o=s("2877"),l=s("4074"),c=s("0170"),d=s("eebe"),u=s.n(d),m=Object(o["a"])(r,a,i,!1,null,null,null);e["a"]=m.exports,u()(m,"components",{QItemSection:l["a"],QItemLabel:c["a"]})},"58d1":function(t,e,s){"use strict";var a=s("2f62"),i=s("3758"),n=s("8808");e["a"]={mixins:[i["a"]],computed:Object(a["d"])({bills({bills:{data:t},customers:e,users:s,payments:a}){return _(t).map((t=>Object.assign({},t,{payable:Object(n["a"])(t)},{token:_.find(this.tokens,["id",t.token])},{customer:_.get(e["data"],t.customer)},{user:_.get(s["data"],t.user)},{payments:_(a["data"]).filter((e=>e.bill===t.id&&"Active"===e.status)).value()},{paid:_.sumBy(_.filter(a["data"],{bill:t.id,status:"Active"}),(({amount:t})=>_.toNumber(t)))}))).value()}})}},"5ab9":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return void 0!==t.lazy?s("q-input",{attrs:{label:t.label||t.dLabel,outlined:"",dense:"",clearable:"",debounce:"500"},on:{input:function(e){return t.$emit("text",t.filter)}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}):void 0!==t.blur?s("q-input",{attrs:{label:t.label||t.dLabel,outlined:"",dense:"",clearable:""},on:{blur:function(e){return t.$emit("text",t.filter)}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}):s("q-input",{attrs:{label:t.label||t.dLabel,outlined:"",dense:"",clearable:""},on:{input:function(e){return t.$emit("text",t.filter)}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})},i=[],n={name:"FilterInputText",props:["label","lazy","blur"],data(){return{filter:"",dLabel:"Filter"}}},r=n,o=s("2877"),l=s("27f9"),c=s("eebe"),d=s.n(c),u=Object(o["a"])(r,a,i,!1,null,null,null);e["a"]=u.exports,d()(u,"components",{QInput:l["a"]})},"5cc1":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",t._b({attrs:{options:t.options,value:t.optValue},on:{input:t.doEmit}},"q-select",t.$attrs,!1))},i=[],n=s("2071"),r={name:"ItemSelectDropDown",mixins:[n["a"]],computed:{options(){return _.map(this.$store.state.items.data)}}},o=r,l=s("2877"),c=s("ddd8"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,a,i,!1,null,null,null);e["a"]=m.exports,u()(m,"components",{QSelect:c["a"]})},"5dee":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-input",t._b({scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm:ss"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Ok",color:"primary",flat:""},on:{click:function(e){return t.$emit("input",t.date)}}})],1)])],1)],1),s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm:ss",format24h:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Ok",color:"primary",flat:""},on:{click:function(e){return t.$emit("input",t.date)}}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"q-input",t.$attrs,!1))},i=[],n=s("b1c1"),r={name:"DateTime",props:["value"],data(){return{date:null}},created(){this.date=this.value||Object(n["x"])("YYYY-MM-DD HH:mm:ss",new Date)},watch:{date:{immediate:!0,handler(t){this.$emit("input",t)}}}},o=r,l=s("2877"),c=s("27f9"),d=s("0016"),u=s("7cbe"),m=s("52ee"),p=s("9c40"),h=s("ca78"),_=s("7f67"),b=s("eebe"),g=s.n(b),f=Object(l["a"])(o,a,i,!1,null,null,null);e["a"]=f.exports,g()(f,"components",{QInput:c["a"],QIcon:d["a"],QPopupProxy:u["a"],QDate:m["a"],QBtn:p["a"],QTime:h["a"]}),g()(f,"directives",{ClosePopup:_["a"]})},"75b8":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"row items-center q-pb-none"},[s("div",{staticClass:"text-h6"},[t._v("New Customer")]),s("q-space"),s("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){return t.$emit("close",null)}}})],1),s("q-card-section",{staticClass:"q-gutter-xs"},[s("q-input",{attrs:{dense:"",outlined:"",label:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("q-input",{attrs:{dense:"",outlined:"",label:"Phone"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),s("q-input",{attrs:{dense:"",type:"email",outlined:"",label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("q-input",{attrs:{dense:"",type:"textarea",outlined:"",label:"Address"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{staticClass:"text-grey",attrs:{color:"primary",label:"Reset",type:"reset",flat:""},on:{click:function(e){return e.preventDefault(),t.reset(e)}}}),s("q-btn",{attrs:{color:"primary",label:"Submit",type:"submit"},on:{click:function(e){return e.preventDefault(),t.submit(e)}}})],1)],1)},i=[],n={name:"CustomerCreate",props:["param","param_value"],data(){return{name:"",phone:"",email:"",address:""}},methods:{reset(){this.name=this.phone=this.email=this.address=""},submit(){if(!this.name&&!this.phone)return;let t=_.zipObject(["name","phone","email","address"],[this.name,this.phone,this.email,this.address]);post("customer","create",t).then((t=>{this.$emit("customer",t),this.reset()}))}},created(){this[this.param]=this.param_value}},r=n,o=s("2877"),l=s("f09f"),c=s("a370"),d=s("2c91"),u=s("9c40"),m=s("27f9"),p=s("4b7e"),h=s("eebe"),b=s.n(h),g=Object(o["a"])(r,a,i,!1,null,null,null);e["a"]=g.exports,b()(g,"components",{QCard:l["a"],QCardSection:c["a"],QSpace:d["a"],QBtn:u["a"],QInput:m["a"],QCardActions:p["a"]})},"7a7c":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.item?s("q-card",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.$emit("selected",t.item)}}},[s("q-card-section",{staticClass:"q-py-xs bg-teal"}),s("CardImageTitle",{attrs:{title:t.item.name,image:t.image,info:"true"},on:{info:function(e){t.info=!t.info}}}),t.info?s("q-card-section",{staticClass:"q-pa-none q-ma-none"},[s("q-card-actions",{staticClass:"q-pb-none",attrs:{align:"right"}},[s("q-badge",{staticClass:"q-py-sm q-px-md text-weight-bolder",attrs:{color:"positive",label:t.price}})],1),t.kitchen_items.length?s("q-list",{staticStyle:{"font-size":"0.75rem"}},t._l(t.kitchen_items,(function(e){return s("q-item",{key:t.hKey(e)},[s("q-item-section",[s("q-item-label",[s("q-spinner-radio",{directives:[{name:"show",rawName:"v-show",value:t.live.includes(e.kitchen),expression:"live.includes(i_kitchen.kitchen)"}],staticClass:"q-ml-md absolute-top",attrs:{color:"positive",size:"0.6rem"}}),t._v(t._s(t.kName(e)))],1),s("q-item-label",{staticStyle:{"font-size":"0.6rem"},attrs:{caption:""}},[t._v("Duration: "+t._s(Math.ceil(e.duration/60))+" Min")]),t.pending(e)?s("q-item-label",{staticStyle:{"font-size":"0.6rem"},attrs:{caption:""}},[t._v("Pending: "+t._s(t.pending(e)))]):t._e()],1),s("q-item-section",{staticClass:"text-bold text-black",staticStyle:{"font-size":"0.9rem"},attrs:{side:""}},[t._v(t._s(e.stock))]),"Yes"===e.auto_process?s("q-item-section",{attrs:{side:""}},[s("q-icon",{attrs:{name:"done_all",color:"positive"}})],1):t._e()],1)})),1):s("q-card-section",{staticClass:"text-caption text-center text-warning q-pa-none q-pt-xs",staticStyle:{"font-size":"0.65rem"}},[t._v("Not available in any active kitchens!!")]),s("q-card-section",{staticClass:"q-pt-xs"},[s("div",{staticClass:"text-caption",staticStyle:{"font-size":"0.65rem","line-height":"0.8rem"}},[s("q-separator",{staticClass:"q-my-xs"}),t._v(" "+t._s(t.item.detail))],1)])],1):t._e()],1):t._e()},i=[],n=(s("5db7"),s("73d9"),s("ded3")),r=s.n(n),o=s("43fa"),l=s("2f62"),c=s("b1c1"),d={name:"ItemSelectCard",components:{CardImageTitle:o["a"]},props:["id","price_list","remote"],data(){return{info:!1,processing_status:["Accepted","Processing"]}},computed:r()(r()(r()({},Object(l["d"])({items:t=>t.items.data,prices:t=>t.prices.data,s_kitchens:function(t){return _(t.kitchens.data).filter((({cloud:t})=>t===(this.remote?"Yes":"No"))).keyBy((({id:t})=>_.toInteger(t))).value()},k_items:t=>t.kitchens.items,t_items:t=>_(t.tokens.items).flatMap().value()})),Object(l["b"])("kitchens",["live"])),{},{s_kitchen_ids(){return _.map(this.s_kitchens,(({id:t})=>_.toInteger(t)))},intID(){return _.toInteger(this.id)},intPL(){return _.toInteger(this.price_list)},item(){return _.get(this.items,this.intID)},image(){return Object(c["g"])(this.item.image)},price(){return this.price_list?_.toNumber(_.get(_.find(this.prices,this.matchItemPriceList),"price",0)):0},kitchen_items(){return _(this.k_items).flatMap().filter(["item",this.intID]).filter((({kitchen:t})=>_.includes(this.s_kitchen_ids,_.toInteger(t)))).value()},processing(){return _(this.t_items).filter((({item:t,progress:e})=>t===this.intID&&this.processing_status.includes(e))).value()}}),methods:{hKey({id:t,kitchen:e}){return Object(c["d"])("isc",this.id,"kitchen",e,"stock",t)},matchItemPriceList({item:t,price_list:e}){return _.toInteger(t)===this.intID&&_.toInteger(e)===this.intPL},kName({kitchen:t}){return _.truncate(_.get(this.s_kitchens,[_.toInteger(t),"name"]),{length:15,omission:".."})},pending(t){return _.sumBy(this.processing,(({quantity:e,kitchen:s})=>_.toInteger(s)===t.kitchen?_.toNumber(e):0))}}},u=d,m=s("2877"),p=s("f09f"),h=s("a370"),b=s("4b7e"),g=s("58a8"),f=s("1c1c"),v=s("66e5"),q=s("4074"),y=s("0170"),x=s("9569"),k=s("0016"),C=s("eb85"),w=s("eebe"),Q=s.n(w),S=Object(m["a"])(u,a,i,!1,null,null,null);e["a"]=S.exports,Q()(S,"components",{QCard:p["a"],QCardSection:h["a"],QCardActions:b["a"],QBadge:g["a"],QList:f["a"],QItem:v["a"],QItemSection:q["a"],QItemLabel:y["a"],QSpinnerRadio:x["a"],QIcon:k["a"],QSeparator:C["a"]})},"7fe1":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",t._b({attrs:{options:t.options,value:t.optValue},on:{input:t.doEmit,clear:t.clear}},"q-select",t.$attrs,!1))},i=[],n=s("2071"),r={name:"UserSelectDropDown",props:["role"],mixins:[n["a"]],computed:{options(){return _(this.$store.state.users.data).filter((({role:t})=>!this.role||(_.isArray(this.role)?this.role.includes(t):t===this.role))).map((t=>Object.assign({},t,{label:this.getName(t),value:t.id}))).value()}}},o=r,l=s("2877"),c=s("ddd8"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,a,i,!1,null,null,null);e["a"]=m.exports,u()(m,"components",{QSelect:c["a"]})},"84ba":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{staticClass:"no-shadow"},[s("q-card-section",{class:t.section_class},[s("div",{staticClass:"text-h4",staticStyle:{"font-weight":"bolder"}},[t._v(t._s(t.value)),t.icon?s("q-icon",{staticClass:"q-mr-md q-mt-md absolute-right",attrs:{color:t.icon_color,name:t.icon,size:"3.8rem"}}):t._e()],1),s("div",{staticClass:"text-subtitle2 text-uppercase",staticStyle:{"font-size":"0.75rem"}},[t._v(t._s(t.title||t.defaults.title))])]),t.to?s("q-card-actions",{class:t.action_class,attrs:{align:"center"}},[s("q-btn",{attrs:{size:"sm",flat:"",type:"a",to:t.to}},[t._v("View Detail "),s("q-icon",{staticClass:"q-ml-sm",attrs:{name:"double_arrow",size:"0.8rem"}})],1)],1):t._e()],1)},i=[],n={name:"DigitMetric",props:["bg","value","text","title","icon","to"],data(){return{defaults:{bg:"white",text:"black",title:"Title"}}},computed:{section_class(){return[].concat("bg-"+this.bg||!1).concat("text-"+this.text||!1)},action_class(){return[].concat("bg-"+(this.bg||this.defaults.bg)+"-9").concat("text-"+(this.text||this.defaults.text)).concat("q-pa-none")},icon_color(){return(this.bg||this.defaults.bg)+"-9"}}},r=n,o=s("2877"),l=s("f09f"),c=s("a370"),d=s("0016"),u=s("4b7e"),m=s("9c40"),p=s("eebe"),h=s.n(p),_=Object(o["a"])(r,a,i,!1,null,null,null);e["a"]=_.exports,h()(_,"components",{QCard:l["a"],QCardSection:c["a"],QIcon:d["a"],QCardActions:u["a"],QBtn:m["a"]})},"85b2":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.seating?s("div",{staticClass:"row content-around"},[s("div",{staticClass:"col text-weight-bold"},[t._v("Seat"),s("div",{staticClass:"text-caption"},[t._v(t._s(t.seat.name))])]),s("div",{staticClass:"col text-weight-bold"},[t._v("Price List"),s("div",{staticClass:"text-caption"},[t._v(t._s(t.price.name))])])]):t._e()},i=[],n={name:"OrderSeatingInfo",props:["seating"],computed:{seat(){return _.get(this.$store.state.seating.data,_.toSafeInteger(this.seating))},price(){return _.get(this.$store.state.prices.list,_.toSafeInteger(this.seat.price_list))}}},r=n,o=s("2877"),l=Object(o["a"])(r,a,i,!1,null,null,null);e["a"]=l.exports},"8f5b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{staticStyle:{"font-size":"0.8rem"},attrs:{flat:"",bordered:"",square:""}},[s("q-card-section",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"title"}],staticClass:"bg-blue-grey-10 text-white text-bold q-py-sm"},[t._v(t._s(t.title))]),s("ReportHead",{directives:[{name:"show",rawName:"v-show",value:t.head,expression:"head"}],attrs:{data:t.head}}),s("ReportTable",t._b({attrs:{data:t.table}},"ReportTable",t.$attrs,!1)),s("ReportFoot",{attrs:{data:t.foot}}),s("q-card-section",{staticClass:"q-pa-none q-pb-none"},[s("div",{staticClass:"col-12 q-px-xl q-py-xs text-center bg-grey-1",staticStyle:{"font-size":"0.50rem"}},[t._v(t._s(t.footer))])])],1)},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-table",{staticClass:"no-shadow",attrs:{data:t.records,columns:t.columns,dense:"",bordered:"","table-header-class":"bg-blue-grey-10 text-white",square:"",pagination:{rowsPerPage:0},"hide-pagination":""},scopedSlots:t._u([t._l(t.html_slots,(function(e){return{key:e,fn:function(e){return[s("q-td",{attrs:{props:e},domProps:{innerHTML:t._s(e.value)}})]}}}))],null,!0)})},r=[],o={name:"ReportTable",props:["data","right","center","index","html"],computed:{records(){return void 0===this.index?this.data:_.map(this.data,((t,e)=>Object.assign({},{"#":e+1},t)))},columns(){return _.map(_.first(this.records),((t,e)=>_.zipObject(["name","field","sortable","label","align"],[e,e,!1,e,_.includes(this.right,e)?"right":_.includes(this.center,e)?"center":"left"])))},html_slots(){return this.html?_.map(this.html,this.dynamicSlotName):[]}},methods:{dynamicSlotName(t){return"body-cell-"+t}}},l=o,c=s("2877"),d=s("eaac"),u=s("db86"),m=s("eebe"),p=s.n(m),h=Object(c["a"])(l,n,r,!1,null,null,null),b=h.exports;p()(h,"components",{QTable:d["a"],QTd:u["a"]});var g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-list",{attrs:{dense:"",separator:""}},t._l(t.data,(function(e,a){return s("q-item",{key:t.hKey(a),attrs:{dense:""}},[s("q-item-section",[s("q-item-label",{staticClass:"text-bold"},[t._v(t._s(a))])],1),s("q-item-section",{attrs:{side:""}},[t._v(t._s(e))])],1)})),1)},f=[],v=(s("5319"),{name:"ReportHead",props:["data"],methods:{hKey(t){return _.toLower(t).replace(/\s/g,"")}}}),q=v,y=s("1c1c"),x=s("66e5"),k=s("4074"),C=s("0170"),w=Object(c["a"])(q,g,f,!1,null,null,null),Q=w.exports;p()(w,"components",{QList:y["a"],QItem:x["a"],QItemSection:k["a"],QItemLabel:C["a"]});var S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card-section",{staticClass:"q-pa-none q-pb-none"},[s("div",{staticClass:"row"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.data,expression:"data"}],staticClass:"col-xs-12 col-sm-6 offset-xs-0 offset-sm-6",staticStyle:{"border-left":"1px solid #DDDDDD"}},[s("q-list",{staticStyle:{"font-size":"0.75rem"},attrs:{dense:"",separator:""}},t._l(t.data,(function(e,a){return s("q-item",{key:t.hKey(a),attrs:{dense:""}},[s("q-item-section",[s("q-item-label",{staticClass:"text-bold"},[t._v(t._s(a))])],1),s("q-item-section",{staticClass:"text-bold text-black",attrs:{side:""}},[t._v(t._s(e))])],1)})),1)],1)])])},I=[],$={name:"ReportFoot",props:["data"],methods:{hKey(t){return _.toLower(t).replace(/\s/g,"")}}},j=$,O=s("a370"),D=Object(c["a"])(j,S,I,!1,null,null,null),T=D.exports;p()(D,"components",{QCardSection:O["a"],QList:y["a"],QItem:x["a"],QItemSection:k["a"],QItemLabel:C["a"]});var P=s("b1c1"),E={name:"ReportCard",components:{ReportFoot:T,ReportTable:b,ReportHead:Q},props:["head","foot","table","title"],data(){return{time:null}},computed:{footer(){return`Report generated by ${_USER.name} on ${this.time} using Smart Kitchen.`}},watch:{table:{immediate:!0,deep:!0,handler(){this.time=Object(P["x"])("ddd Do MMM YYYY @ hh:mm:ss A")}}}},z=E,L=s("f09f"),N=Object(c["a"])(z,a,i,!1,null,null,null);e["a"]=N.exports,p()(N,"components",{QCard:L["a"],QCardSection:O["a"]})},9061:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",t._b({attrs:{options:t.options,value:t.optValue},on:{input:t.doEmit}},"q-select",t.$attrs,!1))},i=[],n=s("2071"),r={name:"PriceListSelectDropDown",mixins:[n["a"]],computed:{options(){return _(this.$store.state.prices.list).filter(["status","Active"]).map((t=>Object.assign({},t,{label:this.getName(t),value:t.id}))).value()}}},o=r,l=s("2877"),c=s("ddd8"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,a,i,!1,null,null,null);e["a"]=m.exports,u()(m,"components",{QSelect:c["a"]})},9527:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"power_settings_new"},on:{click:t.logout}})},i=[],n=(s("ddb0"),s("ded3")),r=s.n(n),o=s("2f62"),l=s("260b"),c=s("4bbf"),d={name:"Logout",data(){return{me:parseInt(_USER.id)}},computed:r()(r()({},Object(o["d"])("remote",["monitoring","data"])),Object(o["b"])("kitchens",["assign","kitchen_full_timer"])),methods:{logout(){if(_.forEach(this.monitoring,(function(t){t&&t[0]&&t[0](),t&&t[1]&&t[1]()})),"Chef"===_USER.role){let t=this,e=_(this.assign[this.me]).mapKeys().mapKeys((t=>_.get(_.find(this.data,(({item:e,location:s,local_id:a})=>s===_BRANCH&&"kitchens"===e&&a===t)),"reference",null))).value(),s=_(e).keys().filter((t=>t&&"null"!==t)).value(),a=this.kitchen_full_timer;if(!s.length)return t.nav();Object(c["b"])("kitchens").then((function(i){i.where("__name__","in",s).get().then((function(s){if(s.empty)return t.nav();let i=s.size;s.forEach((function(s){let n=s.get("users"),r=s.id;if(_.has(e,r)&&_.has(a,e[r])&&a[e[r]]===t.me)return!!--i||t.nav();s.ref.update({users:l["a"].firestore.FieldValue.arrayRemove(t.me),online:n.length>1}).then((()=>--i?null:t.nav()))}))}))})).catch(this.nav)}else this.nav()},nav(){location.href=LOGOUT}}},u=d,m=s("2877"),p=s("9c40"),h=s("eebe"),b=s.n(h),g=Object(m["a"])(u,a,i,!1,null,null,null);e["a"]=g.exports,b()(g,"components",{QBtn:p["a"]})},9708:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-select",{attrs:{outlined:"",dense:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:t.options,label:"Select Customer",clearable:""},on:{filter:t.filter,"new-value":t.createCustomer},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}}),s("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.create_mode,callback:function(e){t.create_mode=e},expression:"create_mode"}},[s("CustomerCreate",{style:t.popup_width(400),attrs:{param:t.param,param_value:t.param_value},on:{close:t.closeCreate,customer:t.closeCreate}})],1)],1)},i=[],n=(s("c975"),s("ddb0"),s("ded3")),r=s.n(n),o=s("75b8"),l=s("b1c1"),c=s("2f62"),d={name:"OrderCustomer",components:{CustomerCreate:o["a"]},props:["value","get"],data(){return{create_mode:!1,param:"name",param_value:"",options:[]}},computed:r()(r()({},Object(c["d"])("customers",{customers:"data"})),{},{customer_options(){return Object(l["r"])(this.customers)},customer:{get(){return void 0===this.value?null:void 0===this.get?this.value:_.find(this.customer_options,[this.get,this.value])},set(t){this.$emit("input",void 0===this.get?t:_.get(t,this.get,null))}}}),methods:{popup_width:l["t"],filter(t,e){e((()=>{const e=(t||"").toLowerCase();this.options=e?Object(l["r"])(this.customers).filter((t=>_.values(t).join(" ").toLowerCase().indexOf(e)>-1)):Object(l["r"])(this.customers)}))},createCustomer(t){this.param=_.toNumber(t)==t?"phone":"name",this.param_value=t,this.customer=null,this.create_mode=!0},closeCreate(t){this.create_mode=!1,this.customer=t?Object(l["q"])(t):null}},created(){this.options=this.customer_options},watch:{customer(t){t&&0===t.id&&(this.create_mode=!0)}}},u=d,m=s("2877"),p=s("ddd8"),h=s("24e8"),b=s("eebe"),g=s.n(b),f=Object(m["a"])(u,a,i,!1,null,null,null);e["a"]=f.exports,g()(f,"components",{QSelect:p["a"],QDialog:h["a"]})},"97b7":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"bg-grey-2 text-weight-bold"},[t._v("Items Price")]),s("q-card-section",[s("div",{staticClass:"row q-col-gutter-xs"},[s("div",{staticClass:"col-12"},[s("FilterInputText",{on:{text:function(e){t.filter=e}}})],1),t._l(t.items,(function(e,a){var i=e.item,n=e.price,r=e.name;return s("div",{directives:[{name:"show",rawName:"v-show",value:!t.filter||r.toLowerCase().includes(t.filter.toLowerCase()),expression:"!filter || name.toLowerCase().includes(filter.toLowerCase())"}],key:"plps-"+i,staticClass:"col-sm-3 col-md-2 col-lg-1",class:t.colXSCls},[s("q-input",{attrs:{label:r,type:"number",dense:"",outlined:"",value:n},on:{input:function(e){return t.update(i,e)}}})],1)}))],2)])],1)},i=[],n=s("ded3"),r=s.n(n),o=s("2f62"),l=s("5ab9"),c={name:"AdministratorMasterPriceListPriceSet",components:{FilterInputText:l["a"]},props:["list"],data(){return{filter:"",updates:{}}},computed:r()(r()({},Object(o["d"])("items",{products:"data"})),{},{colXSCls(){return this.$q.screen.width>430?["col-xs-4"]:["col-xs-6"]},lPrice(){return this.list?_(this.$store.state.prices.data).filter(["price_list",this.list]).mapKeys("item").mapValues((({price:t})=>_.toNumber(t))).value():{}},items(){return _(this.products).map((({id:t,name:e})=>Object.assign({},{item:t,price:this.getPrice(t),name:e}))).value()},uPrice(){return 0===_.size(this.updates)?this.items:_.map(this.items,(t=>_.has(this.updates,t.item)?_.set(_.clone(t),"price",this.updates[t.item]):t))}}),methods:{getPrice(t){return _.has(this.updates,t)?this.updates[t]:_.toNumber(_.get(this.lPrice,t,0))},update(t,e){this.$set(this.updates,t,_.toNumber(e)),this.$emit("input",this.updates)}},watch:{list(){this.updates={}}}},d=c,u=s("2877"),m=s("f09f"),p=s("a370"),h=s("27f9"),b=s("eebe"),g=s.n(b),f=Object(u["a"])(d,a,i,!1,null,null,null);e["a"]=f.exports,g()(f,"components",{QCard:m["a"],QCardSection:p["a"],QInput:h["a"]})},"9b77":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-form",{staticClass:"q-gutter-y-xs",on:{submit:function(){return!1}}},[s("div",{staticClass:"text-right"},[s("q-btn",{attrs:{label:"CREATE",color:"light-blue",disable:t.loading},on:{click:t.reset}})],1),t._l(t.fields,(function(e,a,i){return["status"===e?s("q-select",{attrs:{options:["Active","Inactive"],label:t.title(a),outlined:""},model:{value:t.params[a],callback:function(e){t.$set(t.params,a,e)},expression:"params[field]"}}):"yesno"===e?s("q-select",{attrs:{options:["Yes","No"],label:t.title(a),outlined:""},model:{value:t.params[a],callback:function(e){t.$set(t.params,a,e)},expression:"params[field]"}}):"noyes"===e?s("q-select",{attrs:{options:["No","Yes"],label:t.title(a),outlined:""},model:{value:t.params[a],callback:function(e){t.$set(t.params,a,e)},expression:"params[field]"}}):"PL"===e?s("PriceListSelectDropDown",{attrs:{label:t.title(a),outlined:"",get:"id"},model:{value:t.params[a],callback:function(e){t.$set(t.params,a,e)},expression:"params[field]"}}):"seats_input"===e?s("SeatInputSeats",{attrs:{label:t.title(a),outlined:""},model:{value:t.params[a],callback:function(e){t.$set(t.params,a,e)},expression:"params[field]"}}):"tax_contents"===e?s("TaxContentManage",{attrs:{label:t.title(a)},model:{value:t.params[a],callback:function(e){t.$set(t.params,a,e)},expression:"params[field]"}}):"items_choose"===e?s("ItemsChoose",{attrs:{label:t.title(a)},model:{value:t.params[a],callback:function(e){t.$set(t.params,a,e)},expression:"params[field]"}}):"login_pin"===e?s("UserLoginPin",{attrs:{label:t.title(a),outlined:"",update:t.data?t.data[a]:null},model:{value:t.params[a],callback:function(e){t.$set(t.params,a,e)},expression:"params[field]"}}):"login_user"===e?s("UserLoginUserName",{attrs:{label:t.title(a),outlined:"",update:t.data?t.data[a]:null},model:{value:t.params[a],callback:function(e){t.$set(t.params,a,e)},expression:"params[field]"}}):"chef"===e?s("UserSelectDropDown",{attrs:{label:t.title(a),role:"Chef",get:"id",clearable:"",outlined:"",update:t.data?t.data[a]:null},model:{value:t.params[a],callback:function(e){t.$set(t.params,a,e)},expression:"params[field]"}}):s("q-input",{attrs:{type:e,label:t.title(a),outlined:""},model:{value:t.params[a],callback:function(e){t.$set(t.params,a,e)},expression:"params[field]"}})]})),t._t("default"),s("q-btn",{staticClass:"block full-width",attrs:{label:"Save",color:"light-blue",loading:t.loading},on:{click:function(e){return t.$emit("save",t.params)}}})],2)},i=[],n=s("9061"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",t._b({attrs:{options:t.options,value:t.optValue,"use-chips":"",multiple:"","stack-label":"","use-input":""},on:{input:t.doEmit}},"q-select",t.$attrs,!1))},o=[],l=(s("5db7"),s("73d9"),s("2071")),c={name:"SeatInputSeats",mixins:[l["a"]],computed:{optValue(){return _.isArray(this.value)?this.value:this.value?[this.value]:[]},options(){let t=0,e=_.flatMap(this.$store.state.seating.data,"seats"),s=_.map(Array(_.max(e)-_.min(e)+1+20),(()=>++t));return _.difference(s,e)}}},d=c,u=s("2877"),m=s("ddd8"),p=s("eebe"),h=s.n(p),b=Object(u["a"])(d,r,o,!1,null,null,null),g=b.exports;h()(b,"components",{QSelect:m["a"]});var f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"bg-grey-2 text-bold"},[t._v(t._s(t.label||"Add/Edit Tax Contents"))]),s("q-card-section",{staticClass:"row q-col-gutter-xs"},t._l(t.contents,(function(e,a){return s("div",{key:"tcm-"+a,staticClass:"col-sm-4 col-md-3 col-lg-2 col-xl-1",class:t.colXSCls},[s("q-card",[s("q-card-section",{staticClass:"text-bold bg-grey-1"},[t._v(t._s(e.name))]),s("q-card-section",{staticClass:"text-caption text-center text-weight-bold"},[t._v("\n            "+t._s(e.nature||"-")),s("br"),t._v(t._s(e.percent)+"%\n          ")]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{size:"xs",icon:"delete",color:"negative"},on:{click:function(e){return t.remove(a)}}}),s("q-btn",{attrs:{size:"xs",icon:"edit",color:"warning"},on:{click:function(e){return t.edit(a)}}})],1)],1)],1)})),0),s("q-card-actions",{staticClass:"bg-grey-1 q-px-md"},[s("div",{staticClass:"col-12 q-col-gutter-xs row"},[s("div",{staticClass:"col-3"},[s("q-input",{attrs:{dense:"",outlined:"",label:"Name"},model:{value:t.fresh["name"],callback:function(e){t.$set(t.fresh,"name",e)},expression:"fresh['name']"}})],1),s("div",{staticClass:"col-3"},[s("q-input",{attrs:{dense:"",outlined:"",label:"Nature"},model:{value:t.fresh["nature"],callback:function(e){t.$set(t.fresh,"nature",e)},expression:"fresh['nature']"}})],1),s("div",{staticClass:"col-3"},[s("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Percent"},model:{value:t.fresh["percent"],callback:function(e){t.$set(t.fresh,"percent",t._n(e))},expression:"fresh['percent']"}})],1),s("div",{staticClass:"col-3"},[s("q-btn",{staticClass:"full-width full-height",attrs:{dense:"",icon:"add",color:"secondary"},on:{click:t.add}})],1)])])],1)},v=[],q=(s("a434"),{name:"TaxContentManage",props:["value","label"],data(){return{contents:[],fresh:{name:"",percent:"",nature:""}}},computed:{colXSCls(){return"col-xs-"+[12,6,4][_.toInteger(this.$q.screen.width/220)]}},methods:{add(){this.contents.push(_.clone(this.fresh)),_.forEach(this.fresh,((t,e)=>this.fresh[e]=""))},remove(t){return this.contents.splice(t,1)},edit(t){return _.forEach(this.remove(t)[0],((t,e)=>this.fresh[e]=t))}},watch:{contents:{deep:!0,immediate:!0,handler(t){return this.$emit("input",t)}},value:{deep:!0,immediate:!0,handler(){this.contents=this.value?this.value:[]}}}}),y=q,x=s("f09f"),k=s("a370"),C=s("4b7e"),w=s("9c40"),Q=s("27f9"),S=Object(u["a"])(y,f,v,!1,null,null,null),I=S.exports;h()(S,"components",{QCard:x["a"],QCardSection:k["a"],QCardActions:C["a"],QBtn:w["a"],QInput:Q["a"]});var $=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"text-weight-bold bg-grey-1"},[t._v(t._s(t.label||"Choose Items"))]),s("q-card-section",[s("FilterInputText",{staticClass:"q-mb-sm",on:{text:t.fTxt}}),t._l(t.items,(function(e){return s("q-chip",{key:"tic-"+e.id,attrs:{color:"secondary",outline:!t.chosen.includes(e.id),clickable:""},on:{click:function(s){return t.toggle(e)}}},[s("q-avatar",[s("q-img",{attrs:{src:e.image}})],1),t._v(t._s(e.name))],1)}))],2)],1)},j=[],O=(s("c975"),s("ded3")),D=s.n(O),T=s("2f62"),P=s("b1c1"),E=s("5ab9"),z={name:"ItemsChoose",components:{FilterInputText:E["a"]},data(){return{chosen:[],filter:""}},props:["label","value"],computed:D()({},Object(T["d"])("items",{items({data:t}){return this.filter?_(t).filter(this.has).map(this.itmObj).value():_.map(t,this.itmObj)}})),methods:{fTxt(t){this.filter=t?t.toLowerCase():""},toggle({id:t}){let e=_.indexOf(this.chosen,t);e>-1?this.chosen.splice(e,1):this.chosen.push(t),this.$emit("input",this.chosen)},image(t){return Object(P["g"])(t)},itmObj({id:t,name:e,image:s}){return _.zipObject(["id","name","image"],[t,e,this.image(s)])},has({name:t}){return t.toLowerCase().includes(this.filter)}},watch:{value:{immediate:!0,deep:!0,handler(){this.chosen=_.clone(this.value?_.isArray(this.value)?this.value:[this.value]:[])}}}},L=z,N=s("b047"),A=s("cb32"),B=s("068f"),M=Object(u["a"])(L,$,j,!1,null,null,null),K=M.exports;h()(M,"components",{QCard:x["a"],QCardSection:k["a"],QChip:N["a"],QAvatar:A["a"],QImg:B["a"]});var U=s("97b7"),F=s("bf8e"),R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-input",t._b({ref:"input",attrs:{type:"number",rules:t.rules,"lazy-rules":"",clearable:""},model:{value:t.v_pin,callback:function(e){t.v_pin=e},expression:"v_pin"}},"q-input",t.$attrs,!1))},Y=[],H=(s("e6cf"),{name:"UserLoginPin",props:["value","update"],data(){return{pin:"",rules:[t=>!!t||"PIN Required",t=>4===t.length||"4 Digit",this.unique]}},computed:{pins(){return _.map(this.$store.state.users.data,"pin")},v_pin:{get(){return(this.pin||this.value).substr(-4)},set(t){this.pin=_.size(t)>4?t.substr(-4):t}}},methods:{unique(t){return Promise.resolve(this.update&&this.update===t||!this.pins.includes(t)||"PIN is already using by another user")}},watch:{pin(t){let e=this.$refs.input.validate(t);return _.isBoolean(e)?this.$emit("input",e?t:""):_.isObject(e)?e.then((e=>this.$emit("input",e?t:""))):void 0},value(t){this.v_pin=t}}}),V=H,X=Object(u["a"])(V,R,Y,!1,null,null,null),G=X.exports;h()(X,"components",{QInput:Q["a"]});var J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-input",t._b({ref:"input",attrs:{rules:t.rules,"lazy-rules":"",clearable:""},model:{value:t.v_login,callback:function(e){t.v_login=e},expression:"v_login"}},"q-input",t.$attrs,!1))},W=[],Z={name:"UserLoginUserName",props:["value","update"],data(){return{login:"",rules:[t=>!!t||"Login Required",this.unique]}},computed:{logins(){return _.map(this.$store.state.users.data,"login")},v_login:{get(){return this.login||this.value},set(t){this.login=t}}},methods:{unique(t){return Promise.resolve(this.update&&this.update===t||!this.logins.includes(t)||"This is already using by another user")}},watch:{login(t){let e=this.$refs.input.validate(t);return _.isBoolean(e)?this.$emit("input",e?t:""):_.isObject(e)?e.then((e=>this.$emit("input",e?t:""))):void 0},value(t){this.v_login=t}}},tt=Z,et=Object(u["a"])(tt,J,W,!1,null,null,null),st=et.exports;h()(et,"components",{QInput:Q["a"]});var at=s("7fe1");const it={status:"Active",yesno:"Yes",noyes:"No"};var nt={name:"MasterForm",components:{UserSelectDropDown:at["a"],UserLoginUserName:st,UserLoginPin:G,KitchenSelectDropDown:F["a"],AdministratorMasterPriceListPriceSet:U["a"],ItemsChoose:K,TaxContentManage:I,SeatInputSeats:g,PriceListSelectDropDown:n["a"]},props:["fields","data","loading"],data(){return{params:{}}},methods:{title(t){return _.startCase(t)},defs(t){return _.get(it,t,"")},reset(){let t=this;_.forEach(this.params,((e,s)=>t.$set(t["params"],s,t.defs(t.fields[s])))),this.$emit("new")}},watch:{fields:{immediate:!0,deep:!0,handler(){let t=this;_.forEach(this.fields,((e,s)=>t.$set(t["params"],s,_.get(this.data,s,this.defs(e)))))}},data(t){let e=this;_.forEach(t,((t,s)=>_.has(e["params"],s)?e["params"][s]=t:null))}}},rt=nt,ot=s("0378"),lt=Object(u["a"])(rt,a,i,!1,null,null,null);e["a"]=lt.exports,h()(lt,"components",{QForm:ot["a"],QBtn:w["a"],QSelect:m["a"],QInput:Q["a"]})},"9ee2":function(t,e,s){"use strict";var a=s("2f62"),i=s("232e");e["a"]={computed:Object(a["d"])({seats({seating:{data:t},tokens:e,prices:{list:s},users:a,customers:i}){let n=_.keyBy(e.data,"seating");return _.map(t,(t=>{let e=_.toInteger(t.id),r=_.get(n,e);return r?this.seatToken(t,r,s[r.price_list],_.get(a,["data",r.user]),_.get(i,["data",r.customer])):Object.assign({},t,{status:"Vacant"})}))}}),methods:{seatToken(t,{id:e,date:s,progress:a},n,r,o){return a="Billed"===a&&"Paid"===_.get(this.bills,e)?"Paid":a,Object.assign({},t,_.zipObject(["token","price","user","waiter","customer_id","customer","phone","progress","date","status"],[e,n.name,_.get(r,"id"),_.get(r,"name"),_.get(o,"id"),_.get(o,"name"),_.get(o,"phone"),a,s,i["TokenProgressSeatStatus"][a]]))}}}},a85b:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"q-pa-xs",class:t.bgCls}),s("q-list",{attrs:{dense:""}},[t._l(t.header,(function(e,a){return s("q-item",{key:t.hKey("header",e),attrs:{dense:""}},[s("q-item-section",[t._v(t._s(a))]),s("q-item-section",{attrs:{side:""}},[t._v(t._s(t.attrs(e)))])],1)})),s("q-item",[s("q-item-section",[t._v("Customer")]),s("q-item-section",{attrs:{side:""}},[t._v(t._s(t.attrs("customer.name")))])],1)],2),s("q-list",{attrs:{bordered:""}},t._l(t.contents,(function(e){return s("q-item",{key:t.hKey("content",e.id)},[s("q-item-section",[s("q-item-label",[t._v(t._s(e.name))]),s("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.quantity)+" x "+t._s(t.precision(e.price)))]),e.tax?s("q-item-section",[s("q-item-label",{attrs:{caption:""}},[t._v("\n            "+t._s(e.tax.name)+" "+t._s(t.precision(e.tax.amount))+" @"+t._s(e.tax.percent)+"%\n          ")]),t._l(e.tax.contents,(function(e){return s("q-item-label",{key:t.hKey("tax",Math.random()),attrs:{caption:""}},[t._v("\n            - "+t._s(e.name)+" "+t._s(t.precision(e.amount))+" @"+t._s(e.percent)+"%\n          ")])}))],2):t._e()],1),s("q-item-section",{attrs:{side:""}},[s("q-item-label",[t._v(t._s(t.precision(t.getTotal(e))))])],1)],1)})),1),s("q-list",{attrs:{dense:"",bordered:""}},[s("q-item",{attrs:{dense:""}},[s("q-item-section",[t._v("Sub Total")]),s("q-item-section",{staticClass:"text-bold",attrs:{side:""}},[t._v(t._s(t.precision(t.total)))])],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",[t._v("Discount")]),s("q-item-section",{staticClass:"text-bold",attrs:{side:""}},[t._v(t._s(t.precision(t.discount)))])],1),s("q-item",{staticStyle:{"font-size":"1rem"},attrs:{dense:""}},[s("q-item-section",[t._v("Net Payable")]),s("q-item-section",{staticClass:"text-bold",attrs:{side:""}},[t._v(t._s(t.precision(t.attrs("payable"))))])],1),t.paid>0?s("q-item",{staticStyle:{"font-size":"1rem"},attrs:{dense:""}},[s("q-item-section",[t._v("Total Paid")]),s("q-item-section",{staticClass:"text-bold",attrs:{side:""}},[t._v(t._s(t.precision(t.paid)))])],1):t._e()],1),s("q-card-actions",{staticClass:"q-gutter-y-xs",attrs:{vertical:"",align:"center"}},[s("q-select",{staticClass:"full-width",attrs:{outlined:"",options:t.options,label:"Type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),s("q-input",{staticClass:"full-width",attrs:{outlined:"",type:"number",label:"Amount"},model:{value:t.balance,callback:function(e){t.balance=t._n(e)},expression:"balance"}}),s("q-btn",{staticClass:"full-width",attrs:{label:"Make Payment",color:"primary",loading:t.loading},on:{click:t.pay}})],1),s("q-inner-loading",{attrs:{showing:t.loading}},[s("q-spinner-facebook",{attrs:{color:"primary",size:"2em"}})],1)],1)},i=[],n=s("b1c1"),r=s("232e"),o={name:"BillDetailCard",data(){return{header:{"Bill ID":"id",Token:"token.id",Type:"token.type",Date:"date"},v_amount:0,loading:!1,options:r["PaymentsTypes"],type:r["PaymentsTypes"][0]}},computed:{bgCls(){return"bg-"+r["DiningTypeColor"][this.attrs("token.type")]},contents(){return this.attrs("contents",[])},total(){return _.sum(_.map(this.contents,this.getTotal))},discount(){return _.sum(_.map(this.contents,(({discount:t})=>_.toNumber(t))))},paid(){return _.toNumber(this.attrs("paid",0))},balance:{get(){return this.v_amount||this.total-this.discount-this.paid},set(t){this.v_amount=_.toNumber(t)}}},methods:{hKey(t,e){return Object(n["d"])("bill",this.attrs("id"),"details",t,e)},attrs(t,e){return _.get(this.$attrs,t,e)},precision(t){return Object(n["u"])(t)},getTotal({price:t,quantity:e}){return _.toNumber(t)*_.toNumber(e)},pay(){if(this.loading=!0,!this.attrs("id")||!this.balance)return this.loading=!1;let t={bill:this.attrs("id"),amount:this.balance,type:this.type};post("payment","create",t).then().catch().then((()=>this.loading=!1))}}},l=o,c=s("2877"),d=s("f09f"),u=s("a370"),m=s("1c1c"),p=s("66e5"),h=s("4074"),b=s("0170"),g=s("4b7e"),f=s("ddd8"),v=s("27f9"),q=s("9c40"),y=s("74f7"),x=s("e669"),k=s("eebe"),C=s.n(k),w=Object(c["a"])(l,a,i,!1,null,null,null);e["a"]=w.exports,C()(w,"components",{QCard:d["a"],QCardSection:u["a"],QList:m["a"],QItem:p["a"],QItemSection:h["a"],QItemLabel:b["a"],QCardActions:g["a"],QSelect:f["a"],QInput:v["a"],QBtn:q["a"],QInnerLoading:y["a"],QSpinnerFacebook:x["a"]})},a861:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-list",{attrs:{separator:"",bordered:""}},[t._l(t.rows,(function(e){return s("q-item",{key:t.hKey(e),attrs:{disable:"Cancelled"===e.progress}},[s("q-item-section",[e.deliver?s("q-item-label",{staticClass:"text-red text-bold",attrs:{caption:""}},[t._v("Delivery: "+t._s(e.deliver_human))]):t._e(),s("q-item-label",[t._v(t._s(e.quantity)+" x "+t._s(t.itemName(e))),e.narration?s("span",[t._v(" ("+t._s(e.narration)+")")]):t._e()]),t.delay(e)?s("q-item-label",{attrs:{lines:"1",caption:""}},[t._v("Delay: "+t._s(t.delay(e))+" seconds")]):t._e(),t.kitchen(e)?s("q-item-label",{attrs:{lines:"1",caption:""}},[t._v("Kitchen: "+t._s(t.kitchen(e)))]):t._e()],1),s("q-item-section",{attrs:{side:""}},[s("q-badge",{staticClass:"q-py-xs",attrs:{label:e.progress}})],1),s("q-item-section",{attrs:{side:""}},[t.editable(e)?s("q-btn",{attrs:{icon:"edit",color:"warning",round:"",dense:""},on:{click:function(s){t.edit_mode=!!(t.edit_obj=e)}}}):t._e(),"Completed"!==e.progress||t.noserve?t._e():s("q-btn",{attrs:{icon:"how_to_reg",color:"positive",round:"",dense:""},on:{click:function(s){return t.served(e)}}})],1),s("q-inner-loading",{attrs:{showing:t.processing.includes(e.id)}},[s("q-spinner-facebook",{attrs:{color:"primary",size:"2em"}})],1)],1)})),s("q-dialog",{attrs:{persistent:""},model:{value:t.edit_mode,callback:function(e){t.edit_mode=e},expression:"edit_mode"}},[s("OrderSummaryItemUpdate",t._b({staticStyle:{width:"700px","max-width":"90vw"},attrs:{token:t.order},on:{close:function(e){t.edit_mode=!!(t.edit_obj=null)}}},"OrderSummaryItemUpdate",t.edit_obj,!1))],1)],2)},i=[],n=s("ded3"),r=s.n(n),o=s("2f62"),l=s("b1c1"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"row items-center q-pb-none"},[s("div",{staticClass:"text-h6"},[t._v("Update "+t._s(t.name))]),s("q-space"),s("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){return t.$emit("close",null)}}})],1),s("q-card-section",{staticClass:"q-gutter-xs q-pb-none"},[s("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Quantity"},model:{value:t.params.quantity,callback:function(e){t.$set(t.params,"quantity",t._n(e))},expression:"params.quantity"}}),s("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Delay in Minutes"},model:{value:t.params.delay,callback:function(e){t.$set(t.params,"delay",t._n(e))},expression:"params.delay"}}),s("q-input",{attrs:{dense:"",type:"textarea",outlined:"",label:"Narration if any"},model:{value:t.params.narration,callback:function(e){t.$set(t.params,"narration",e)},expression:"params.narration"}})],1),s("q-card-actions",{staticClass:"q-px-md q-pt-xs",attrs:{align:"right"}},[s("q-btn",{attrs:{color:"negative",label:"Cancel Item",type:"submit",disable:t.loading,icon:"delete"},on:{click:function(e){return e.preventDefault(),t.cancel(e)}}}),s("q-space"),s("q-btn",{attrs:{color:"warning",flat:"",label:"Close",type:"submit",disable:t.loading},on:{click:function(e){return e.preventDefault(),t.$emit("close",null)}}}),s("q-btn",{attrs:{color:"primary",label:"Update Item",type:"submit",loading:t.loading},on:{click:function(e){return e.preventDefault(),t.update(e)}}})],1)],1)},d=[],u={name:"OrderSummaryItemUpdate",props:["token"],data(){return{loading:!1,params:{item:null,quantity:1,narration:"",delay:0,id:null}}},computed:{name(){return _.get(this.$store.state.items,[this.params.item,"name"])}},methods:{cancel(){this.loading=!0,post("token","cancel",{id:this.params.id}).then((()=>{this.$emit("close")})).catch().then((()=>this.loading=!1))},update(){this.loading=!0,post("token","item",this.params).then((()=>this.$emit("close"))).catch().then((()=>this.loading=!1))}},created(){_.forEach(["item","quantity","narration","id"],(t=>this.params[t]=_.get(this.$attrs,t))),this.$attrs.delay&&this.$attrs.delay>0&&1e3*this.$attrs.delay>(new Date).getTime()?this.params.delay=_.ceil((this.$attrs.delay-_.toInteger((new Date).getTime()/1e3))/60):this.params.delay=0}},m=u,p=s("2877"),h=s("f09f"),b=s("a370"),g=s("2c91"),f=s("9c40"),v=s("27f9"),q=s("4b7e"),y=s("eebe"),x=s.n(y),k=Object(p["a"])(m,c,d,!1,null,null,null),C=k.exports;x()(k,"components",{QCard:h["a"],QCardSection:b["a"],QSpace:g["a"],QBtn:f["a"],QInput:v["a"],QCardActions:q["a"]});var w={name:"OrderSummaryWaiterOrderItemsList",components:{OrderSummaryItemUpdate:C},props:["order","noserve"],data(){return{edit_mode:!1,edit_obj:null,processing:[],completed:[]}},computed:r()({rows(){return _.get(this.$store.state.tokens.items,_.toInteger(this.order),[])}},Object(o["d"])({items:({items:{data:t}})=>t,kitchens:({kitchens:{data:t}})=>t})),methods:{hKey({id:t,item:e}){return Object(l["d"])("waiter","order","items","list","item",e,"id",t)},itemName({item:t}){return _.get(this.items,[_.toSafeInteger(t),"name"])},delay({delay:t}){return t>0&&1e3*t>(new Date).getTime()?t-_.toInteger((new Date).getTime()/1e3):0},kitchen({kitchen:t}){return _.get(this.kitchens,[_.toSafeInteger(t),"name"],null)},editable({progress:t}){return["New","Accepted"].includes(t)},edit(t){this.edit_obj=t,this.edit_mode=!0},served({id:t}){this.processing.push(t),post("token","served",{id:t}).then((()=>this.processing=_.difference(this.processing,[t])))}},created(){this.completed=_(this.rows).filter(["progress","Completed"]).map("id").value()},watch:{rows:{deep:!0,handler(t){_.forEach(t,(({progress:t,id:e})=>"Completed"!==t||this.completed.includes(e)?null:Object(l["a"])(this.completed.push(e))))}}}},Q=w,S=s("1c1c"),I=s("66e5"),$=s("4074"),j=s("0170"),O=s("58a8"),D=s("74f7"),T=s("e669"),P=s("24e8"),E=Object(p["a"])(Q,a,i,!1,null,null,null);e["a"]=E.exports,x()(E,"components",{QList:S["a"],QItem:I["a"],QItemSection:$["a"],QItemLabel:j["a"],QBadge:O["a"],QBtn:f["a"],QInnerLoading:D["a"],QSpinnerFacebook:T["a"],QDialog:P["a"]})},bf8e:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",t._b({attrs:{options:t.options,value:t.optValue},on:{input:t.doEmit}},"q-select",t.$attrs,!1))},i=[],n=s("2071"),r={name:"KitchenSelectDropDown",mixins:[n["a"]],computed:{options(){return _.map(this.$store.state.kitchens.data)}}},o=r,l=s("2877"),c=s("ddd8"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,a,i,!1,null,null,null);e["a"]=m.exports,u()(m,"components",{QSelect:c["a"]})},c22d:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{attrs:{padding:""}},[s("q-card",{attrs:{flat:""}},[s("FilterInputText",{on:{text:function(e){t.search=e}}}),s("q-card-section",{attrs:{horizontal:""}},[s("q-virtual-scroll",{staticStyle:{height:"80vh",width:"24rem"},attrs:{items:t.list,separator:"",bordered:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.item;return[s("q-item",{key:t.hKey(a),attrs:{clickable:"",active:t.current&&t.current.id===a.id,"active-class":"bg-light-blue text-white"},on:{click:function(e){t.current=a}}},[s("q-item-section",[s("q-item-label",[t._v(t._s(a[t.label]))])],1),s("q-item-section",{attrs:{side:""}},[s("q-icon",{attrs:{color:"white",name:"send"}})],1)],1)]}}])}),s("q-card-section",{staticClass:"full-width"},[s("MasterForm",{ref:"master_form",attrs:{data:t.current,fields:t.fields,loading:t.loading},on:{new:function(e){t.current=null},save:t.save}},[t._t("default")],2)],1)],1)],1)],1)},i=[],n=(s("ddb0"),s("b1c1")),r=s("9b77"),o=s("5ab9"),l=s("43fa"),c={name:"AdministratorMasterCommon",components:{CardImageTitle:l["a"],FilterInputText:o["a"],MasterForm:r["a"]},data(){return{search:"",loading:!1,v_current:null}},props:["content","items","label","fields","validate","update","create","filter","extra"],computed:{list(){return _.isEmpty(this.search)?_.isArray(this.items)?this.items:_.values(this.items):_.filter(this.items,(t=>Object(n["o"])(t,this.filter||[this.label],this.search)))},current:{get(){return this.v_current},set(t){this.v_current=t,this.$emit("current",this.v_current)}}},methods:{hKey({id:t}){return Object(n["d"])("masters",this.content,"list",this.content,t)},save(t){if(this.loading=!0,this.extra&&_.size(this.extra)&&_.forEach(this.extra,((e,s)=>this.$set(t,s,e))),!_.every(this.validate||[],(e=>_.isArray(t[e])?!_.isEmpty(t[e]):!!t[e])))return this.loading=!1;this.current&&(t["id"]=this.current.id),post(this.content,_.has(t,"id")&&t["id"]?this.update:this.create,t).then((t=>{this.$emit("response",t),this.current=null,this.$refs["master_form"].reset(),this.loading=!1}))}}},d=c,u=s("2877"),m=s("9989"),p=s("f09f"),h=s("a370"),b=s("a12b"),g=s("66e5"),f=s("4074"),v=s("0170"),q=s("0016"),y=s("eebe"),x=s.n(y),k=Object(u["a"])(d,a,i,!1,null,null,null);e["a"]=k.exports,x()(k,"components",{QPage:m["a"],QCard:p["a"],QCardSection:h["a"],QVirtualScroll:b["a"],QItem:g["a"],QItemSection:f["a"],QItemLabel:v["a"],QIcon:q["a"]})},c624:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"masonry-container",staticClass:"column full-width masonry-container content-start",class:["masonry"+t.cols,"q-col-gutter-"+(t.gutter||"xs")],style:{height:t.containerHeight}},[t._l(t.cols,(function(t,e){return s("div",{class:{hidden:!e},style:{flex:"1 0 100%",width:0}})})),t._l(t.items,(function(e,a,i){return s("div",{key:t.hKey(a),staticClass:"q-mb-xs",style:{width:t.cell_width},attrs:{tabindex:"0"}},[t._t("item",null,{identity:a,index:i},"object"!==typeof e||Array.isArray(e)?{item:e}:e)],2)}))],2)},i=[],n=s("0831"),r=s("b1c1");const{getScrollHeight:o}=n["a"];var l={name:"Masonry",props:["columns","items","gutter","width"],data(){return{arg:0,containerHeight:0}},computed:{cols(){return this.columns?_.toInteger(this.columns):this.masonry_cols(this.width)},cell_width(){return _.floor(100/this.cols)+"%"},items_size(){return _.size(this.items)}},methods:{hKey(t){return Object(r["d"])("masonry","row",t)},masonry_cols(t){return[1,1,2,3,4,5,6,7,8,9,10,11][_.floor(this.$q.screen.width/_.toInteger(t||175))]||12},set_height(){this.containerHeight=null;let t=this;this.$nextTick((function(){let e=o(t.$refs["masonry-container"]),s=t.items_size,a=_.ceil(e/s),i=_.ceil(s/t.cols);t.containerHeight=a*i+a+"px"}))},set_height_after(){setTimeout(this.set_height,175*(this.items_size/50+1))}},created(){this.arg=_.isArray(this.items)?0:1},watch:{items_size:{immediate:!0,handler:"set_height_after"}}},c=l,d=s("2877"),u=Object(d["a"])(c,a,i,!1,null,null,null);e["a"]=u.exports},cae8:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"q-py-xs",class:"bg-"+t.clr}),s("CardImageTitle",{attrs:{image:t.image}}),s("q-card-section",{staticClass:"bg-grey-1 q-gutter-y-xs q-py-xs"},[s("q-input",{attrs:{value:void 0===t.params.name?t.customer.name:t.params.name,dense:"",color:t.clr,outlined:"",label:"Name"},on:{input:function(e){t.params.name=e}}}),s("q-input",{attrs:{value:void 0===t.params.phone?t.customer.phone:t.params.phone,dense:"",color:t.clr,outlined:"",label:"Phone"},on:{input:function(e){t.params.phone=e}}}),s("q-input",{attrs:{value:void 0===t.params.email?t.customer.email:t.params.email,dense:"",color:t.clr,outlined:"",label:"Email"},on:{input:function(e){t.params.email=e}}}),s("q-input",{attrs:{value:void 0===t.params.address?t.customer.address:t.params.address,dense:"",color:t.clr,outlined:"",label:"Address",type:"textarea"},on:{input:function(e){t.params.address=e}}})],1),s("q-card-actions",{staticClass:"row q-col-gutter-x-sm q-px-md q-py-xs",attrs:{align:"center"}},[s("div",[s("q-btn",{attrs:{color:"negative",size:"sm",padding:"sm",label:"Remove Image"},on:{click:t.remove}})],1),s("div",{staticClass:"col-grow"},[s("q-file",{attrs:{value:[],color:t.clr,label:"Upload New Image",outlined:"",clearable:"",dense:""},on:{input:function(e){return t.upload(e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{size:"xs",name:"attach_file"}})]},proxy:!0}])})],1)]),s("q-card-actions",{staticClass:"bg-grey-2 q-px-md",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:t.clr,padding:"xs md"}}),t.has_update?s("q-btn",{attrs:{label:"Update",color:"primary",padding:"xs md",loading:t.loading},on:{click:t.update}}):t._e()],1)],1)},i=[],n=s("43fa"),r=s("b1c1"),o={name:"CustomerDetailCard",components:{CardImageTitle:n["a"]},props:["id","color"],data(){return{loading:!1,img:null,params:{name:void 0,phone:void 0,address:void 0,email:void 0}}},computed:{clr(){return this.color||"positive"},customer(){return _.get(this.$store.state.customers.data,parseInt(this.id))},image(){return Object(r["g"])(this.img||this.customer.image)},has_update(){return _.some(this.params)}},methods:{update(){if(this.loading=!0,!this.has_update)return this.loading=!1;post("customer","update",_.defaults(this.params,this.customer)).then(this.updated)},updated(){_.forEach(this.params,((t,e)=>this.params[e]=void 0)),this.loading=!1},remove(){this.processing=!0,remove_upload("customer",this.id).then((({data:t})=>this.processing=!(this.img=t.image)))},upload(t){t&&(this.processing=!0,upload("customer",this.id,t).then((({data:t})=>this.processing=!(this.img=t.image))))}}},l=o,c=s("2877"),d=s("f09f"),u=s("a370"),m=s("27f9"),p=s("4b7e"),h=s("9c40"),b=s("7d53"),g=s("0016"),f=s("7f67"),v=s("eebe"),q=s.n(v),y=Object(c["a"])(l,a,i,!1,null,null,null);e["a"]=y.exports,q()(y,"components",{QCard:d["a"],QCardSection:u["a"],QInput:m["a"],QCardActions:p["a"],QBtn:h["a"],QFile:b["a"],QIcon:g["a"]}),q()(y,"directives",{ClosePopup:f["a"]})},d539:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"bg-info q-pa-xs"}),s("q-card-section",{staticClass:"q-py-sm bg-grey-2 row justify-between text-bold"},[s("div",[t._v("ID: "+t._s(t.token.id))]),s("div",[t._v(t._s(t.time))])]),s("q-card-section",[s("div",{staticClass:"row justify-between"},[s("div",{staticClass:"text-caption text-bold"},[t._v("Type")]),s("div",{staticClass:"text-bold"},[t._v(t._s(t.token.type))])]),t.seating?s("div",{staticClass:"row justify-between"},[s("div",{staticClass:"text-caption text-bold"},[t._v("Seating")]),s("div",{staticClass:"text-bold"},[t._v(t._s(t.seating.name))])]):t._e(),t.user?s("div",{staticClass:"row justify-between"},[s("div",{staticClass:"text-caption text-bold"},[t._v("User")]),s("div",{staticClass:"text-bold"},[t._v(t._s(t.user.name))])]):t._e(),t.seating||t.user?s("q-separator",{staticClass:"q-my-md"}):t._e(),s("div",{staticClass:"row justify-between items-center"},[s("div",{staticClass:"text-caption text-bold"},[t._v("Customer")]),t.customer?s("div",{staticClass:"text-bold"},[t._v(t._s(t.customer.name)+"   "),s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"clear",size:"xs",color:"negative"},on:{click:function(e){return t.assignCustomer({id:null})}}})],1):s("OrderCustomer",{staticClass:"q-mt-sm",attrs:{get:"id"},model:{value:t.sCustomer,callback:function(e){t.sCustomer=e},expression:"sCustomer"}})],1),s("div",{staticClass:"row justify-between items-center"},[s("div",{staticClass:"text-caption text-bold"},[t._v("Tax")]),t.tax?s("div",{staticClass:"text-bold"},[t._v(t._s(t.tax)+"   "),s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"clear",size:"xs",color:"negative"},on:{click:function(e){t.tax=""}}})],1):s("q-select",{staticClass:"q-mt-xs",staticStyle:{"min-width":"10rem"},attrs:{label:"Tax",dense:"",options:t.tax_natures,outlined:""},model:{value:t.tax,callback:function(e){t.tax=e},expression:"tax"}})],1)],1),s("q-list",{attrs:{bordered:"",separator:""}},[t._l(t.items_amount,(function(e){return s("q-item",{key:t.hKey(e)},[s("q-item-section",[s("q-item-label",[t._v(t._s(e.quantity)+" x "+t._s(t.itemName(e)))]),s("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.quantity)+" x "+t._s(t.precision(e.price)))])],1),s("q-item-section",{staticClass:"text-black",attrs:{side:""}},[t._v("\n        "+t._s(t.precision(e.amount))+"\n      ")])],1)})),s("q-item",[s("q-item-section",[s("q-item-label",[t._v("")])],1),s("q-item-section",{staticClass:"text-black text-bold",staticStyle:{"font-size":"1.25rem"},attrs:{side:""}},[t._v(t._s(t.precision(t.total)))])],1),s("q-item",[s("q-item-section",[s("q-item-label",[t._v("")])],1),s("q-item-section",{staticClass:"text-black text-bold",staticStyle:{"font-size":"1.25rem"},attrs:{side:""}},[s("q-input",{attrs:{type:"number",dense:"",label:"Discount",outlined:""},model:{value:t.discount,callback:function(e){t.discount=t._n(e)},expression:"discount"}})],1)],1),s("q-item",{staticClass:"text-center bg-grey-2"},[s("q-item-section",[s("q-item-label",{staticClass:"text-weight-bolder",staticStyle:{"font-size":"1.5rem"}},[t._v(t._s(t.precision(t.total-t.discount)))]),s("q-item-label",{staticClass:"text-capitalize",attrs:{caption:""}},[t._v("Payable")])],1),s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{label:"Generate Bill",color:"light-blue",padding:"xs sm",dense:""},on:{click:t.generate}})],1)],1)],2),s("q-inner-loading",{attrs:{showing:t.loading}},[s("q-spinner-facebook",{attrs:{color:"primary",size:"2em"}})],1)],1)},i=[],n=(s("e6cf"),s("a79d"),s("ded3")),r=s.n(n),o=s("43fa"),l=s("b1c1"),c=s("2f62"),d=s("9708"),u={name:"TokenDetailCard",components:{OrderCustomer:d["a"],CardImageTitle:o["a"]},props:["id"],data(){return{loading:!1,tax:null,discount:0}},computed:r()(r()({tid(){return _.toInteger(this.id)}},Object(c["d"])({token:function({tokens:{data:t}}){return t[this.tid]},seating:function({seating:{data:t}}){return t[this.token.seating]},customer:function({customers:{data:t}}){return t[this.token.customer]},items:function({tokens:{items:t}}){return _.filter(t[this.tid],(({progress:t})=>"Cancelled"!==t))},prices:function({prices:{data:t}}){return _(t).filter((({price_list:t,item:e})=>this.token.price_list===t&&this.items_id.includes(e))).mapKeys("item").mapValues((({price:t})=>_.toNumber(t))).value()},user:function({users:{data:t}}){return t[this.token.user]}})),{},{time(){return Object(l["w"])(this.token.date)},items_id(){return _.map(this.items,"item")},items_amount(){return _.map(this.items,(({item:t,quantity:e,id:s})=>_.zipObject(["id","item","price","quantity","amount"],[s,t,this.prices[t],e,this.prices[t]*e])))},total(){return _.sumBy(this.items_amount,"amount")},tax_natures(){return this.$store.getters["tax/natures"]},sCustomer:{get(){return _.get(this.customer,"id",null)},set(t){post("token","customer",{token:this.id,customer:t})}}}),methods:{precision(t){return Object(l["u"])(t)},hKey({id:t}){return Object(l["d"])("receptionist","token",this.id,"item",t)},itemName({item:t}){return _.get(this.$store.state.items.data,[_.toInteger(t),"name"])},assignCustomer({id:t}){post("token","customer",{token:this.id,customer:t})},generate(){if(this.loading=!0,!this.id||!this.customer)return this.loading=!1;let t={token:this.id,customer:this.customer.id,discount:this.discount,nature:this.tax};post("bill","create",t).then((()=>this.$store.dispatch("server/ping",null,{root:!0}))).catch().finally((()=>this.loading=!1))}}},m=u,p=s("2877"),h=s("f09f"),b=s("a370"),g=s("eb85"),f=s("0016"),v=s("ddd8"),q=s("1c1c"),y=s("66e5"),x=s("4074"),k=s("0170"),C=s("27f9"),w=s("9c40"),Q=s("74f7"),S=s("e669"),I=s("eebe"),$=s.n(I),j=Object(p["a"])(m,a,i,!1,null,null,null);e["a"]=j.exports,$()(j,"components",{QCard:h["a"],QCardSection:b["a"],QSeparator:g["a"],QIcon:f["a"],QSelect:v["a"],QList:q["a"],QItem:y["a"],QItemSection:x["a"],QItemLabel:k["a"],QInput:C["a"],QBtn:w["a"],QInnerLoading:Q["a"],QSpinnerFacebook:S["a"]})},db7a:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-list",t._b({},"q-list",t.$attrs,!1),[void 0!==t.payment?s("div",{staticClass:"text-h4 text-center text-bold text-primary q-mb-md"},[s("span",{staticClass:"text-caption",staticStyle:{"line-height":"0.55rem"}},[t._v("Total Payments")]),s("br"),t._v(t._s(t.precision(t.total)))]):t._e(),t._l(t.tokens,(function(e,a){return s("q-item",{key:"osdb-tk-"+e.id+"-idx-"+a},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{rounded:""}},[s("q-img",{attrs:{src:t.image(e.customer.image)}})],1)],1),s("q-item-section",[s("q-item-label",[t._v(t._s(e.customer.name))]),void 0===t.kitchen?s("q-item-label",{attrs:{caption:"",lines:"2"}},[t._v(t._s(e.items.map((function(t){return t.item.name})).join(", ")))]):t._l(e.items,(function(i,n){return s("q-item-label",{key:"osdb-tk-"+e.id+"-idx-"+a+"ims-"+i.id+"-"+n,attrs:{caption:"",lines:"1"},domProps:{innerHTML:t._s(t.kitchen_view(i))}})})),void 0!==t.address&&e.customer?[s("q-item-label",{attrs:{caption:"",lines:"2"}},[t._v(t._s(e.customer.phone))]),s("q-item-label",{attrs:{caption:"",lines:"2"}},[t._v(t._s(e.customer.address))])]:t._e(),void 0!==t.payment&&t.token_payment(e)?s("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.time(t.payment_date(e))))]):t._e(),void 0!==t.user?[t.token_user(e)?s("q-item-label",{attrs:{caption:""}},[t._v("User: "+t._s(t.token_user(e)))]):t._e(),s("q-item-label",{attrs:{caption:""}},[t._v("Amount: "+t._s(t.precision(t.token_total(e))))])]:t._e()],2),void 0===t.user?s("q-item-section",{attrs:{side:""}},[t._v(t._s(t.precision(t.token_total(e))))]):s("q-item-section",{staticClass:"text-purple text-bold text-caption",attrs:{side:""}},[t._v(t._s(t.token_status(e)))])],1)}))],2)},i=[],n=(s("13d5"),s("b1c1")),r={name:"OrderSummaryDeliveryBoy",props:["tokens","kitchen","address","payment","user"],computed:{Bills(){return void 0===this.payment?[]:_(this.$store.state.bills.data).filter((t=>_.includes(_.map(this.tokens,"id"),t.token))).keyBy("token").value()},Payments(){return void 0===this.payment?[]:_(this.$store.state.payments.data).filter((t=>_.includes(_.map(this.Bills,"id"),t.bill))).groupBy("bill").value()},total(){return _(this.Bills).map((({id:t})=>this.bill_paid(this.Payments[t]))).sum()}},methods:{image:n["g"],precision:n["u"],time:n["w"],kitchen_view(t){return t.quantity+"x "+t.item.name+': <span class="text-deep-purple">'+t.progress+"</span> ("+t.kitchen.name+")"},bill_paid(t){return _.sumBy(t,(({amount:t})=>_.toNumber(t)))},token_payment({id:t}){return _.get(this.Payments,_.get(this.Bills,[t,"id"]))},payment_date(t){return _.get(_.last(this.token_payment(t)),"date")},token_user({id:t,user:e,waiter:s}){let a=_.find(this.$store.state.bills.data,{token:t});return a&&a.user?_.get(this.$store.state.users.data[parseInt(a.user)],"name"):e?s.name:""},token_total(t){return void 0===this.payment?t.items.reduce(((t,e)=>t+e.quantity*e.price),0):this.token_payment(t)?this.bill_paid(this.Payments[this.Bills[t.id]["id"]]):0},token_status({id:t,progress:e,items:s}){let a=_.find(this.$store.state.bills.data,{token:t});return a?"Pending"===a.progress?"Deliverable":"Partial"===a.progress?"Partially Paid":"Paid":["New","Accepted"].includes(e)?"New":o(s)?"Billable":"Processing"}}};function o(t){return t.length&&_.every(t,(({progress:t})=>_.includes(["Cancelled","Completed"],t)))}var l=r,c=s("2877"),d=s("1c1c"),u=s("66e5"),m=s("4074"),p=s("cb32"),h=s("068f"),b=s("0170"),g=s("eebe"),f=s.n(g),v=Object(c["a"])(l,a,i,!1,null,null,null);e["a"]=v.exports,f()(v,"components",{QList:d["a"],QItem:u["a"],QItemSection:m["a"],QAvatar:p["a"],QImg:h["a"],QItemLabel:b["a"]})},e97b:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"row items-center q-pb-none"},[s("div",{staticClass:"text-h6"},[t._v("Add Item")]),s("q-space"),s("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){return t.$emit("close",null)}}})],1),s("q-card-section",{staticClass:"q-gutter-xs q-pb-none"},[s("q-select",{attrs:{outlined:"",dense:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:t.item_options,label:"Select Item",clearable:""},on:{filter:t.filter},model:{value:t.item_obj,callback:function(e){t.item_obj=e},expression:"item_obj"}}),s("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Quantity"},model:{value:t.params.quantity,callback:function(e){t.$set(t.params,"quantity",t._n(e))},expression:"params.quantity"}}),s("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Delay in Minutes"},model:{value:t.params.delay,callback:function(e){t.$set(t.params,"delay",t._n(e))},expression:"params.delay"}}),s("q-input",{attrs:{dense:"",type:"textarea",outlined:"",label:"Narration if any"},model:{value:t.params.narration,callback:function(e){t.$set(t.params,"narration",e)},expression:"params.narration"}})],1),s("q-card-actions",{staticClass:"q-px-md q-pt-xs",attrs:{align:"right"}},[s("q-btn",{attrs:{color:"primary",label:"Add Item",type:"submit",loading:t.loading},on:{click:function(e){return e.preventDefault(),t.add(e)}}})],1)],1)},i=[],n=(s("c975"),s("ddb0"),s("ded3")),r=s.n(n),o=s("2f62"),l=s("b1c1"),c={name:"OrderSummaryItemAdd",props:["token"],data(){return{item_obj:null,add_item_mode:!1,item_options:[],loading:!1,params:{item:null,quantity:1,narration:"",delay:0,token:null}}},computed:r()(r()({},Object(o["d"])({items:({items:{data:t}})=>t,token_items:({tokens:{items:t}})=>t})),{},{items_in_token(){return _.map(this.token_items[_.toSafeInteger(this.token)],(({item:t})=>_.toSafeInteger(t)))}}),methods:{filter(t,e){e((()=>{const e=(t||"").toLowerCase();this.item_options=e?Object(l["s"])(this.items,["name"]).filter((t=>_.values(t).join(" ").toLowerCase().indexOf(e)>-1)):Object(l["s"])(this.items,["name"])}))},add(){if(this.loading=!0,this.params.item=_.get(this.item_obj,"id",null),this.params.token=this.token,!this.params.quantity||!this.params.item||!this.params.token)return this.loading=!1;post("token","item",this.params).then((()=>this.$emit("close"))).catch().then((()=>this.loading=!1))}},created(){this.item_options=Object(l["s"])(this.items,["name"],"")}},d=c,u=s("2877"),m=s("f09f"),p=s("a370"),h=s("2c91"),b=s("9c40"),g=s("ddd8"),f=s("27f9"),v=s("4b7e"),q=s("eebe"),y=s.n(q),x=Object(u["a"])(d,a,i,!1,null,null,null);e["a"]=x.exports,y()(x,"components",{QCard:m["a"],QCardSection:p["a"],QSpace:h["a"],QBtn:b["a"],QSelect:g["a"],QInput:f["a"],QCardActions:v["a"]})},ec70:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{class:t.cCls,attrs:{flat:void 0!==t.flat&&t.flat,bordered:void 0!==t.bordered&&t.bordered,dark:void 0!==t.dark&&t.dark}},[t.img?s("q-img",{attrs:{basic:"",src:t.img}},[s("div",{staticClass:"absolute-bottom text-subtitle2 text-center"},[t._v(t._s(t.text))])]):s("q-card-section",[t.icon?s("q-icon",{attrs:{name:t.icon,size:t.size||"sm"}}):t._e(),s("div",{class:"text-"+(t.weight||"bold")},[t._v(t._s(t.text))])],1)],1)},i=[],n={name:"Jumbotron",props:["text","icon","weight","size","bordered","flat","img","color","font","dark"],computed:{cCls(){return _([]).concat(this.color?"bg-"+this.color:null).concat(this.font?"text-"+this.font:null).filter().value()}}},r=n,o=s("2877"),l=s("f09f"),c=s("068f"),d=s("a370"),u=s("0016"),m=s("eebe"),p=s.n(m),h=Object(o["a"])(r,a,i,!1,null,null,null);e["a"]=h.exports,p()(h,"components",{QCard:l["a"],QImg:c["a"],QCardSection:d["a"],QIcon:u["a"]})},ed79:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-btn",{class:{spin:t.since<1},attrs:{flat:"",round:"",dense:"",icon:"sync",disable:t.since<3},on:{click:function(e){return t.$store.dispatch("server/ping")}}})},i=[],n=s("2f62"),r={name:"ManualSync",data(){return{now:0}},computed:Object(n["d"])("server",{since({pinged:t}){return this.now-t}}),created(){setInterval((t=>t.now=_.toInteger((new Date).getTime()/1e3)),1e3,this)}},o=r,l=s("2877"),c=s("9c40"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,a,i,!1,null,null,null);e["a"]=m.exports,u()(m,"components",{QBtn:c["a"]})},f567:function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));const a={no:"no-image.jpg",item:"item.png",seating:"seating.jpg",kitchen:"kitchen.png",takeaway:"takeaway.jpg",homedelivery:"homedelivery.jpg",remote:"remote.jpg",sale:"sale.jpg"}}}]);