(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[51],{fcb2:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"flex-center flex column",attrs:{padding:""}},[e("q-card",{attrs:{flat:""}},[e("q-card-section",{directives:[{name:"show",rawName:"v-show",value:t.errorShow&&t.errorMsg,expression:"errorShow && errorMsg"}],staticClass:"text-red-10 text-center text-uppercase text-bold"},[t._v(t._s(t.errorMsg)+", Please try again")]),e("q-card-section",{directives:[{name:"show",rawName:"v-show",value:!t.SUBSCRIBE_HIDE_LOGIN,expression:"!SUBSCRIBE_HIDE_LOGIN"}],staticClass:"q-pa-none"},[e("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut",mode:"out-in"}},[e(t.components[t.login],{tag:"component",style:t.styles[t.login]})],1)],1),e("q-card-section",{staticClass:"q-pb-none q-pt-xs text-caption text-center text-grey-4"},[t._v("Milestone Smart Kitchen - v"+t._s(t.version))])],1),e("SubscriptionExpiring"),t.SUBSCRIBE_HIDE_LOGIN?e("div",{staticClass:"text-weight-bolder text-red",staticStyle:{"font-size":"5rem"}},[t._v(t._s(parseInt(t.HIDE_ALTER_WAIT/1e3)))]):t._e()],1)},a=[],n=function(){var t=this,e=t._self._c;return e("q-card",{attrs:{flat:""}},[e("q-card-section",[t.role?e("GetRoleUserLogin",{attrs:{role:t.role,loading:t.loading},on:{clear:function(e){t.role=""},user:function(e){t.user=e},login:t.login}}):e("RolesSelect",{staticClass:"q-mx-auto",on:{role:function(e){t.role=e}}}),e("form",{ref:"login_form",staticStyle:{position:"absolute"},attrs:{action:t.LOGIN,method:"post"}},[e("q-input",{attrs:{type:"hidden",name:"id",value:t.id}}),e("q-input",{attrs:{type:"hidden",name:"password",value:t.password}}),e("q-input",{attrs:{type:"hidden",name:t.select,value:t.selected}})],1)],1)],1)},r=[],o=function(){var t=this,e=t._self._c;return e("q-card",{staticClass:"q-mx-auto",staticStyle:{width:"90vw","max-width":"20rem"}},[e("q-card-section",{staticClass:"bg-primary"},[e("div",{staticClass:"text-white items-start"},[e("q-icon",{staticStyle:{"margin-top":"-0.2rem",cursor:"pointer"},attrs:{name:"arrow_back_ios",size:"xs"},on:{click:function(e){return t.$emit("clear")}}}),t._v("\n      Click on user to login\n    ")],1)]),e("q-card-section",[e("q-list",{attrs:{separator:"",bordered:""}},t._l(t.users,(function(s,i){return e("q-expansion-item",{key:"user-"+s.id,attrs:{group:"login"},on:{click:function(e){t.s_user=s}},scopedSlots:t._u([{key:"header",fn:function(){return[e("q-item-section",{attrs:{avatar:""}},[t._v(t._s(i+1))]),e("q-item-section",[e("q-item-label",[t._v(t._s(s.name))])],1)]},proxy:!0}],null,!0)},[e("q-item-section",{staticClass:"q-px-lg q-py-xs q-gutter-y-xs"},[e("q-input",{attrs:{type:"password",dense:"",name:"password",outlined:"",label:"Password"},on:{focus:function(e){t.s_user=s}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e(t.component,{tag:"component",on:{selected:t.selected}}),e("q-btn",{attrs:{label:"Login",color:"primary",loading:t.loading},on:{click:t.login}})],1)],1)})),1)],1)],1)},l=[],c=s("2f62"),d=function(){var t=this,e=t._self._c;return e("q-select",{attrs:{options:t.options,label:"Select Menu",dense:"",value:t.menu,"map-options":"",outlined:""},on:{input:t.emit}})},p=[],u={name:"LoginMenuSelect",data(){return{menu:null}},computed:{menus(){return this.$store.state.menus.data},options(){return _.map(this.menus,(({id:t,name:e})=>_.zipObject(["label","value"],[e,t])))}},methods:{emit({value:t}){this.$emit("selected",t),this.menu=t}}},m=u,h=s("2877"),v=s("ddd8"),g=s("eebe"),b=s.n(g),I=Object(h["a"])(m,d,p,!1,null,null,null),x=I.exports;b()(I,"components",{QSelect:v["a"]});var y=function(){var t=this,e=t._self._c;return e("q-select",{attrs:{options:t.options,label:"Select Kitchen",dense:"",value:t.kitchen,"map-options":"",outlined:""},on:{input:t.emit}})},C=[],S={name:"LoginKitchenSelect",data(){return{kitchen:null}},computed:{kitchens(){return this.$store.getters["kitchens/non_remote"]},options(){return _.map(this.kitchens,(({id:t,name:e})=>_.zipObject(["label","value"],[e,t])))}},methods:{emit({value:t}){this.$emit("selected",t),this.kitchen=t}}},E=S,O=Object(h["a"])(E,y,C,!1,null,null,null),f=O.exports;b()(O,"components",{QSelect:v["a"]});var q={name:"GetRoleUserLogin",components:{LoginKitchenSelect:f,LoginMenuSelect:x},props:["role","loading"],data(){return{s_user:null,password:"",s_selected:null,defaults:LoginSelect}},computed:{...Object(c["b"])("users",["role_users"]),users(){return this.role_users(this.role)},roleItem(){return _.has(this.defaults,this.role)?_.capitalize(this.defaults[this.role]):null},component(){return this.roleItem?`Login${this.roleItem}Select`:null}},methods:{selected(t){this.s_selected=t},login(){if(this.password)return this.$emit("login",_.zipObject(["user","password",_.toLower(this.defaults[this.role])],[this.s_user,this.password,[this.s_selected]]))}}},w=q,R=s("f09f"),T=s("a370"),L=s("0016"),D=s("1c1c"),k=s("3b73"),N=s("4074"),A=s("0170"),P=s("27f9"),Q=s("9c40"),B=Object(h["a"])(w,o,l,!1,null,null,null),Y=B.exports;b()(B,"components",{QCard:R["a"],QCardSection:T["a"],QIcon:L["a"],QList:D["a"],QExpansionItem:k["a"],QItemSection:N["a"],QItemLabel:A["a"],QInput:P["a"],QBtn:Q["a"]});var U=function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-gutter-y-xs"},t._l(t.roles,(function(s){return e("q-card",{key:"role-"+s,staticClass:"bg-primary q-mx-auto",staticStyle:{cursor:"pointer",width:"16rem","max-width":"65vh"},attrs:{dark:""},on:{click:function(e){return t.$emit("role",s)}}},[e("q-card-section",{staticClass:"text-center"},[e("div",{staticClass:"text-h6"},[t._v(t._s(s))])])],1)})),1)},M=[],G={name:"RolesSelect",computed:Object(c["b"])("users",["roles"])},j=G,X=Object(h["a"])(j,U,M,!1,null,null,null),z=X.exports;b()(X,"components",{QCard:R["a"],QCardSection:T["a"]});var H={name:"LoginPassword",components:{GetRoleUserLogin:Y,RolesSelect:z},data(){return{role:"",user:null,loading:!1,LOGIN:LOGIN,id:"",password:"",select:"",selected:[]}},methods:{login({user:{id:t},password:e,menu:s,kitchen:i}){if(this.loading=!0,!t||!e)return this.loading=!1;this.id=t,this.password=e,this.select=s?"menu":i?"kitchen":"",this.selected=s||i||[],this.loading=!1,this.$nextTick((()=>this.$refs["login_form"].submit()))}}},W=H,$=Object(h["a"])(W,n,r,!1,null,null,null),K=$.exports;b()($,"components",{QCard:R["a"],QCardSection:T["a"],QInput:P["a"]});var F=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"bg-grey-2"},[e("div",{staticClass:"row q-col-gutter-x-xs"},t._l(t.digs,(function(s,i){return e("div",{key:"dif-"+i,staticClass:"col-3"},[e("div",{staticClass:"text-center bg-white q-pa-sm text-bold text-grey-8",staticStyle:{"font-size":"1.85rem"},domProps:{innerHTML:t._s(s)}})])})),0)]),e("q-card-section",[e("div",{staticClass:"row q-col-gutter-xs"},[t._l(9,(function(s){return e("div",{key:`pin-number-${s}`,staticClass:"col-4"},[e("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1.25rem"},attrs:{label:s,color:"primary",glossy:"",size:"md",padding:"md md"},on:{click:function(e){t.digs=s}}})],1)})),e("div",{staticClass:"col-4"},[e("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1.25rem"},attrs:{icon:"backspace",color:"primary",glossy:"",size:"md",padding:"md md"},on:{click:t.backspace}})],1),e("div",{staticClass:"col-4"},[e("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1.25rem"},attrs:{label:"0",color:"primary",glossy:"",size:"md",padding:"md md"},on:{click:function(e){t.digs=0}}})],1),e("div",{staticClass:"col-4"},[e("q-btn",{staticClass:"full-width",staticStyle:{"font-size":"1.25rem"},attrs:{icon:"keyboard_return",color:"primary",glossy:"",size:"md",padding:"md md",disable:t.pin.length<4},on:{click:t.login}})],1)],2),e("form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"login_form",attrs:{action:t.LOGIN,method:"post"}},[e("q-input",{attrs:{type:"hidden",name:"pin",value:t.pin}})],1)]),e("q-inner-loading",{attrs:{showing:t.loading}},[e("q-spinner-grid",{attrs:{size:"150px",color:"primary"}})],1)],1)},V=[],J=(s("caad"),s("b1c1")),Z={name:"LoginPin",data(){return{pin:"",LOGIN:LOGIN,loading:!1}},computed:{digs:{get(){return _.padEnd(this.pin,4,"_").split("")},set(t){Object(J["C"])(),this.pin=(this.pin+t).slice(-4)}}},methods:{backspace(){Object(J["C"])(),this.pin=this.pin.slice(0,_.size(this.pin)-1)},login(){Object(J["C"])(),this.loading=!0,this.$refs["login_form"].submit()},eventManage(t){this.$q.platform.is.desktop&&(t("keypress",this.docListen),t("keyup",this.docListenKeyup))},docListenKeyup(t){["Backspace","Delete","Escape","Tab"].includes(t.key)&&this.docListen(t)},docListen(t){return[0,1,2,3,4,5,6,7,8,9,"0","1","2","3","4","5","6","7","8","9"].includes(t.key)?this.digs=t.key:["Enter","+","=","Tab"].includes(t.key)&&!t.ctrlKey||["Enter","\n"].includes(t.key)&&t.ctrlKey?this.login():["b","B","Backspace"].includes(t.key)?this.backspace():["c","C","Delete","Escape"].includes(t.key)?Object(J["C"])()||(this.pin=""):void 0}},created(){this.eventManage(document.addEventListener)},beforeDestroy(){this.eventManage(document.removeEventListener)}},tt=Z,et=s("74f7"),st=s("981c"),it=Object(h["a"])(tt,F,V,!1,null,null,null),at=it.exports;b()(it,"components",{QCard:R["a"],QCardSection:T["a"],QBtn:Q["a"],QInput:P["a"],QInnerLoading:et["a"],QSpinnerGrid:st["a"]});var nt=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"bg-primary text-white"},[e("div",{staticClass:"text-h6"},[t._v("Display Screens")])]),e("q-list",{attrs:{separator:""}},t._l(t.screens,(function(s,i){return e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:"ds-"+i,attrs:{clickable:"",to:s.to}},[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{attrs:{"text-color":t.textColor,rounded:"",icon:s.icon}})],1),e("q-item-section",[e("q-item-label",{staticClass:"text-primary text-bold"},[t._v(t._s(s.name))]),e("q-item-label",{attrs:{caption:""}},[t._v(t._s(s.caption))])],1)],1)})),1)],1)},rt=[],ot=[{name:"Kitchen Item Processing",caption:"Displays tokens which are currently processing in a kitchen.",icon:"person",to:{name:"display_kitchen_processing_tokens"}},{name:"Active Tokens",caption:"Active tokens details",icon:"receipt",to:{name:"display_active_tokens"}},{name:"Daily Order",caption:"Today's full orders",icon:"receipt"},{name:"Home Delivery",caption:"Delivery orders tracking",icon:"logout"},{name:"Table Status",caption:"Realtime view each tables order status and progress",icon:"logout"},{name:"Delivery Boy",caption:"View the activities of active delivery boys handling orders",icon:"logout"},{name:"Bill Payments",caption:"Displays list of Pending Bills, and on selecting any bill Payment UPI QR Code will be displayed for making easy payment..",icon:"attach_money",to:{name:"display_pay_bill_qr_code"}}],lt={name:"DisplayBoards",data(){return{textColor:"primary",screens:ot}}},ct=lt,dt=s("66e5"),pt=s("cb32"),ut=s("714f"),mt=Object(h["a"])(ct,nt,rt,!1,null,null,null),_t=mt.exports;b()(mt,"components",{QCard:R["a"],QCardSection:T["a"],QList:D["a"],QItem:dt["a"],QItemSection:N["a"],QAvatar:pt["a"],QItemLabel:A["a"]}),b()(mt,"directives",{Ripple:ut["a"]});var ht=function(){var t=this,e=t._self._c;return t.SUBSCRIPTION_NOTIFY?e("q-card",{staticClass:"q-mt-md",attrs:{flat:""}},[t.EXPIRED?e("q-card-section",[e("q-card-section",{staticClass:"text-center",staticStyle:{border:"1px solid #b71c1c"}},[e("div",{staticClass:"text-bold bg-red-10 text-white q-py-sm q-mb-sm"},[t._v("SUBSCRIPTION EXPIRED")]),e("div",{staticClass:"text-bold text-red-10"},[t._v("ONLY ADMINISTRATOR CAN LOGIN")]),e("div",{staticClass:"text-bold text-red"},[t._v("OTHER LOGINS ARE TEMPORARILY DISABLED UNTIL NEW SUBSCRIPTION ADDED")])])],1):e("q-card-section",{staticClass:"text-red"},[t.DAYS_TO_EXPIRE>15?e("q-card-section",{staticClass:"text-grey-6"},[e("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is about to expire.. Only "),e("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>10?e("q-card-section",{staticClass:"text-black"},[e("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is about to expire.. Only "),e("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>7?e("q-card-section",{staticClass:"text-red"},[e("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is getting expired.. Only "),e("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>5?e("q-card-section",{staticClass:"text-red-10",staticStyle:{border:"5px double #B71C1C"}},[e("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is expiring.. Only "),e("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>2?e("q-card-section",{staticClass:"text-red bg-grey-3"},[e("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is expiring.. Only "),e("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>1?e("q-card-section",{staticClass:"text-white bg-red-8"},[e("span",{staticClass:"text-bold"},[t._v("Note: ")]),t._v(" Your subscription is expiring.. Only "),e("span",{staticClass:"text-weight-bolder"},[t._v(t._s(t.DAYS_TO_EXPIRE))]),t._v(" days remaining...")]):t.DAYS_TO_EXPIRE>0?e("q-card-section",{staticClass:"text-white bg-red-10 text-center"},[e("div",{staticClass:"text-bold"},[t._v("ATTENTION")]),e("div",{staticClass:"text-bold"},[t._v("SUBSCRIPTION ENDS TOMORROW")]),e("div",{staticClass:"text-bold"},[t._v("PLEASE RENEW NOW ITSELF FOR UNINTERRUPTED SERVICE")])]):e("q-card-section",{staticClass:"text-center",staticStyle:{border:"1px solid #b71c1c"}},[e("div",{staticClass:"text-bold bg-red-10 text-white q-py-sm q-mb-sm"},[t._v("ATTENTION")]),e("div",{staticClass:"text-bold"},[t._v("SUBSCRIPTION ENDING TODAY")]),e("div",{staticClass:"text-bold"},[t._v("SERVICES WILL BE LIMITED FROM TOMORROW ONWARDS")])])],1)],1):t._e()},vt=[],gt=s("adfa");const bt=_.toInteger(Math.abs(gt["VALID_UPTO_REMAINS"])/86400);var It={data(){return{VALID_UPTO_REMAINS:gt["VALID_UPTO_REMAINS"],EXPIRED:gt["VALID_UPTO_REMAINS"]<0,DAYS_TO_EXPIRE:bt,NOTIFY_DURATION:25,SUBSCRIBE_HIDE_LOGIN:bt<6,HIDE_ALTER_WAIT:1e4,interval:null}},computed:{SUBSCRIPTION_NOTIFY(){return this.DAYS_TO_EXPIRE<this.NOTIFY_DURATION}},created(){this.SUBSCRIBE_HIDE_LOGIN&&(this.HIDE_ALTER_WAIT=bt>3?2500:2500+1e3*(4-bt),this.interval=setInterval((t=>{t.HIDE_ALTER_WAIT-=1e3,t.HIDE_ALTER_WAIT<=0&&(clearInterval(this.interval),t.SUBSCRIBE_HIDE_LOGIN=!1)}),1e3,this))}},xt={name:"SubscriptionExpiring",mixins:[It]},yt=xt,Ct=Object(h["a"])(yt,ht,vt,!1,null,null,null),St=Ct.exports;b()(Ct,"components",{QCard:R["a"],QCardSection:T["a"]});var Et=s("3c10"),Ot={name:"PageLoginIndex",components:{SubscriptionExpiring:St,DisplayBoards:_t,LoginPin:at,LoginPassword:K},mixins:[It],data(){return{styles:{pin:{maxWidth:"330px",width:"90vw"},password:{maxWidth:"330px",width:"90vw"},display:{width:"680px"}},components:{pin:"LoginPin",password:"LoginPassword",display:"DisplayBoards"},errorShow:!0,version:Et["k"]}},computed:{login(){return this.$store.state.public.login||"pin"},errorMsg(){return location.search&&"?msg="===location.search.substr(0,5)?decodeURI(location.search.substr(5)):""}},created(){this.errorMsg&&setTimeout((t=>t.errorShow=!1),7e3,this)}},ft=Ot,qt=s("9989"),wt=Object(h["a"])(ft,i,a,!1,null,null,null);e["default"]=wt.exports;b()(wt,"components",{QPage:qt["a"],QCard:R["a"],QCardSection:T["a"]})}}]);