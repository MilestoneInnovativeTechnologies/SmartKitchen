(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{a432:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"q-gutter-y-sm",attrs:{padding:""}},[i("MenuGroupScroll",{model:{value:t.group,callback:function(e){t.group=e},expression:"group"}}),i("FilterInputText",{on:{text:function(e){t.filter=e}}}),i("Masonry",{attrs:{items:t.filterKeys},scopedSlots:t._u([{key:"item",fn:function(e){return[i("ItemSelectCard",{attrs:{id:e.item,price_list:t.params.price_list},on:{selected:t.addItem}})]}}])}),t.hide?t._e():i("div",{staticClass:"bg-white q-py-sm shadow-2 q-gutter-y-sm q-px-md",class:t.horizontal?"fixed-bottom":"fixed-right",staticStyle:{overflow:"scroll"},style:t.horizontal?{"max-height":"60vh"}:{width:"400px",top:"2.5rem"}},[i("OrderSeatingInfo",{attrs:{seating:t.params.seating}}),i("OrderCustomer",{attrs:{get:"id"},model:{value:t.params.customer,callback:function(e){t.$set(t.params,"customer",e)},expression:"params.customer"}}),i("OrderItemsSummary",{attrs:{items:t.params.items,price_list:t.params.price_list},on:{quantity:t.quantity,update:t.update,delete:t.remove}}),i("div",[i("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:"Submit",disable:!t.params.items.length,loading:t.loading},on:{click:t.create}})],1)],1),i("q-page-sticky",{attrs:{position:"bottom-right",offset:[24,24]}},[t.horizontal?i("q-btn",{attrs:{fab:"",glossy:"",color:"accent",icon:"vertical_align_"+(t.hide?"top":"bottom")},on:{click:function(e){t.hide=!t.hide}}}):i("q-btn",{style:{transform:t.hide?"rotateY(180deg)":null},attrs:{fab:"",glossy:"",color:"accent",icon:"keyboard_tab"},on:{click:function(e){t.hide=!t.hide}}})],1)],1)},a=[],s=(i("a434"),i("232e")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-virtual-scroll",{attrs:{items:t.dGroups,"virtual-scroll-horizontal":""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.item;return e.index,[i("div",{key:t.hKey(r),staticClass:"q-pa-xs cursor-pointer",on:{click:function(e){return t.$emit("input",r)}}},[i("Jumbotron",t._b({attrs:{text:r.name}},"Jumbotron",t.bindColorFont(r),!1))],1)]}}])})},n=[],l=i("b1c1"),u=i("ec70"),m=i("2f62"),c={name:"MenuGroupScroll",components:{Jumbotron:u["a"]},props:["value","groups"],computed:Object(m["d"])({dGroups({groups:{data:t},items:e}){return this.groups||_.concat([{id:0,name:"All",items:_.map(e.data,(({id:t})=>_.toInteger(t)))}],_.filter(t,["status","Active"]))}}),methods:{hKey({id:t}){return Object(l["d"])("menu","group","select",t)},bindColorFont(t){let e={color:null,font:null},i=this.value,r={color:"secondary",font:"white"};return!i&&0===t.id||i&&i.id===t.id?r:e}},created(){this.$emit("input",this.dGroups[0])}},d=c,p=i("2877"),h=i("a12b"),f=i("eebe"),g=i.n(f),y=Object(p["a"])(d,o,n,!1,null,null,null),b=y.exports;g()(y,"components",{QVirtualScroll:h["a"]});var q=i("5ab9"),v=i("7a7c"),x=i("85b2"),S=i("9708"),I=i("440b"),k=i("c624"),w={name:"PageOrderCommonNew",components:{Masonry:k["a"],OrderItemsSummary:I["a"],OrderCustomer:S["a"],OrderSeatingInfo:x["a"],ItemSelectCard:v["a"],FilterInputText:q["a"],MenuGroupScroll:b},props:["type","customer","seating","price_list","user"],data(){return{params:{type:"Dining",customer:null,seating:null,price_list:null,user:null,items:[]},group:null,filter:null,loading:!1,hide:!0,pos:null}},computed:{items(){return this.group?this.group.items:[]},filterKeys(){return this.filter?_(this.$store.state.items.data).filter((({id:t})=>this.items.includes(t))).filter((t=>Object(l["i"])(t,["id","name","detail"],this.filter))).map("id").value():this.items},horizontal(){let{height:t,width:e}=this.$q.screen;return e<819&&t>=e}},methods:{addItem({id:t}){let e=_.find(this.params.items,["item",t]);e?e.quantity++:this.params.items.push({item:t,quantity:1,delay:0,narration:null}),this.$q.notify(`${this.params.items.length} x Items <br>${_.sumBy(this.params.items,"quantity")} x Quantities`)},quantity({item:t,quantity:e}){t=_.toSafeInteger(t),e=_.toNumber(e);let i=_.find(this.params.items,["item",t]);i?i.quantity=e:this.params.items.push({item:t,quantity:e})},remove({item:t}){let e=_.findIndex(this.params.items,["item",_.toSafeInteger(t)]);e>-1&&this.params.items.splice(e,1)},update(t){let e=_.find(this.params.items,["item",t.item]);if(!e)return null;_.forEach(_.omit(t,"item"),((t,i)=>e[i]=t))},create(){let t=this;t.loading=!0,post("token","create",t.params).then((e=>{t.loading=!1,t.$router.push({name:"orders"})}))},hKey(t){return Object(l["d"])("common","order","group",this.group.id,"item",t)}},created(){let t=this,e=s["d"][t.type||"Dining"];_.forEach(e,(e=>t.params[e]=t[e])),this.$q.notify.setDefaults({position:"top-right",timeout:1e3,color:"positive",group:!1,html:!0,caption:"Items Updated !!"})}},O=w,$=i("9989"),C=i("9c40"),j=i("de5e"),G=Object(p["a"])(O,r,a,!1,null,null,null);e["default"]=G.exports,g()(G,"components",{QPage:$["a"],QBtn:C["a"],QPageSticky:j["a"]})}}]);