(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[41],{bb03:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{attrs:{padding:""}},[i("q-list",e._l(e.deliverable,(function(t){return i("TokenDetailDeliveryBoyExpansion",{key:"dbc-own-"+t.id,attrs:{token:t,group:"own",color:"positive",popup:"",label:t.customer.name,caption:e.time(t.date)},on:{deliver:function(i){return e.deliver(t)},bill:function(i){return e.bill(t)}}})})),1),i("q-dialog",{attrs:{persistent:""},on:{"before-hide":function(t){e.bill_mode=!1}},model:{value:e.bill_mode,callback:function(t){e.bill_mode=t},expression:"bill_mode"}},[e.selected?i("BillGenerateCard",{style:e.popup_width(),attrs:{token:e.selected},on:{generated:function(t){e.bill_mode=!1}}}):e._e()],1),i("q-dialog",{attrs:{persistent:""},on:{"before-hide":function(t){e.deliver_mode=!1}},model:{value:e.deliver_mode,callback:function(t){e.deliver_mode=t},expression:"deliver_mode"}},[e.selected?i("DeliveryBoyPaymentCard",{style:e.popup_width(),attrs:{token:e.selected},on:{paid:function(t){e.deliver_mode=!1}}}):e._e()],1),i("OrderNewFabDeliveryBoy")],1)},l=[],o=i("faa7"),n=i("b1c1"),s=i("bf22"),d=i("1cd8"),a=i("232e"),u=i("9416"),c=i("58d1"),m={name:"DeliveryBoyBilled",components:{OrderNewFabDeliveryBoy:u["a"],DeliveryBoyPaymentCard:d["a"],BillGenerateCard:s["a"],TokenDetailDeliveryBoyExpansion:o["a"]},mixins:[c["a"]],data(){return{me:parseInt(this.$route.meta.me.id),bill_mode:!1,deliver_mode:!1,selected:null}},computed:{deliverable(){return _(this.bills).filter((e=>["Pending","Partial"].includes(e.progress)&&"Home Delivery"===e.token.type)).filter((e=>!this.hide_others||h(e,this.$route.meta.me.id))).map("token").value()},hide_others(){return!0===Object(n["A"])(settings("delivery_boy_hide_others_billed"))},hide_tokens(){return this.hide_others?_(this.bills).filter((e=>["Pending","Partial"].includes(e.progress))).filter((e=>p(e,this.me))).map((e=>_.toInteger(e.token.id))).value():[]},billed_tokens(){return this.$store.getters["tokens/billed"]},Tokens(){return _(this.tokens).filter(["type","Home Delivery"]).filter(b).map((e=>e.customer?e:Object.assign({},e,{customer:a["NoCustomer"]}))).filter((e=>!this.hide_others||!_.includes(this.hide_tokens,e.id))).value()}},methods:{time:n["C"],popup_width:n["x"],np({customer:e}){return[e.name,e.phone].join(", ")},pa({customer:e}){return[e.phone,e.address].join("<br />")},wa({waiter:e,customer:t}){return[t.address,"(User: "+e.name+")"].join("<br />")},bill({id:e}){this.selected=e,this.bill_mode=!0},deliver({id:e}){this.selected=e,this.deliver_mode=!0}}};function p({user:e},t){return e&&"Delivery Boy"===e.role&&e.id!==t}function b({items:e}){return e.length&&_.every(e,(({progress:e})=>_.includes(["Cancelled","Completed","Served"],e)))}function h({user:e},t){return!e||e.id===t||"Delivery Boy"!==e.role}var v=m,y=i("2877"),f=i("9989"),k=i("1c1c"),g=i("0170"),w=i("24e8"),D=i("eebe"),B=i.n(D),C=Object(y["a"])(v,r,l,!1,null,null,null);t["default"]=C.exports;B()(C,"components",{QPage:f["a"],QList:k["a"],QItemLabel:g["a"],QDialog:w["a"]})}}]);