(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"22b3":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{attrs:{padding:""}},[n("div",{staticClass:"row q-col-gutter-xs"},t._l(t.bills,(function(e){return n("div",{key:t.hKey(e),staticClass:"col-xs-12 col-sm-6 col-md-4 col-lg-3 col-2"},[n("BillDetailCard",t._b({},"BillDetailCard",e,!1))],1)})),0)])},a=[],i=n("b1c1"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",[n("q-card-section",{staticClass:"bg-amber-2 q-pa-xs"}),n("q-list",{attrs:{dense:""}},[t._l(t.header,(function(e,s){return n("q-item",{key:t.hKey("header",e),attrs:{dense:""}},[n("q-item-section",[t._v(t._s(s))]),n("q-item-section",{attrs:{side:""}},[t._v(t._s(t.attrs(e)))])],1)})),n("q-item",[n("q-item-section",[t._v("Customer")]),n("q-item-section",{attrs:{side:""}},[t._v(t._s(t.customer(t.attrs("customer"))))])],1)],2),n("q-list",{attrs:{bordered:""}},t._l(t.attrs("contents"),(function(e){return n("q-item",{key:t.hKey("content",e.id)},[n("q-item-section",[n("q-item-label",[t._v(t._s(e.name))]),n("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.quantity)+" x "+t._s(t.precision(e.price)))]),e.tax?n("q-item-section",[n("q-item-label",{attrs:{caption:""}},[t._v("\n            "+t._s(e.tax.name)+" "+t._s(t.precision(e.tax.amount))+" @"+t._s(e.tax.percent)+"%\n          ")]),t._l(e.tax.contents,(function(e){return n("q-item-label",{key:t.hKey("tax",Math.random()),attrs:{caption:""}},[t._v("\n            - "+t._s(e.name)+" "+t._s(t.precision(e.amount))+" @"+t._s(e.percent)+"%\n          ")])}))],2):t._e()],1),n("q-item-section",{attrs:{side:""}},[n("q-item-label",[t._v(t._s(t.precision(t.total(e))))])],1)],1)})),1),n("q-list",{attrs:{dense:"",bordered:""}},[n("q-item",{attrs:{dense:""}},[n("q-item-section",[t._v("Sub Total")]),n("q-item-section",{staticClass:"text-bold",attrs:{side:""}},[t._v(t._s(t.precision(t.contents_total(t.attrs("contents")))))])],1),n("q-item",{attrs:{dense:""}},[n("q-item-section",[t._v("Discount")]),n("q-item-section",{staticClass:"text-bold",attrs:{side:""}},[t._v(t._s(t.precision(t.contents_discount(t.attrs("contents")))))])],1),n("q-item",{staticStyle:{"font-size":"1rem"},attrs:{dense:""}},[n("q-item-section",[t._v("Net Payable")]),n("q-item-section",{staticClass:"text-bold",attrs:{side:""}},[t._v(t._s(t.precision(t.payable(t.attrs("contents")))))])],1)],1),n("q-card-actions",{staticClass:"q-gutter-y-xs",attrs:{vertical:"",align:"center"}},[n("q-input",{staticClass:"full-width",attrs:{dense:"",outlined:"",type:"number",label:"Amount"},model:{value:t.amount,callback:function(e){t.amount=t._n(e)},expression:"amount"}}),n("q-btn",{staticClass:"full-width",attrs:{dense:"",label:"Make Payment",color:"primary",loading:t.loading},on:{click:t.pay}})],1)],1)},o=[],c={name:"BillDetailCard",data(){return{header:{"Bill ID":"id",Token:"token",Date:"date"},amount:0,loading:!1}},methods:{hKey(t,e){return Object(i["a"])("bill",this.attrs("id"),"details",t,e)},attrs(t){return _.get(this.$attrs,t)},customer(t){return _.get(this.$store.state.customers.data,[_.toInteger(t),"name"])},precision(t){return Object(i["f"])(t)},total({price:t,quantity:e}){return _.toNumber(t)*_.toNumber(e)},contents_total(t){return _.sum(_.map(t,this.total))},contents_discount(t){return _.sum(_.map(t,(({discount:t})=>_.toNumber(t))))},payable(t){return this.contents_total(t)-this.contents_discount(t)},pay(){if(this.loading=!0,!this.attrs("id")||!this.amount)return this.loading=!1;let t={bill:this.attrs("id"),amount:this.amount};post("payment","create",t).then().catch().then((()=>this.loading=!1))}},created(){this.amount=_.toNumber(this.payable(this.attrs("contents")))}},l=c,u=n("2877"),d=n("f09f"),m=n("a370"),b=n("1c1c"),p=n("66e5"),h=n("4074"),q=n("0170"),f=n("4b7e"),v=n("27f9"),y=n("9c40"),g=n("eebe"),C=n.n(g),x=Object(u["a"])(l,r,o,!1,null,null,null),k=x.exports;C()(x,"components",{QCard:d["a"],QCardSection:m["a"],QList:b["a"],QItem:p["a"],QItemSection:h["a"],QItemLabel:q["a"],QCardActions:f["a"],QInput:v["a"],QBtn:y["a"]});var w={name:"PageBillPending",components:{BillDetailCard:k},computed:{bills(){return this.$store.getters["bills/pending"]}},methods:{hKey({id:t}){return Object(i["a"])("bill","details","bill",t)}}},Q=w,j=n("9989"),B=Object(u["a"])(Q,s,a,!1,null,null,null);e["default"]=B.exports,C()(B,"components",{QPage:j["a"]})},b1c1:function(t,e,n){"use strict";function s(){return Array.from(arguments).join("-")}function a(t){return _.assign({},t,{label:[t.name,t.phone].join(", ")})}function i(t){return _(t).map(a).value()}function r(t,e){return _.toNumber(t).toFixed(e||2)}function o(t,e,n){let s=_.map(e,(e=>t[e])).join(n||",");return _.assign({},t,{label:s})}function c(t,e,n){return _.map(t,(t=>o(t,e,n||", ")))}function l(t,e,n){return _.includes(_.values(_.pick(t,e)).join(" ").toLowerCase(),n.toString().toLowerCase())}n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"f",(function(){return r})),n.d(e,"e",(function(){return c})),n.d(e,"b",(function(){return l})),n("ddb0")}}]);