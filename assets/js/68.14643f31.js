(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[68],{"9fe4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("q-page",{attrs:{padding:""}},[t("ReportCard",{attrs:{title:"Payments",head:e.head,index:"",table:e.table,foot:e.foot,center:["Token/Bill","Items"],right:["Bill Amount","Payment Amount","Bill Balance"]}})],1)},l=[],r=a("460a"),s=a("b1c1"),i=a("58d1"),o={name:"ReportBillPayments",components:{ReportCard:r["a"]},mixins:[i["a"]],computed:{range(){return Object(s["A"])(this.$store.state.public.range)},head(){return _.zipObject(["Report","Date From","Date To"],["Bills Payments",Object(s["E"])("ddd - Do MMM hh:mm A",this.range.from),Object(s["E"])("ddd - Do MMM hh:mm A",this.range.to)])},date_bills(){return _(this.bills).filter((({progress:e,payments:t})=>"Cancelled"!==e&&t.length&&m(t,this.range.from,this.range.to))).value()},payments(){return _(this.date_bills).flatMap((e=>_.map(e.payments,(t=>Object.assign({},t,{bill:e}))))).filter((({date:e})=>Object(s["j"])(e,this.range.from,this.range.to))).sortBy((({date:e})=>Object(s["d"])(e).getTime())).value()},table(){return _(this.payments).map((({id:e,date:t,type:a,bill:n,amount:l})=>_.zipObject(["ID","Date","Type","Customer","Bill/Token","Bill Amount","Payment Amount","Bill Balance"],[e,Object(s["f"])(t,!0),a,n.customer.name,[n.id,n.token.id].join("/"),Object(s["z"])(n.payable),Object(s["z"])(l),Object(s["z"])(n.payable-n.paid)]))).value()},foot(){let e=_(this.table).groupBy("Type").mapValues((e=>Object(s["z"])(_.sumBy(e,(e=>_.toNumber(e["Payment Amount"])))))).value(),t=_.zipObject(["Payments","Total"],[_.size(this.table),Object(s["z"])(_.sum(_.map(_.values(e),_.toNumber)))]);return Object.assign({},e,t)}}};function m(e,t,a){return _.some(e,(({date:e})=>Object(s["j"])(e,t,a)))}var u=o,b=a("2877"),p=a("9989"),c=a("eebe"),d=a.n(c),h=Object(b["a"])(u,n,l,!1,null,null,null);t["default"]=h.exports;d()(h,"components",{QPage:p["a"]})}}]);