(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"12cd":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row q-col-gutter-xs"},[e("div",{staticClass:"col-12 row"},[e("FilterInputText",{on:{text:function(e){t.f_text=e}}}),e("q-space"),e("q-pagination",{attrs:{color:"purple",max:t.pages,"max-pages":t.view_links,"boundary-numbers":!0},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}})],1),e("Masonry",{attrs:{items:t.items,width:"200"},scopedSlots:t._u([{key:"item",fn:function(s){return[e("AdministratorImageItem",{attrs:{name:s[t.name],id:s.id,image:s.image,item:t.content}})]}}])})],1)},a=[],n=s("b1c1"),r=function(){var t=this,e=t._self._c;return e("q-card",[e("q-img",{attrs:{basic:"",src:t.temp||t.src}},[e("div",{staticClass:"absolute-bottom text-subtitle2 text-center"},[t._v(t._s(t.name))])]),e("q-card-actions",{staticClass:"row q-col-gutter-x-sm",attrs:{align:"center"}},[e("div",[e("q-btn",{attrs:{icon:"clear",color:"red",padding:"xs",size:"md"},on:{click:t.remove}})],1),e("div",{staticClass:"col-grow"},[e("q-file",{staticClass:"full-width",attrs:{label:"New photo",outlined:"",clearable:"",dense:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"attach_file"}})]},proxy:!0}]),model:{value:t.media,callback:function(e){t.media=e},expression:"media"}})],1)]),e("q-inner-loading",{attrs:{showing:t.processing,"transition-hide":"fadeOut","transition-show":"fadeIn"}},[e("q-spinner-facebook",{attrs:{color:"primary",size:"2em"}})],1)],1)},o=[],l=s("f567"),c={name:"AdministratorImageItem",props:["item","id","name","image"],data(){return{processing:!1,temp:null}},computed:{src(){return this.image?Object(n["i"])(this.image):Object(n["i"])(l["a"].no)},media:{get(){return null},set(t){t&&(this.processing=!0,upload(this.item,this.id,t).then((({data:t})=>this.processing=!(this.temp=Object(n["i"])(t.image)))))}}},methods:{remove(){this.processing=!0,remove_upload(this.item,this.id).then((({data:t})=>this.processing=!(this.temp=Object(n["i"])(t.image))))}},watch:{image(){this.temp=null}}},d=c,u=s("2877"),m=s("f09f"),p=s("068f"),h=s("4b7e"),b=s("9c40"),f=s("7d53"),g=s("0016"),v=s("74f7"),q=s("e669"),y=s("eebe"),k=s.n(y),x=Object(u["a"])(d,r,o,!1,null,null,null),C=x.exports;k()(x,"components",{QCard:m["a"],QImg:p["a"],QCardActions:h["a"],QBtn:b["a"],QFile:f["a"],QIcon:g["a"],QInnerLoading:v["a"],QSpinnerFacebook:q["a"]});var w=s("5ab9"),Q=s("c624"),S={name:"AdministratorImageCommon",components:{Masonry:Q["a"],FilterInputText:w["a"],AdministratorImageItem:C},props:["content","list","name","filter"],data(){return{f_text:"",current:1,per_page:36,view_links:6}},computed:{filtered(){return this.f_text?_.filter(this.list,(t=>Object(n["r"])(t,this.filter,this.f_text))):Object.values(this.list)},items(){return _(this.filtered).slice((this.current-1)*this.per_page).take(this.per_page).value()},pages(){return _.ceil(_.size(this.filtered)/this.per_page)}},methods:{hKey({id:t}){return Object(n["e"])("administrator","image","content",this.content,"item",t)}}},I=S,O=s("2c91"),$=s("3b16"),D=Object(u["a"])(I,i,a,!1,null,null,null);e["a"]=D.exports;k()(D,"components",{QSpace:O["a"],QPagination:$["a"]})},1379:function(t,e,s){"use strict";s("caad");var i=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"row items-center justify-between bg-primary text-white q-py-xs"},[e("div",{staticClass:"text-bold"},[t._v("Manage Items")]),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",size:"md",flat:"",round:"",dense:""}})],1),e("q-card-section",[e("div",{staticClass:"row items-center no-wrap q-col-gutter-x-xs"},[e("ItemSearchDropDown",{ref:"item_ref",staticClass:"col-grow",attrs:{outlined:"",dense:"",label:"Item"},model:{value:t.adding.item,callback:function(e){t.$set(t.adding,"item",e)},expression:"adding.item"}}),e("q-input",{attrs:{type:"number",outlined:"",dense:"",label:"Quantity"},model:{value:t.adding.quantity,callback:function(e){t.$set(t.adding,"quantity",t._n(e))},expression:"adding.quantity"}}),e("div",[e("q-btn",{attrs:{icon:"arrow_downward",color:"primary",round:"",dense:""},on:{click:t.add}})],1)],1),t.item_narration_enabled?e("div",{staticClass:"q-mt-xs row items-center no-wrap q-col-gutter-x-xs"},[e("q-input",{staticClass:"col-grow",attrs:{type:"textarea",outlined:"",dense:"",rows:"1",label:"Narration"},model:{value:t.adding.narration,callback:function(e){t.$set(t.adding,"narration",e)},expression:"adding.narration"}}),e("div",[e("q-btn",{staticStyle:{visibility:"hidden"},attrs:{icon:"arrow_downward",color:"primary",round:"",dense:""}})],1)],1):t._e()]),e("q-list",[t.added.length?[e("q-item-label",{attrs:{header:""}},[t._v("Added")]),t._l(t.added,(function(s,i){return e("q-item",{key:"osim-added-ti-"+i,class:t.bgCls[i%2]},[e("q-item-section",{attrs:{side:""}},[t._v(t._s(i+1))]),e("q-item-section",[e("q-item-label",{staticClass:"text-bold text-black",attrs:{caption:""}},[t._v(t._s(t.token_items[s].name))]),e("q-item-label",{staticClass:"row no-wrap q-col-gutter-x-xs"},[e("q-input",{attrs:{type:"number",label:"Quantity",outlined:"",dense:""},model:{value:t.token_items[s].quantity,callback:function(e){t.$set(t.token_items[s],"quantity",t._n(e))},expression:"token_items[idx].quantity"}}),e("q-input",{attrs:{type:"number",label:"Delay",outlined:"",dense:""},model:{value:t.token_items[s].delay,callback:function(e){t.$set(t.token_items[s],"delay",t._n(e))},expression:"token_items[idx].delay"}}),t.item_narration_enabled?e("q-input",{attrs:{label:"Narration",outlined:"",dense:""},model:{value:t.token_items[s].narration,callback:function(e){t.$set(t.token_items[s],"narration",e)},expression:"token_items[idx].narration"}}):t._e()],1)],1),e("q-item-section",{attrs:{side:""}},[e("q-btn",{attrs:{icon:"clear",color:"amber-14",round:"",dense:"",flat:""},on:{click:function(e){return t.cancel(s)}}})],1)],1)}))]:t._e(),t.added.length?e("q-item-label",{attrs:{header:""}},[t._v("Existing")]):t._e(),t._l(t.token_items,(function(s,i){return[...t.cancelled,...t.added].includes(i)?t._e():e("q-item",{key:"osim-ti-"+t.token_items[i].id,class:t.bgCls[i%2],attrs:{disable:!t.editable(i)}},[e("q-item-section",{attrs:{side:""}},[t._v(t._s(i+1))]),e("q-item-section",[e("q-item-label",{staticClass:"text-bold text-black",attrs:{caption:""}},[t._v(t._s(t.token_items[i].name)+" - "+t._s(t.token_items[i].progress))]),e("q-item-label",{staticClass:"row no-wrap q-col-gutter-x-xs"},[e("q-input",{attrs:{readonly:!t.editable(i),type:"number",label:"Quantity",outlined:"",dense:""},model:{value:t.token_items[i].quantity,callback:function(e){t.$set(t.token_items[i],"quantity",t._n(e))},expression:"token_items[idx].quantity"}}),e("q-input",{attrs:{readonly:!t.editable(i),type:"number",label:"Delay",outlined:"",dense:""},model:{value:t.token_items[i].delay,callback:function(e){t.$set(t.token_items[i],"delay",t._n(e))},expression:"token_items[idx].delay"}}),t.item_narration_enabled?e("q-input",{attrs:{readonly:!t.editable(i),label:"Narration",outlined:"",dense:""},model:{value:t.token_items[i].narration,callback:function(e){t.$set(t.token_items[i],"narration",e)},expression:"token_items[idx].narration"}}):t._e()],1)],1),e("q-item-section",{attrs:{side:""}},[e("q-btn",{attrs:{icon:"clear",color:"amber-14",round:"",dense:"",disable:!t.editable(i),padding:"xs"},on:{click:function(e){return t.cancel(i)}}})],1)],1)})),t.cancelled.length&&!t.cancelled_all_added?[e("q-item-label",{attrs:{header:""}},[t._v("Cancelled")]),t._l(t.cancelled,(function(s,i){return t.token_items[s]&&t.token_items[s].id?e("q-item",{key:"osim-cancelled-"+i+"-ti-"+t.token_items[s].id,class:t.bgCls[i%2]},[e("q-item-section",{attrs:{side:""}},[t._v(t._s(i+1))]),e("q-item-section",[e("q-item-label",{staticClass:"text-bold text-black",attrs:{caption:""}},[t._v(t._s(t.token_items[s].name))]),e("q-item-label",{staticClass:"row no-wrap q-col-gutter-x-xs"},[e("q-input",{attrs:{type:"number",label:"Quantity",outlined:"",dense:""},model:{value:t.token_items[s].quantity,callback:function(e){t.$set(t.token_items[s],"quantity",t._n(e))},expression:"token_items[idx].quantity"}}),e("q-input",{attrs:{type:"number",label:"Delay",outlined:"",dense:""},model:{value:t.token_items[s].delay,callback:function(e){t.$set(t.token_items[s],"delay",t._n(e))},expression:"token_items[idx].delay"}}),t.item_narration_enabled?e("q-input",{attrs:{label:"Narration",outlined:"",dense:""},model:{value:t.token_items[s].narration,callback:function(e){t.$set(t.token_items[s],"narration",e)},expression:"token_items[idx].narration"}}):t._e()],1)],1),e("q-item-section",{attrs:{side:""}},[e("q-btn",{attrs:{icon:"arrow_upward",color:"amber-14",round:"",dense:"",flat:""},on:{click:function(e){return t.undo_cancel(s)}}})],1)],1):t._e()}))]:t._e()],2),e("q-card-actions",{staticClass:"q-px-md bg-grey-3"},[e("div",{staticClass:"text-caption"},[t._v("Total Items: "+t._s(t.token_items.length-t.cancelled.length))]),e("q-space"),e("q-btn",{attrs:{color:"primary",label:"Save",type:"submit"},on:{click:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}})],1),e("q-inner-loading",{attrs:{showing:t.loading}},[e("q-spinner-facebook",{attrs:{size:"xl",color:"primary"}})],1)],1)},a=[],n=(s("14d9"),function(){var t=this,e=t._self._c;return e("q-select",t._b({attrs:{"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",value:t.optValue,options:t.options,label:t.label||"Select Item"},on:{input:t.doEmit,filter:t.filter}},"q-select",t.$attrs,!1))}),r=[],o=s("2071"),l=s("b1c1"),c={name:"ItemSearchDropDown",mixins:[o["a"]],props:["label"],data(){return{options:[]}},computed:{options_master(){return Object(l["x"])(this.$store.state.items.data,["name"])},search_keys(){return _.split(settings("items_search_fields")||"name",",")}},methods:{filter(t,e){e((()=>{const e=(t||"").toLowerCase();this.options=e?_.filter(this.options_master,(t=>Object(l["r"])(t,this.search_keys,e))):this.options_master}))}},created(){this.options=this.options_master}},d=c,u=s("2877"),m=s("ddd8"),p=s("eebe"),h=s.n(p),b=Object(u["a"])(d,n,r,!1,null,null,null),f=b.exports;h()(b,"components",{QSelect:m["a"]});var g=s("bfc7"),v={name:"OrderSummaryItemsManage",components:{ItemSearchDropDown:f},mixins:[g["a"]],props:["token"],data(){return{item_narration_enabled:!0===Object(l["B"])(settings("enable_item_narration")),f_adding:{item:null,quantity:1,delay:0,narration:""},adding:{item:null,quantity:1,delay:0,narration:""},token_items:[],cancelled:[],bgCls:["bg-grey-2","bg-grey-1"],loading:!1}},computed:{added(){return _(this.token_items).map(((t,e)=>t.id?null:e)).filter((t=>t&&!this.cancelled.includes(t))).value()},cancelled_all_added(){return _.every(this.cancelled,(t=>!(this.token_items[t]&&this.token_items[t].id)))}},methods:{setTokenItems(t){this.token_items.splice(0,this.token_items.length),_.forEach(t,(t=>{if("Cancelled"===t.progress)return;let{id:e,item:{id:s,name:i},quantity:a,delay:n,narration:r,progress:o}=_.pick(t,["id","item","quantity","delay","narration","progress"]);this.token_items.push({id:e,item:s,name:i,quantity:a,delay:n,narration:r,progress:o})}))},cancel(t){this.cancelled.push(t)},undo_cancel(t){let e=_.indexOf(this.cancelled,t);e>-1&&this.cancelled.splice(e,1)},editable(t){let e=this.token_items[t].progress;return!e||["New","Accepted"].includes(e)||this.oie_is(e)},add(){if(!this.adding.item)return;let t=null,{item:{id:e,name:s},quantity:i,delay:a,narration:n}=this.adding;this.token_items.push({id:t,item:e,name:s,quantity:i,delay:a,narration:n,progress:null}),this.adding=_.clone(this.f_adding),this.$refs.item_ref.$el.focus()},save(){this.loading=!0,this.adding.item&&this.adding.quantity&&this.add(),post("token","token_items",{items:this.token_items,token:this.token.id,added:this.added,cancelled:this.cancelled}).then((()=>this.loading=this.$emit("done")&&!1))}},watch:{"token.items":{immediate:!0,handler:"setTokenItems"}}},q=v,y=s("f09f"),k=s("a370"),x=s("9c40"),C=s("27f9"),w=s("1c1c"),Q=s("0170"),S=s("66e5"),I=s("4074"),O=s("4b7e"),$=s("2c91"),D=s("74f7"),j=s("e669"),T=s("7f67"),B=Object(u["a"])(q,i,a,!1,null,null,null);e["a"]=B.exports;h()(B,"components",{QCard:y["a"],QCardSection:k["a"],QBtn:x["a"],QInput:C["a"],QList:w["a"],QItemLabel:Q["a"],QItem:S["a"],QItemSection:I["a"],QCardActions:O["a"],QSpace:$["a"],QInnerLoading:D["a"],QSpinnerFacebook:j["a"]}),h()(B,"directives",{ClosePopup:T["a"]})},1799:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.more,expression:"more"}],staticClass:"q-pa-lg flex flex-center"},[e("q-pagination",{attrs:{color:t.color||"primary",min:1,max:t.max,"max-pages":t.pages||7,ellipses:!0,"boundary-numbers":!0},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)},a=[],n={name:"Pagination",props:["value","records","pages","color"],data(){return{page:1}},computed:{ipp(){return this.$store.getters["settings/items_per_page"]},max(){return this.records&&_.isArray(this.records)?_.ceil(this.records.length/this.ipp):1},more(){return this.records&&_.isArray(this.records)&&this.records.length>this.ipp},from(){return(this.page-1)*this.ipp},to(){return this.page*this.ipp},show(){return _.slice(this.records,this.from,this.to)}},watch:{show:{immediate:!0,deep:!0,handler(t){this.$emit("input",t)}}}},r=n,o=s("2877"),l=s("3b16"),c=s("eebe"),d=s.n(c),u=Object(o["a"])(r,i,a,!1,null,null,null);e["a"]=u.exports;d()(u,"components",{QPagination:l["a"]})},"18cd":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"row justify-between text-white",class:"bg-"+(t.color||"primary"),attrs:{horizontal:""}},[e("q-card-section",{staticClass:"q-pr-xl",class:"bg-"+t.color+"-7"},[e("div",{staticClass:"text-caption text-italic",staticStyle:{"line-height":"0.9"}},[t._v(t._s(t.token.type))]),e("div",{staticClass:"text-h6",staticStyle:{"line-height":"1.5rem"}},[t._v("Token ID: "+t._s(t.token.id))]),e("div",{staticClass:"text-caption"},[t._v(t._s(t.token.date_human))]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.token.narration,expression:"token.narration"}],staticClass:"text-caption text-italic q-mt-md"},[t._v(t._s(t.token.narration))])]),e("q-card-section",{staticClass:"col-grow"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"absolute-top-right q-mr-xs q-mt-xs",attrs:{icon:"close","text-color":"grey-1",dense:"",rounded:"",flat:""}}),e("q-badge",{staticClass:"q-mt-md q-px-lg q-py-sm",staticStyle:{transform:"translateX(-50%)"},attrs:{color:"grey-1","text-color":t.color||"primary",label:t.progress}}),t.customer?e("div",{staticClass:"text-right"},[e("div",{staticClass:"text-h6"},[t._v(t._s(t.customer.name))]),e("div",{staticClass:"text-caption",staticStyle:{"line-height":"0.5"}},[t._v(t._s(t.customer.phone))])]):t._e()],1)],1),e("q-card-section",{staticClass:"row items-center justify-between"},[t.token.price_list?e("ItemDetailStack",{attrs:{color:t.color,label:"price list"}},[t._v(t._s(t.token.price_list.name))]):t._e(),t.token.seating?e("ItemDetailStack",{attrs:{color:t.color,label:"seating"}},[t._v(t._s(t.token.seating.name))]):t._e(),t.token.waiter?e("ItemDetailStack",{attrs:{color:t.color,label:"waiter"}},[t._v(t._s(t.token.waiter.name))]):t._e()],1),e("q-list",{staticClass:"bg-grey-1",attrs:{bordered:""}},t._l(t.items,(function(s,i){return e("ArchiveTokenListItem",{key:"atd-t-"+t.token.id+"-i-i-"+s.id,class:{"bg-grey-3":i%2},attrs:{color:t.color,item:s}})})),1),e("q-card-actions",[e("q-btn",{directives:[{name:"show",rawName:"v-show",value:"Cancelled"!==t.token.progress,expression:"token.progress !== 'Cancelled'"}],attrs:{type:"a",size:"sm",dense:"",flat:"","text-color":"red",label:"Cancel Token"},on:{click:t.token_cancel}}),e("q-space"),e("q-btn",{attrs:{dense:"",color:t.color,size:"sm",label:"Progress Timings"},on:{click:function(e){t.token_timings=!0}}}),e("q-btn",{attrs:{dense:"",color:t.color,size:"sm",label:t.print_label||"Print"},on:{click:function(e){return t.$emit("print")}}})],1),e("BrowserPrintCardActions",{attrs:{token:t.token}}),e("q-dialog",{attrs:{persistent:""},model:{value:t.token_timings,callback:function(e){t.token_timings=e},expression:"token_timings"}},[e("TokenTimingCard",{staticStyle:{"min-width":"65vw"},attrs:{timing:t.timing,color:t.color,bordered:"",separator:""}})],1),e("q-inner-loading",{attrs:{showing:t.loading}},[e("q-spinner-facebook",{attrs:{size:"xl",color:"primary"}})],1)],1)},a=[],n=(s("caad"),function(){var t=this,e=t._self._c;return e("q-card",[e("q-bar",{staticClass:"text-white",class:"bg-"+t.color},[e("div",{staticStyle:{"font-size":"0.7rem"}},[t._v("Progress Timings")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",rounded:"",padding:"0",size:"sm",icon:"close"}})],1),e("q-list",t._b({},"q-list",t.$attrs,!1),t._l(t.times,(function(s,i){return e("q-item",{key:"ttl-"+i,staticClass:"q-py-xs"},[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{attrs:{size:"sm","text-color":t.color,icon:i?"subdirectory_arrow_right":"play_arrow"}})],1),e("q-item-section",[e("q-item-label",{staticStyle:{"font-size":"0.65rem"},attrs:{caption:""}},[t._v(t._s(t.rDate(s.time)))]),e("q-item-label",{class:"text-"+t.color,staticStyle:{"font-size":"0.85rem"}},[t._v(t._s(s.progress||s.status))])],1),e("q-item-section",{attrs:{side:""}},[e("q-badge",{staticClass:"q-py-xs q-px-sm",staticStyle:{"font-size":"0.65rem"},attrs:{color:s.delay[0],outline:"",label:s.delay.slice(1).join(" ")}})],1)],1)})),1)],1)}),r=[];const o=s("fe09").date;var l={name:"TokenTimingCard",props:["timing","color"],computed:{times(){return _.map(this.timing,((t,e)=>Object.assign({},t,{delay:this.dText2(t,e)})))},initial(){return o.extractDate(_.toString(_.first(this.timing).time),"X")},final(){return o.extractDate(_.toString(_.last(this.timing).time),"X")},isSameDay(){return o.isSameDate(this.initial,this.final,"day")}},methods:{jDateX(t){return o.extractDate(_.toString(t),"X")},rDate(t){return o.formatDate(this.jDateX(t),this.isSameDay?"hh:mm A":"hh:mm A (DD/MMM)")},differ(t,e){return o.getDateDiff(this.jDateX(t),this.jDateX(e),"seconds")},dText({time:t},e){return e?this.differArray(this.differ(t,this.timing[e-1].time)):[]},dText2({time:t},e){return this.differArray(this.differ(this.timing[e+1]?this.timing[e+1].time:o.formatDate(new Date,"X"),t))},differArray(t){return t<60?["positive",t,"secs"]:t<180?["positive",_.round(t/60),"mins"]:t<420?["lime-9",_.round(t/60),"mins"]:t<900?["yellow-9",_.round(t/60),"mins"]:t<1800?["orange-10",_.round(t/60),"mins"]:t<3600?["deep-orange-10",_.round(t/60),"mins"]:t<10800?["brown-6",_.round(t/3600,1),"hrs"]:t<86400?["brown-10",_.round(t/3600,1),"hrs"]:t<5184e3?["brown-10",_.round(t/86400,1),"dys"]:["brown-10",_.round(t/86400,2),"mnths"]}}},c=l,d=s("2877"),u=s("f09f"),m=s("d847"),p=s("2c91"),h=s("9c40"),b=s("1c1c"),f=s("66e5"),g=s("4074"),v=s("cb32"),q=s("0170"),y=s("58a8"),k=s("a370"),x=s("05eb"),C=s("74af"),w=s("7f67"),Q=s("eebe"),S=s.n(Q),I=Object(d["a"])(c,n,r,!1,null,null,null),O=I.exports;S()(I,"components",{QCard:u["a"],QBar:m["a"],QSpace:p["a"],QBtn:h["a"],QList:b["a"],QItem:f["a"],QItemSection:g["a"],QAvatar:v["a"],QItemLabel:q["a"],QBadge:y["a"],QCardSection:k["a"],QTimeline:x["a"],QTimelineEntry:C["a"]}),S()(I,"directives",{ClosePopup:w["a"]});var $=function(){var t=this,e=t._self._c;return e("div",[e("q-item",t._b({},"q-item",t.$attrs,!1),[e("ItemDetailStackLeft",{attrs:{color:t.color,label:t.item.price}},[e("span",{class:"text-"+t.color},[t._v(t._s(t.item.quantity)+" x ")]),e("span",[t._v(t._s(t.item.item.name))])]),t.item.kitchen?e("ItemDetailStackLeft",{attrs:{color:t.color,label:"kitchen"}},[t._v(t._s(t.item.kitchen.name))]):t._e(),e("q-item-section",{attrs:{side:""}},[e("q-badge",{attrs:{label:t.item.progress,outline:"",color:t.color||"primary"}})],1),e("q-item-section",{attrs:{side:""}},[e("q-btn",{attrs:{icon:"history_toggle_off",flat:"",rounded:"",dense:"",color:t.color||"primary"},on:{click:function(e){t.timing_show=!0}}})],1)],1),t.item.narration?e("div",{staticClass:"q-px-md text-italic text-caption text-grey-9",staticStyle:{transform:"translateY(-0.8rem)"}},[t._v(t._s(t.item.narration))]):t._e(),e("div",{staticClass:"flex q-px-md justify-between q-pb-xs"},[t.item.deliver?e("ItemDetailStack",{attrs:{color:t.color,label:"Delivery"}},[t._v(t._s(t.item.deliver_human))]):t._e(),t.item.photo?e("ItemDetailStack",{attrs:{color:t.color,label:"Photo"}},[e("q-btn",{attrs:{dense:"",rounded:"",padding:"none",type:"a",flat:"",size:"xs",label:"Click to View"},on:{click:function(e){return t.photo(t.item.photo)}}})],1):t._e(),e("q-space"),e("q-btn",{attrs:{label:"Change Progress","icon-right":"forward",size:"sm",padding:"xs sm",push:"",glossy:"",dense:"",color:t.color},on:{click:function(e){t.progress_change=!0}}})],1),e("q-separator"),e("q-dialog",{attrs:{persistent:""},model:{value:t.timing_show,callback:function(e){t.timing_show=e},expression:"timing_show"}},[e("TokenTimingCard",{staticStyle:{"min-width":"65vw"},attrs:{timing:t.timings,color:t.color||"primary"}})],1),t.image_url?e("q-dialog",{attrs:{persistent:""},model:{value:t.image_show,callback:function(e){t.image_show=e},expression:"image_show"}},[e("ImageViewCard",{staticStyle:{"min-width":"65vw"},attrs:{url:t.image_url}})],1):t._e(),e("q-dialog",{attrs:{persistent:""},model:{value:t.progress_change,callback:function(e){t.progress_change=e},expression:"progress_change"}},[e("TokenItemChangeProgress",{staticStyle:{"min-width":"65vw"},attrs:{item:t.item.id,progress:t.item.progress,kitchen:t.item.kitchen?t.item.kitchen.id:null},on:{done:function(e){t.progress_change=!1}}})],1)],1)},D=[],j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center text-bold text-caption",staticStyle:{"font-size":"0.7rem","line-height":"1.3"}},[t._t("default"),e("br"),e("span",{staticClass:"text-uppercase",class:"text-"+(t.color||"primary"),staticStyle:{"font-size":"0.65rem"}},[t._v(t._s(t.label))])],2)},T=[],B={name:"ItemDetailStack",props:["label","color"]},P=B,N=Object(d["a"])(P,j,T,!1,null,null,null),z=N.exports,A=s("5843"),L=function(){var t=this,e=t._self._c;return e("q-card",{staticStyle:{"min-width":"65vw"},attrs:{flat:""}},[e("q-bar",{staticClass:"bg-secondary text-white"},[e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[e("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Close")])],1)],1),e("q-card-section",[e("q-img",{attrs:{src:t.url}})],1)],1)},K=[],E={name:"ImageViewCard",props:["url"]},M=E,R=s("05c0"),F=s("068f"),U=Object(d["a"])(M,L,K,!1,null,null,null),H=U.exports;S()(U,"components",{QCard:u["a"],QBar:m["a"],QSpace:p["a"],QBtn:h["a"],QTooltip:R["a"],QCardSection:k["a"],QImg:F["a"]}),S()(U,"directives",{ClosePopup:w["a"]});var V=function(){var t=this,e=t._self._c;return e("q-card",[e("q-bar",{staticClass:"bg-secondary text-white"},[e("div",{staticStyle:{"font-size":"0.7rem"}},[t._v("Change Progress of Token Item")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",rounded:"",padding:"0",size:"sm",icon:"close"}})],1),e("q-card-section",{staticClass:"q-gutter-y-xs q-pb-xs"},[e("q-card-section",{staticClass:"row justify-between q-col-gutter-x-xs",attrs:{horizontal:""}},[e("q-btn",{staticClass:"col",attrs:{outline:"",dense:"",color:"secondary",label:t.progress,"icon-right":"forward",disable:""}}),e("q-select",{staticClass:"col",attrs:{outlined:"",dense:"",color:"secondary",options:t.progresses},model:{value:t.progress_new,callback:function(e){t.progress_new=e},expression:"progress_new"}})],1),t.needs_kitchen?e("q-card-section",{staticClass:"row justify-between q-col-gutter-x-xs",attrs:{horizontal:""}},[e("q-btn",{staticClass:"col",attrs:{outline:"",dense:"",color:"secondary",label:t.kitchen_name||"Kitchen","icon-right":"forward",disable:""}}),e("KitchenSelectDropDown",{staticClass:"col",attrs:{outlined:"",dense:"",color:"secondary",get:"id","option-label":"name"},model:{value:t.kitchen_id,callback:function(e){t.kitchen_id=e},expression:"kitchen_id"}})],1):t._e()],1),e("q-card-actions",{staticClass:"q-px-md q-pt-xs",attrs:{align:"right"}},[e("q-btn",{attrs:{label:"Update",color:"secondary",disable:!t.updates,loading:t.loading},on:{click:t.submit}})],1)],1)},Y=[],G=s("bf8e");const W=["New","Accepted","Processing","Completed","Served","Cancelled","Reset"],X=["reset","accept","process","complete","served","cancel","reset"],J=[[1,5],[2,5,6],[3,5,6],[4,5,6],[5,6],[6]];var Z={name:"TokenItemChangeProgress",components:{KitchenSelectDropDown:G["a"]},props:["item","progress","kitchen"],data(){return{kitchen_id:null,progress_new:null,loading:!1}},computed:{kitchen_name(){return _.get(this.$store.state.kitchens.data,[this.kitchen,"name"])},progresses(){return _.map(J[W.indexOf(this.progress)],(t=>W[t]))},method(){return X[W.indexOf(this.progress_new)]},needs_kitchen(){return["Accepted","Reset"].includes(this.progress_new)},updates(){return this.progress_new!==this.progress||this.kitchen_id!==this.kitchen}},watch:{kitchen:{immediate:!0,handler(t){this.kitchen_id=t}},progress:{immediate:!0,handler(t){this.progress_new=t}}},methods:{submit(){if(!this.updates||this.needs_kitchen&&!this.kitchen_id)return;this.loading=!0;let t={id:this.item,kitchen:this.needs_kitchen?this.kitchen_id:this.kitchen};post("token",this.method,t).then(this.done)},done(){this.loading=!1,this.$emit("done")}}},tt=Z,et=s("ddd8"),st=s("4b7e"),it=Object(d["a"])(tt,V,Y,!1,null,null,null),at=it.exports;S()(it,"components",{QCard:u["a"],QBar:m["a"],QSpace:p["a"],QBtn:h["a"],QCardSection:k["a"],QSelect:et["a"],QCardActions:st["a"]}),S()(it,"directives",{ClosePopup:w["a"]});var nt=s("de36"),rt={name:"ArchiveTokenListItem",components:{TokenItemChangeProgress:at,ImageViewCard:H,ItemDetailStackLeft:A["a"],ItemDetailStack:z,TokenTimingCard:O},props:["item","color"],data(){return{timing_show:!1,image_show:!1,progress_change:!1,image_url:""}},computed:{img_cache(){return this.$store.state.tokens.img},timings(){return this.item.progress_timing}},methods:{photo(t){if(_.has(this.img_cache,t))return this.image_show=!!(this.image_url=this.img_cache[t]);Object(nt["j"])(t).then((e=>this.photo(t,this.$store.commit("tokens/image",{name:t,url:e},{root:!0}))))}}},ot=rt,lt=s("eb85"),ct=s("24e8"),dt=Object(d["a"])(ot,$,D,!1,null,null,null),ut=dt.exports;S()(dt,"components",{QItem:f["a"],QItemSection:g["a"],QBadge:y["a"],QBtn:h["a"],QSpace:p["a"],QSeparator:lt["a"],QDialog:ct["a"]});var mt=s("36d9"),pt={name:"ArchiveTokenDetail",components:{BrowserPrintCardActions:mt["a"],ItemDetailStack:z,ArchiveTokenListItem:ut,TokenTimingCard:O},props:["token","color","print_label"],data(){return{token_timings:!1,loading:!1}},computed:{progress(){let t=this.token.progress;return["Pending","Partial"].includes(t)?{Pending:"Payment Pending",Partial:"Paid Partially"}[t]:t},customer(){return this.token.customer},items(){return this.token.items||[]},timing(){return this.token.progress_timing||[]}},methods:{token_cancel(){this.loading=!0,post("token","do_cancel",{id:this.token.id}).then((()=>this.$emit("cancelled"))).catch().finally((()=>this.loading=!1))}}},ht=pt,_t=s("74f7"),bt=s("e669"),ft=Object(d["a"])(ht,i,a,!1,null,null,null);e["a"]=ft.exports;S()(ft,"components",{QCard:u["a"],QCardSection:k["a"],QBtn:h["a"],QBadge:y["a"],QList:b["a"],QCardActions:st["a"],QSpace:p["a"],QDialog:ct["a"],QInnerLoading:_t["a"],QSpinnerFacebook:bt["a"]}),S()(ft,"directives",{ClosePopup:w["a"]})},"1cd8":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-card",[e("q-bar",{staticClass:"bg-accent text-white"},[e("q-icon",{staticClass:"q-mr-md",attrs:{name:"receipt_long"}}),t._v("Delivery Payment"),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",rounded:"",flat:"",dense:""}})],1),e("q-card-section",{staticClass:"row q-col-gutter-sm"},[e("q-input",{staticClass:"col-4",attrs:{readonly:"",outlined:"",dense:"",value:t.token.id,label:"Token ID"}}),e("q-input",{staticClass:"col-8",attrs:{readonly:"",outlined:"",dense:"",value:t.token.date_human,label:"Token Date"}}),e("q-input",{staticClass:"col-4",attrs:{readonly:"",outlined:"",dense:"",value:t.Bill.id,label:"Bill ID"}}),e("q-input",{staticClass:"col-8",attrs:{readonly:"",outlined:"",dense:"",value:t.human_date2(t.Bill.date)+" "+t.time(t.Bill.date),label:"Bill Date"}})],1),e("q-list",{attrs:{dense:"",separator:""}},t._l(t.Items,(function(s){return e("q-item",{key:"db-gk-t-"+t.token+"-ti-"+s.id+"-i-"+s.id},[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{attrs:{rounded:""}},[e("q-img",{attrs:{src:t.image(s.item.image)}})],1)],1),e("q-item-section",[e("q-item-label",[t._v(t._s(s.quantity)+"x "+t._s(s.item.name))]),e("q-item-label",{attrs:{caption:""}},[t._v("Rate: "+t._s(s.price))])],1),e("q-item-section",{attrs:{side:""}},[t._v(t._s(t.precision(s.price*s.quantity)))])],1)})),1),e("q-card-section",{staticClass:"q-py-none bg-grey-2"},[e("q-card-section",{staticClass:"row"},[e("div",{staticClass:"col-2"},[t._v(" ")]),e("div",{staticClass:"col-6 text-bold text-subtitle2"},[t._v("Sub Total")]),e("div",{staticClass:"col-4 text-bold text-subtitle2 text-right"},[t._v(t._s(t.precision(t.Bill.amount)))]),t.Bill.discount?[e("div",{staticClass:"col-2"},[t._v(" ")]),e("div",{staticClass:"col-6 text-bold text-subtitle2"},[t._v("Discount")]),e("div",{staticClass:"col-4 text-bold text-subtitle2 text-right"},[t._v(t._s(t.precision(t.Bill.discount)))])]:t._e(),t.Bill.paid?[e("div",{staticClass:"col-2"},[t._v(" ")]),e("div",{staticClass:"col-6 text-bold text-subtitle2"},[t._v("Paid")]),e("div",{staticClass:"col-4 text-bold text-subtitle2 text-right"},[t._v(t._s(t.precision(t.Bill.paid)))])]:t._e(),e("div",{staticClass:"col-2"},[t._v(" ")]),e("div",{staticClass:"col-6 text-bold text-subtitle1"},[t._v("Payable")]),e("div",{staticClass:"col-4 text-bold text-subtitle1 text-right"},[t._v(t._s(t.precision(t.Bill.payable-t.Bill.paid)))])],2)],1),e("q-card-actions",{staticClass:"row items-center q-col-gutter-x-sm"},[e("q-select",{staticClass:"col",attrs:{outlined:"",options:t.PaymentsTypes,label:"Type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),e("q-input",{staticClass:"col",attrs:{type:"number",outlined:"",label:"Amount"},model:{value:t.amount,callback:function(e){t.amount=t._n(e)},expression:"amount"}}),e("div",[e("q-btn",{attrs:{color:"positive",label:"Pay",padding:"md lg",loading:t.loading},on:{click:t.deliver}})],1)],1)],1)},a=[],n=s("b1c1"),r=s("232e"),o={name:"DeliveryBoyPaymentCard",props:["token"],data(){return{loading:!1,amount:0,type:"Cash",PaymentsTypes:r["PaymentsTypes"],paying:0}},computed:{Items(){return _.filter(this.token.items,(t=>"Cancelled"!==t.progress))},Bill(){return _.get(this.token,"bill")},total(){return _.sumBy(this.Items,(({price:t,quantity:e})=>_.toNumber(t)*_.toNumber(e)))},token_item_ids(){return _.map(this.Items,"id")}},methods:{human_date2:n["g"],time:n["D"],image:n["i"],precision:n["z"],deliver(){if(this.loading=!0,!this.token||!this.amount||_.isEmpty(this.token_item_ids))return this.loading=!1;let t={id:this.token_item_ids,bill:_.get(this.Bill,"id"),amount:this.amount,type:this.type};post("token","served",t).then().catch().then(this.paid)},paid(){this.loading=!1,this.$emit("paid")}},watch:{Bill:{immediate:!0,deep:!0,handler({payable:t,paid:e}){this.amount=t-e}}}},l=o,c=s("2877"),d=s("f09f"),u=s("d847"),m=s("0016"),p=s("2c91"),h=s("9c40"),b=s("a370"),f=s("27f9"),g=s("1c1c"),v=s("66e5"),q=s("4074"),y=s("cb32"),k=s("068f"),x=s("0170"),C=s("4b7e"),w=s("ddd8"),Q=s("7f67"),S=s("eebe"),I=s.n(S),O=Object(c["a"])(l,i,a,!1,null,null,null);e["a"]=O.exports;I()(O,"components",{QCard:d["a"],QBar:u["a"],QIcon:m["a"],QSpace:p["a"],QBtn:h["a"],QCardSection:b["a"],QInput:f["a"],QList:g["a"],QItem:v["a"],QItemSection:q["a"],QAvatar:y["a"],QImg:k["a"],QItemLabel:x["a"],QCardActions:C["a"],QSelect:w["a"]}),I()(O,"directives",{ClosePopup:Q["a"]})},2071:function(t,e,s){"use strict";e["a"]={props:["value","get","name"],computed:{optValue(){return void 0===this.get?this.value:_.find(this.options,[this.get,this.value])}},methods:{clear(){this.$emit("input",null)},doEmit(t){this.$emit("input",this.get?_.get(t,this.get,null):t)},getName(t){return this.name?this.name(t):t.name}},created(){_.has(this.$attrs,"clearable")||this.value||this.doEmit(_.head(this.options))}}},2943:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-select",t._b({attrs:{options:t.options,value:t.optValue,label:t.label||"Select Tax Nature"},on:{input:t.doEmit}},"q-select",t.$attrs,!1))},a=[],n=s("2071"),r={name:"TaxNatureSelectDropDown",props:["label"],mixins:[n["a"]],computed:{options(){return this.$store.getters["tax/natures"]}}},o=r,l=s("2877"),c=s("ddd8"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=m.exports;u()(m,"components",{QSelect:c["a"]})},"31e1":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-card",[e("q-bar",{staticClass:"bg-positive text-white q-py-lg"},[e("q-list",{staticClass:"q-my-xl full-width"},[e("q-item",{staticClass:"q-px-none items-center",staticStyle:{"font-size":"0.75rem"}},[e("q-item-section",{staticClass:"text-white text-bold",attrs:{side:""}},[e("q-item-label",[t._v("Bill: "+t._s(t.bill.id))]),e("q-item-label",{staticClass:"text-bold text-white",attrs:{caption:""}},[t._v("Token: "+t._s(t.token.id))])],1),e("q-item-section",{staticClass:"text-white text-bold"},[e("q-item-label",[t._v(t._s(t.token.type))]),e("q-item-label",{staticClass:"text-white text-bold",attrs:{caption:""}},[t._v(t._s(t.date(t.token.date)))])],1),e("q-item-section",{attrs:{side:""}},[e("q-btn",{attrs:{label:t.token.customer.name,"text-color":"white","no-caps":"",flat:"",padding:"0"},on:{click:function(e){return t.$emit("action",["bill_customer",t.token])}}})],1)],1)],1)],1),e("q-list",{staticStyle:{"font-size":"0.75rem"},attrs:{separator:"",bordered:"",dense:""}},t._l(t.items,(function(s,i){return e("q-item",{key:"tgb-t-"+t.token.id+"-ti-"+s.id+"-idx-"+i},[e("q-item-section",{staticClass:"text-bold"},[e("q-item-label",[e("span",{staticClass:"text-positive"},[t._v(t._s(s.quantity)+"x")]),t._v(" "+t._s(s.item.name))])],1),e("q-item-section",[t._v(t._s(t.precision(s.price)))]),e("q-item-section",{staticClass:"text-bold text-positive",attrs:{side:""}},[t._v(t._s(t.precision(s.price*s.quantity)))])],1)})),1),e("q-card-section",{staticClass:"text-caption",attrs:{horizontal:""}},[e("q-card-section",{staticClass:"col"},[e("div",{staticClass:"flex justify-between"},[e("span",[t._v("Items ")]),e("span",{staticClass:"text-positive text-bold"},[t._v(t._s(t.items?t.items.length:0))])]),e("div",{staticClass:"flex justify-between"},[e("span",[t._v("Quantities ")]),e("span",{staticClass:"text-positive text-bold"},[t._v(t._s(t.quantities))])]),e("div",{staticClass:"flex justify-between"},[e("span",[t._v("Tax Type ")]),e("span",{staticClass:"text-positive text-bold"},[t._v(t._s(t.bill.nature||"-"))])])]),e("q-card-section",{staticClass:"col"},[e("div",{staticClass:"flex justify-between"},[e("span",[t._v("Total ")]),e("span",{staticClass:"text-bold text-positive"},[t._v(t._s(t.precision(t.total)))])]),e("div",{staticClass:"flex justify-between"},[e("span",[t._v("Discount ")]),e("span",{staticClass:"text-bold text-positive"},[t._v(t._s(t.precision(t.bill.discount)))])]),e("div",{staticClass:"flex justify-between"},[e("span",[t._v("Paid ")]),e("span",{staticClass:"text-bold text-positive"},[t._v(t._s(t.precision(t.bill.paid)))])])])],1),e("q-separator"),e("q-item-section",{staticClass:"text-center q-py-md"},[e("q-item-label",{staticClass:"text-weight-bolder",staticStyle:{"font-size":"1.5rem","line-height":"1rem !important"}},[t._v(t._s(t.precision(t.to_pay)))]),e("q-item-label",{staticClass:"text-capitalize",attrs:{caption:""}},[t._v("Payable")])],1),e("q-list",{staticClass:"bg-grey-2",attrs:{bordered:""}},[e("q-item",[e("q-item-section",[e("q-select",{attrs:{outlined:"",options:t.options,label:"Type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),e("q-item-section",[e("q-input",{attrs:{outlined:"",type:"number",label:"Amount"},on:{keyup:t.amount_percent},model:{value:t.amount,callback:function(e){t.amount=t._n(e)},expression:"amount"}})],1)],1)],1),e("q-card-actions",{staticClass:"q-px-lg",attrs:{align:"right"}},[e("q-btn",{attrs:{color:"red",dense:"",flat:"","no-caps":"",label:"Cancel Bill"},on:{click:t.cancel}}),e("q-space"),e("q-btn",{staticClass:"q-px-md",attrs:{label:"Add Payment",color:"positive",disabled:0===t.amount},on:{click:t.pay}})],1),e("BrowserPrintCardActions",{attrs:{token:t.token}}),e("q-inner-loading",{attrs:{showing:t.loading}},[e("q-spinner-facebook",{attrs:{color:"positive",size:"2em"}})],1),e("q-dialog",{attrs:{persistent:""},model:{value:t.cancel_confirm,callback:function(e){t.cancel_confirm=e},expression:"cancel_confirm"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center bg-red text-white"},[e("q-icon",{attrs:{name:"dangerous",color:"white",size:"md"}}),e("span",{staticClass:"q-ml-sm text-weight-bold"},[t._v("You are about to cancel a Bill, Are you sure??")])],1),e("q-card-actions",{staticClass:"q-py-lg",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Close",color:"primary"}}),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Confirm, Do Cancel!!",color:"red"},on:{click:function(e){return t.cancel(!0)}}})],1)],1)],1)],1)},a=[],n=(s("caad"),s("b1c1")),r=s("7fe1"),o=s("2943"),l=s("b56d"),c=s("232e"),d=s("36d9"),u={name:"BillMakePayment",components:{BrowserPrintCardActions:d["a"],ChefLayout:l["default"],TaxNatureSelectDropDown:o["a"],UserSelectDropDown:r["a"]},props:["bill"],data(){return{loading:!1,discount:0,tax:null,options:c["PaymentsTypes"],type:c["PaymentsTypes"][0],v_amount:0,cancel_confirm:!1}},computed:{token(){return _.get(this.bill,"token")},items(){return _.filter(_.get(this.token,"items"),(t=>"Cancelled"!==t.progress))},total(){return _.sumBy(this.items,(({price:t,quantity:e})=>t*e))},quantities(){return _.sumBy(this.items,(({quantity:t})=>t))},to_pay(){return _.subtract(this.bill.payable,this.bill.paid)},amount:{get(){return this.v_amount||this.to_pay},set(t){this.v_amount=_.toNumber(t)}}},methods:{precision:n["z"],date(t){return Object(n["o"])(t)?Object(n["D"])(t):Object(n["g"])(t)},amount_percent(t){Object(n["n"])(t.keyCode)&&(this.prv_per||_.includes(_.toString(this.amount),"."))&&setTimeout((()=>{this.$nextTick((()=>{this.amount=this.bill.payable*this.amount*.01,t.target.blur(),t.target.focus()}))}),250),this.prv_per=Object(n["n"])(t.keyCode)},pay(){if(this.loading=!0,0===this.amount)return alert("Enter paying amount.."+((this.loading=!1)||""));let t={bill:this.bill.id,amount:this.amount,type:this.type};post("payment","create",t).then((()=>this.v_amount=0)).catch().then((()=>this.loading=!1))},cancel(t){if(!0!==t)return this.cancel_confirm=!0;this.loading=!0;let e={bill:this.bill.id};post("bill","cancel",e).then().catch().finally((()=>this.loading=this.cancel_confirm=!1))}}},m=u,p=s("2877"),h=s("f09f"),b=s("d847"),f=s("1c1c"),g=s("66e5"),v=s("4074"),q=s("0170"),y=s("9c40"),k=s("a370"),x=s("eb85"),C=s("ddd8"),w=s("27f9"),Q=s("4b7e"),S=s("2c91"),I=s("74f7"),O=s("e669"),$=s("24e8"),D=s("0016"),j=s("7f67"),T=s("eebe"),B=s.n(T),P=Object(p["a"])(m,i,a,!1,null,null,null);e["a"]=P.exports;B()(P,"components",{QCard:h["a"],QBar:b["a"],QList:f["a"],QItem:g["a"],QItemSection:v["a"],QItemLabel:q["a"],QBtn:y["a"],QCardSection:k["a"],QSeparator:x["a"],QSelect:C["a"],QInput:w["a"],QCardActions:Q["a"],QSpace:S["a"],QInnerLoading:I["a"],QSpinnerFacebook:O["a"],QDialog:$["a"],QIcon:D["a"]}),B()(P,"directives",{ClosePopup:j["a"]})},3610:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-select",t._b({attrs:{options:t.modes},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}},"q-select",t.$attrs,!1))},a=[],n=(s("5319"),s("232e")),r={name:"KitchenTokenDisplayMode",props:["value"],computed:{append(){return this.$q.screen.width<768?"":" Mode"},modes(){return n["KitchenTokensDisplayMode"].map((t=>t+this.append))},mode:{get(){return this.value?this.value+this.append:_.first(this.modes)},set(t){this.$emit("input",t.replace(this.append,""))}}},mounted(){this.value||(this.mode=_.first(this.modes))}},o=r,l=s("2877"),c=s("ddd8"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=m.exports;u()(m,"components",{QSelect:c["a"]})},"36d9":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return t.browser_print&&(t.Kitchens.length||t.Bill)?e("q-card-actions",{staticClass:"bg-grey-1"},[t._l(t.Kitchens,(function(s){return e("q-chip",{key:"BPCA-K-"+s.id,attrs:{clickable:"",label:s.name,"icon-right":"receipt_long",color:"primary",outline:"",square:""},on:{click:function(e){return t.printKOT(s)}}})})),e("q-space"),t.Bill?e("q-chip",{attrs:{clickable:"",label:"Bill","icon-right":"print",color:"primary",outline:"",square:""},on:{click:t.printBill}}):t._e()],2):t._e()},a=[],n=s("d83e"),r={name:"BrowserPrintCardActions",props:["token","bill"],mixins:[n["a"]],computed:{Token(){return this.token?this.tokenToToken(this.token):this.billToToken(this.bill)},Bill(){return this.bill?this.billToBill(this.bill):this.tokenToBill(this.token)},Kitchens(){return _(this.Token.items).map("kitchen").filter().uniqBy("id").value()}},methods:{printBill(){this.BrowserPrint("bill",this.Bill.id)},printKOT({id:t}){this.BrowserPrint("kitchen",t,this.Token.id)}}},o=r,l=s("2877"),c=s("4b7e"),d=s("b047"),u=s("2c91"),m=s("eebe"),p=s.n(m),h=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=h.exports;p()(h,"components",{QCardActions:c["a"],QChip:d["a"],QSpace:u["a"]})},3758:function(t,e,s){"use strict";var i=s("2f62");e["a"]={computed:{...Object(i["b"])("tokens",["tokens"]),tokens_remote(){return _.filter(this.tokens,(({type:t,id:e})=>"Remote"===t&&!this.$store.getters["remote/is"]("tokens",parseInt(e))))},tokens_own(){return _.filter(this.tokens,(({type:t,id:e})=>"Remote"!==t||!this.$store.getters["remote/is"]("tokens",parseInt(e))))}}}},"3b1b":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"q-py-xs text-center text-white",class:t.cColor},["Dining"===t.token.type&&t.token.user?e("span",[t._v(t._s(t.token.user.name))]):t._e()]),e("CardImageTitle",{attrs:{image:t.src,title:t.token.seating?t.token.seating.name:t.token.customer?t.token.customer.name:t.token.type,caption:t.token.customer?t.token.seating?t.token.customer.name+", "+t.token.customer.phone:t.token.customer.phone:null,info:"Home Delivery"===t.token.type},on:{info:function(e){return t.$emit("action",["customer",t.token])}}}),e("q-card-actions",[e("q-badge",{staticClass:"q-pa-sm",attrs:{label:t.token.id}}),e("q-badge",{staticClass:"q-py-sm q-ml-xs",attrs:{label:t.token.type}}),e("q-badge",{staticClass:"q-py-sm q-ml-xs",attrs:{label:t.token.progress}}),e("q-space"),e("div",{staticClass:"q-gutter-x-xs"},[e("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.token_items_selected.length,expression:"token_items_selected.length"}],attrs:{loading:t.TIS_loading,icon:"how_to_reg",color:"primary",size:"sm",padding:"xs"},on:{click:t.serve_selected_token_items}}),t.bill?t._e():e("q-btn",{attrs:{icon:"receipt_long",color:"secondary",size:"sm",padding:"xs"},on:{click:function(e){return t.$emit("action",["Home Delivery"===t.token.type?"delivery_bill":"bill",t.token])}}}),t.can_pay?e("q-btn",{attrs:{icon:"payments",color:"positive",size:"sm",padding:"xs"},on:{click:function(e){return t.$emit("action",["payment",t.token])}}}):t._e(),t.can_update?e("q-btn",{attrs:{icon:"rule",color:"warning",size:"sm",padding:"xs"},on:{click:function(e){return t.$emit("action",["items",t.token])}}}):t._e()],1)],1),e("OrderSummaryWaiterOrderItemsList",{attrs:{token:t.token,noserve:t.noserve,selected:t.token_items_selected},on:{select:t.token_item_select}}),e("BrowserPrintCardActions",{attrs:{token:t.token}})],1)},a=[],n=(s("5319"),s("a861")),r=s("43fa"),o=s("f567"),l=s("232e"),c=s("b1c1"),d=s("cae8"),u=s("4092"),m=s("1379"),p=s("626b"),h=s("36d9"),b={name:"OrderSummaryReceptionistOrder",components:{BrowserPrintCardActions:h["a"],OrderSummaryItemsManage:m["a"],PaymentCollectCard:u["a"],CustomerDetailCard:d["a"],CardImageTitle:r["a"],OrderSummaryWaiterOrderItemsList:n["a"]},data(){return{manage_mode:!1,bill_generate_mode:!1,info:!1,collect_payment_mode:!1}},mixins:[p["a"]],props:["token","noserve"],computed:{image(){let t=this.token.type;return"Dining"===t?this.token.seating.image:"Home Delivery"===t&&this.token.customer?this.token.customer.image:o["a"][_.toLower(t).replace(/\s*/g,"")]},src(){return Object(c["i"])(this.image)},cColor(){return"bg-"+l["DiningTypeColor"][this.token.type]},bill(){return _.get(this.token,"bill")},can_pay(){return this.bill&&"Paid"!==_.get(this.bill,"progress")},can_update(){if(!this.bill)return!0;let t=_.snakeCase(`Enable Billed ${this.token.type} Token Update`);return!0===Object(c["B"])(settings(t))||!1!==Object(c["B"])(settings(t))&&!0===Object(c["B"])(settings("enable_billed_token_update"))}},methods:{popup_width:c["y"]}},f=b,g=s("2877"),v=s("f09f"),q=s("a370"),y=s("4b7e"),k=s("58a8"),x=s("2c91"),C=s("9c40"),w=s("eebe"),Q=s.n(w),S=Object(g["a"])(f,i,a,!1,null,null,null);e["a"]=S.exports;Q()(S,"components",{QCard:v["a"],QCardSection:q["a"],QCardActions:y["a"],QBadge:k["a"],QSpace:x["a"],QBtn:C["a"]})},"3cdb":function(t,e,s){"use strict";s("caad");var i=function(){var t=this,e=t._self._c;return e("q-card",[e("q-bar",{staticClass:"text-white q-py-sm",class:"bg-"+t.clr,staticStyle:{"font-size":"0.8rem"}},[e("q-icon",{attrs:{name:"account_tree",size:"xs",left:""}}),e("span",{staticClass:"text-bold"},[t._v("New Order Details")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:""}})],1),e("q-card-section",{staticClass:"q-gutter-y-xs"},[t.hide.includes("type")?t._e():e("q-select",{attrs:{outlined:"","input-debounce":"0",options:t.types,label:"Select Type"},model:{value:t.params.type,callback:function(e){t.$set(t.params,"type",e)},expression:"params.type"}}),!t.hide.includes("seating")&&t.required.includes("Seating")?e("SeatSelectDropDown",{attrs:{"error-message":"For Dining Seat Selection is Mandatory",error:t.seat_error,"hide-bottom-space":"",outlined:"","input-debounce":"0",label:"Select Seat"},model:{value:t.seat,callback:function(e){t.seat=e},expression:"seat"}}):t._e(),!t.hide.includes("price_list")&&t.required.includes("PriceList")?e("PriceListSelectDropDown",{attrs:{outlined:"","input-debounce":"0",label:"Select Price List",get:"id"},model:{value:t.params.price_list,callback:function(e){t.$set(t.params,"price_list",e)},expression:"params.price_list"}}):t._e(),!t.hide.includes("user")&&t.required.includes("Waiter")?e("WaiterSelectDropDown",{attrs:{outlined:"","input-debounce":"0",label:"Select Waiter",get:"id"},model:{value:t.params.user,callback:function(e){t.$set(t.params,"user",e)},expression:"params.user"}}):t._e(),t.required.includes("Customer")?e("OrderCustomer",{attrs:{get:"id",outlined:""},model:{value:t.params.customer,callback:function(e){t.$set(t.params,"customer",e)},expression:"params.customer"}}):t._e()],1),e("q-card-actions",{staticClass:"bg-grey-2",attrs:{align:"right"}},[e("q-btn",{attrs:{"icon-right":"forward",color:t.clr,label:"Proceed"},on:{click:t.proceed}})],1)],1)},a=[],n=(s("14d9"),s("9061")),r=s("e925"),o=s("5632"),l=s("9708"),c=s("232e"),d={name:"OrderNewBasic",components:{PriceListSelectDropDown:n["a"],WaiterSelectDropDown:r["a"],SeatSelectDropDown:o["a"],OrderCustomer:l["a"]},props:["color","after"],data(){return{params:{type:"Dining",seating:null,customer:null,price_list:null,user:null},seat:null,types:["Dining","Home Delivery","Take Away"],hide:[],validate:!1}},computed:{required(){return c["OrderTypeRequiredFields"][this.params.type||"Dining"]},clr(){return this.color||"cyan"},attrs(){return _.pick(this.$attrs,_.keys(this.params))},seat_error(){return!!this.validate&&("Dining"===this.params.type&&!this.params.seating)}},methods:{init(t){let e=this;_.forEach(t,(function(t,s){void 0!==t&&e.hide.push(s),e.params[s]=t}))},typeChange(t){this.params.seating=_.get(this.attrs,"seating",null),this.params.user=_.get(this.attrs,"user",null),"Dining"!==t&&this.setPriceList(t),this.params.customer||(this.params.customer=_.get(settings("default_customer",t),"id",null))},setPriceList(t){let e=_.snakeCase(t+" Price List");if(!_.has(this.$store.state.public,e)){let s=_.get(this.$store.getters["prices/prices_of_type"](t),"id",null);s&&this.$store.commit("public",{[e]:s})}this.params.price_list=_.get(this.$store.state.public,e,void 0)},proceed(){this.validate=!0,this.seat_error||(this.validate=!1,this.$router.push({name:"order_new",params:{seat:!1,after:this.after,...this.params}}))}},watch:{seat({id:t,price_list:e}){this.params.seating=t,this.params.price_list=e},"params.type":{immediate:!0,handler:"typeChange"},"params.price_list":function(t){let e=_.snakeCase(this.params.type+" Price List");this.$store.state.public[e]!==parseInt(t)&&this.$store.commit("public",{[e]:parseInt(t)})}},created(){this.init(this.$attrs)}},u=d,m=s("2877"),p=s("f09f"),h=s("d847"),b=s("0016"),f=s("2c91"),g=s("9c40"),v=s("a370"),q=s("ddd8"),y=s("4b7e"),k=s("7f67"),x=s("eebe"),C=s.n(x),w=Object(m["a"])(u,i,a,!1,null,null,null);e["a"]=w.exports;C()(w,"components",{QCard:p["a"],QBar:h["a"],QIcon:b["a"],QSpace:f["a"],QBtn:g["a"],QCardSection:v["a"],QSelect:q["a"],QCardActions:y["a"]}),C()(w,"directives",{ClosePopup:k["a"]})},"3f08":function(t,e,s){"use strict";e["a"]={data(){return{OSA_mode:null,OSA_Object:null}},computed:{OSA_CB(){return new Object({mode:this.OSA_mode,item:this.OSA_Object})}},methods:{OSA_action(t){t&&_.isArray(t)&&2===_.size(t)&&(this.OSA_mode=t[0],this.OSA_Object=t[1])},OSA_action_done(){this.OSA_mode=null,this.OSA_Object=null}}}},4064:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-card",{attrs:{flat:""}},[e("q-card-section",{ref:"hd",attrs:{horizontal:""}},[e("q-card-section",{staticClass:"col-8 q-pa-none q-pr-xs"},[e("QuickOrderCodeDisplay",{attrs:{code:t.code,quantity:t.quantity,mode:t.mode,title:t.item_name}})],1),e("q-responsive",{staticClass:"col-4 q-pa-none"},[e("QuickOrderItemsTotal",{attrs:{items:t.items,prices:t.prices}})],1)],1),e("q-card-section",[e("q-scroll-area",{style:{height:t.items_height+"px"}},[t.items?e("QuickOrderItemsDisplay",{attrs:{items:t.items,prices:t.prices,prop:t.item_prop}}):t._e()],1)],1),e("q-card-section",{ref:"nk",staticClass:"fixed-bottom bg-white q-pt-none"},[e("q-separator"),e("q-bar",{staticClass:"bg-transparent justify-between items-center"},[e("q-toggle",{staticStyle:{"font-size":"0.65rem","line-height":"1"},attrs:{label:"Quantity Fix",dense:"",size:"xs"},model:{value:t.quantity_fix,callback:function(e){t.quantity_fix=e},expression:"quantity_fix"}}),e("div",{staticClass:"flex items-center"},[e("span",{staticClass:"q-mr-sm",staticStyle:{"font-size":"0.65rem","line-height":"1"}},[t._v("Item Prop: ")]),e("q-select",{attrs:{options:t.props,borderless:""},model:{value:t.item_prop,callback:function(e){t.item_prop=e},expression:"item_prop"}})],1)],1),e("NumericKeypad",{attrs:{disabled:!t.item},on:{enter:t.mode_change,done:function(e){return t.$emit("done")}},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1)],1)},a=[],n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row justify-around"},[e("div",{staticClass:"col-3 q-gutter-xs column"},[e("NumericKey",{staticClass:"col",attrs:{label:"1"},on:{click:t.keypress}}),e("NumericKey",{staticClass:"col",attrs:{label:"4"},on:{click:t.keypress}}),e("NumericKey",{staticClass:"col",attrs:{label:"7"},on:{click:t.keypress}}),e("NumericKey",{staticClass:"col",attrs:{label:t.keys[0]},on:{click:t.keypress}})],1),e("div",{staticClass:"col-3 q-gutter-xs column"},[e("NumericKey",{staticClass:"col",attrs:{label:"2"},on:{click:t.keypress}}),e("NumericKey",{staticClass:"col",attrs:{label:"5"},on:{click:t.keypress}}),e("NumericKey",{staticClass:"col",attrs:{label:"8"},on:{click:t.keypress}}),e("NumericKey",{staticClass:"col",attrs:{label:"0"},on:{click:t.keypress}})],1),e("div",{staticClass:"col-3 q-gutter-xs column"},[e("NumericKey",{staticClass:"col",attrs:{label:"3"},on:{click:t.keypress}}),e("NumericKey",{staticClass:"col",attrs:{label:"6"},on:{click:t.keypress}}),e("NumericKey",{staticClass:"col",attrs:{label:"9"},on:{click:t.keypress}}),e("NumericKey",{staticClass:"col",attrs:{icon:t.keys[1]},on:{click:t.keypress}})],1),e("div",{staticClass:"col-3 q-gutter-xs column"},[e("NumericKey",{staticClass:"col-3",attrs:{icon:t.keys[2]},on:{click:t.keypress}}),e("NumericKey",{staticClass:"col",attrs:{icon:t.keys[3],disabled:t.disabled||!t.value},on:{click:t.keypress}})],1)])},r=[],o=(s("caad"),function(){var t=this,e=t._self._c;return e("q-btn",{attrs:{label:t.label,icon:t.icon,color:"primary",padding:"md",push:""},on:{click:function(e){return t.$emit("click",void 0===t.label?t.icon:t.label)}}})}),l=[],c={name:"NumericKey",props:["label","icon"]},d=c,u=s("2877"),m=s("9c40"),p=s("eebe"),h=s.n(p),b=Object(u["a"])(d,o,l,!1,null,null,null),f=b.exports;h()(b,"components",{QBtn:m["a"]});var g=s("b1c1"),v={name:"NumericKeypad",components:{NumericKey:f},props:["value","disabled"],data(){return{keys:["C","backspace","forward","subdirectory_arrow_left"],silent:!0!==Object(g["B"])(settings("quick_mode_tap_sound"))}},computed:{number:{get(){return this.value},set(t){this.$emit("input",_.toNumber(t)||0)}}},methods:{keypress(t){return this.silent||Object(g["C"])(),t===this.keys[0]?this.clear():t===this.keys[1]?this.number=_.toString(this.number).slice(0,_.size(_.toString(this.number))-1):t===this.keys[2]?this.$emit("done",this.number):t===this.keys[3]?this.$emit("enter",this.number):void(this.number=_.toString(this.number)+_.toString(t))},clear(){this.number=""},docListen(t){return[0,1,2,3,4,5,6,7,8,9,"0","1","2","3","4","5","6","7","8","9"].includes(t.key)?this.keypress(_.toInteger(t.key)):["Enter","+","=","Tab"].includes(t.key)&&!t.ctrlKey?this.keypress(this.keys[3]):["Enter","\n"].includes(t.key)&&t.ctrlKey?this.keypress(this.keys[2]):["b","B","Backspace"].includes(t.key)?this.keypress(this.keys[1]):["c","C","Delete","Escape"].includes(t.key)?this.keypress(this.keys[0]):void 0},docListenKeyup(t){["Backspace","Delete","Escape","Tab"].includes(t.key)&&this.docListen(t)},eventManage(t){this.$q.platform.is.desktop&&(t("keypress",this.docListen),t("keyup",this.docListenKeyup))}},created(){this.eventManage(document.addEventListener)},beforeDestroy(){this.eventManage(document.removeEventListener)}},q=v,y=Object(u["a"])(q,n,r,!1,null,null,null),k=y.exports,x=function(){var t=this,e=t._self._c;return e("q-card",{staticClass:"bg-primary text-white text-center"},[e("q-card-section",{staticClass:"q-py-xs text-caption text-uppercase",staticStyle:{"line-height":"1","font-size":"0.65rem"}},[t._v(t._s(t.mode))]),e("q-separator",{attrs:{color:"grey-1"}}),e("q-card-section",{staticClass:"text-weight-bolder text-h3 q-py-sm"},[t._v(t._s(t.display))]),e("q-separator",{attrs:{color:"grey-1"}}),e("q-card-section",{staticClass:"q-py-xs text-caption text-uppercase",staticStyle:{"line-height":"1","font-size":"0.65rem"}},[t._v(t._s(t.title||"-"))])],1)},C=[],w={name:"QuickOrderCodeDisplay",props:["code","quantity","mode","title"],computed:{display(){return _.get(this,this.mode||"code")}}},Q=w,S=s("f09f"),I=s("a370"),O=s("eb85"),$=Object(u["a"])(Q,x,C,!1,null,null,null),D=$.exports;h()($,"components",{QCard:S["a"],QCardSection:I["a"],QSeparator:O["a"]});var j=s("2f62"),T=function(){var t=this,e=t._self._c;return e("q-card",{staticClass:"text-center text-primary"},[e("q-card-section",{staticClass:"q-py-xs text-caption text-uppercase",staticStyle:{"line-height":"1","font-size":"0.65rem"}},[t._v("TOTAL")]),e("q-separator"),e("q-card-section",{staticClass:"text-weight-bolder text-h5 q-py-md"},[t._v(t._s(t.total))]),e("q-separator"),e("q-card-section",{staticClass:"q-py-xs text-caption text-uppercase",staticStyle:{"line-height":"1","font-size":"0.65rem"}},[t._v("ITEMS: "+t._s((t.items||[]).length))])],1)},B=[],P=s("43fa"),N={name:"QuickOrderItemsTotal",components:{CardImageTitle:P["a"]},props:["items","prices"],computed:{total(){return _.sumBy(this.items,(({item:t,quantity:e})=>_.toNumber(_.get(this.prices,t)*e)))},quantities(){return _.sumBy(this.items,"quantity")}}},z=N,A=Object(u["a"])(z,T,B,!1,null,null,null),L=A.exports;h()(A,"components",{QCard:S["a"],QCardSection:I["a"],QSeparator:O["a"]});var K=function(){var t=this,e=t._self._c;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.count,expression:"count"}],staticClass:"row text-caption text-primary text-weight-bold"},[e("div",{staticClass:"col"},[t._v("#")]),e("div",{staticClass:"col"},[t._v("Code")]),e("div",{staticClass:"col-7"},[t._v("Details")]),e("div",{staticClass:"col-2 text-right"},[t._v("Total")])]),t._l(t.products,(function(s,i){return e("div",{key:"qoid-i-"+s.item+"-"+i,staticClass:"row text-caption text-primary"},[e("div",{staticClass:"col"},[t._v(t._s(t.count-i))]),e("div",{staticClass:"col"},[t._v(t._s(s.prop))]),e("div",{staticClass:"col-7"},[t._v(t._s(s.quantity)+"x "+t._s(s.price)+" "+t._s(s.name))]),e("div",{staticClass:"col-2 text-right"},[t._v(t._s(s.amount))])])}))],2)},E=[],M={name:"QuickOrderItemsDisplay",components:{CardImageTitle:P["a"]},props:["items","prices","prop"],computed:{...Object(j["d"])("items",{item_master:"data"}),products(){return _.map(this.items,this.item_details).reverse()},count(){return _.size(this.products)}},methods:{item_details(t){let e=t.item,s=_.get(this.item_master,[e,"name"]),i=_.get(this.item_master,[e,this.prop]),a=Object(g["z"])(_.get(this.prices,e)),n=Object(g["z"])(a*t.quantity),r=Object(g["i"])(_.get(this.item_master,[e,"image"]));return Object.assign({},t,{name:s,prop:i,price:a,amount:n,img:r})}}},R=M,F=s("1c1c"),U=s("66e5"),H=s("4074"),V=s("0170"),Y=s("cb32"),G=s("068f"),W=Object(u["a"])(R,K,E,!1,null,null,null),X=W.exports;h()(W,"components",{QList:F["a"],QItem:U["a"],QItemSection:H["a"],QItemLabel:V["a"],QAvatar:Y["a"],QImg:G["a"]});var J={name:"QuickOrder",components:{QuickOrderItemsDisplay:X,QuickOrderItemsTotal:L,QuickOrderCodeDisplay:D,NumericKeypad:k},props:["items","price_list"],data(){return{mode:"code",code:0,quantity:1,quantity_fresh:!0,code_fresh:!0,items_height:100}},computed:{...Object(j["d"])("items",{props:t=>_.map(t.prop,"name"),items_master:"data"}),number:{set(t){let e=this.mode,s=e+"_fresh";this[e]=this[s]?_.toNumber(_.toString(t).split("").pop(),this[s]=!1):t},get(){return _.get(this,this.mode)}},quantity_fix:{set(t){this.$store.commit("public",{quantity_fix:t})},get(){return _.get(this.$store.state.public,"quantity_fix",settings("quick","quantity_fix"))}},item_prop:{set(t){this.$store.commit("public",{item_prop:t})},get(){return _.get(this.$store.state.public,"item_prop",settings("quick","item_prop"))}},items_keyed(){return _.mapKeys(this.items_master,(t=>_.toInteger(t[this.item_prop])))},item(){return _.get(this.items_keyed,_.toInteger(this.code))},item_name(){return _.get(this.item,"name")},prices(){return _.get(this.$store.getters["prices/items"],this.price_list,this.price_zero())}},methods:{price_zero(){return _.fromPairs(_.map(this.items,(({item:t})=>[t,0])))},def(){this.code=this.quantity_fix?this.code:0,this.quantity=1,this.quantity_fresh=!0,this.code_fresh=!0},mode_change(t){this[this.mode]=t,("code"!==this.mode||this.item)&&("quantity"===this.mode&&this.def(this.send_item(_.toInteger(t))),this.mode=_.get({code:"quantity",quantity:"code"},this.mode),"quantity"===this.mode&&this.quantity_fix&&this.mode_change(1))},send_item(t){if(!(t<=0)&&this.item)return this.$emit("item",this.item),this.send_item(t-1)}},mounted(){setTimeout((t=>t.items_height=window.innerHeight-75-t.$refs["hd"].$el.offsetHeight-t.$refs["nk"].$el.offsetHeight),1e3,this)}},Z=J,tt=s("0e51"),et=s("4983"),st=s("d847"),it=s("9564"),at=s("ddd8"),nt=Object(u["a"])(Z,i,a,!1,null,null,null);e["a"]=nt.exports;h()(nt,"components",{QCard:S["a"],QCardSection:I["a"],QResponsive:tt["a"],QScrollArea:et["a"],QSeparator:O["a"],QBar:st["a"],QToggle:it["a"],QSelect:at["a"]})},4092:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return t.bill?e("q-card",[e("q-bar",{staticClass:"bg-positive text-white"},[e("q-icon",{staticClass:"q-mr-md",attrs:{name:"payments"}}),e("span",{staticClass:"text-bold",staticStyle:{"font-size":"0.75rem"}},[t._v("Add Payment")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",rounded:"",flat:"",dense:""}})],1),e("q-card-section",{staticClass:"bg-grey-1"},[e("q-list",{attrs:{dense:""}},[e("q-item",[e("q-item-section",{attrs:{side:""}},[e("q-item-label",{attrs:{caption:""}},[t._v("Bill: "+t._s(t.bill.id))]),e("q-item-label",[t._v(t._s(t.bill.customer.name))])],1),e("q-item-section",[t._v("   ")]),e("q-item-section",{attrs:{side:""}},[e("q-item-label",{attrs:{caption:""}},[t._v("Token: "+t._s(t.bill.token.id))]),e("q-item-label",[t._v(t._s(t.bill.token.date_human))])],1)],1)],1)],1),e("q-list",{attrs:{separator:"",dense:""}},[t._l(t.bill.contents,(function(s,i){return e("q-item",{key:"bcp-"+t.bill.id+"ci-"+i},[e("q-item-section",{attrs:{side:""}},[t._v(t._s(i+1))]),e("q-item-section",[t._v(t._s(s.quantity)+"x "+t._s(t.precision(s.price)))]),e("q-item-section",[t._v(t._s(s.name))]),e("q-item-section",{staticClass:"text-bold",attrs:{side:""}},[t._v(t._s(t.precision(t.total(s))))])],1)})),e("q-item",[e("q-item-section",{staticClass:"text-bold q-my-md"},[e("q-item-label",[t._v("Sub Total")]),t.discount?e("q-item-label",[t._v("Discount")]):t._e(),t.paid?e("q-item-label",[t._v("Paid")]):t._e()],1),e("q-item-section",{staticClass:"text-bold q-my-md",attrs:{side:""}},[e("q-item-label",{staticClass:"text-positive"},[t._v(t._s(t.precision(t.bill.amount)))]),t.discount?e("q-item-label",[t._v(t._s(t.precision(t.bill.discount)))]):t._e(),t.paid?e("q-item-label",[t._v(t._s(t.precision(t.bill.paid)))]):t._e()],1)],1),e("q-separator"),e("q-card-section",{staticClass:"text-center"},[e("div",{staticClass:"text-bold text-h5 text-positive"},[t._v(t._s(t.precision(t.bill.balance)))]),e("div",{staticClass:"text-grey-6",staticStyle:{"font-size":"0.8rem","line-height":"0.55rem"}},[t._v("Net Payable")])]),e("q-card-actions",{staticClass:"row items-center q-col-gutter-x-xs bg-grey-1"},[e("PaymentTypeSelectDropDown",{staticClass:"col",attrs:{outlined:"",label:"Type"},model:{value:t.params.type,callback:function(e){t.$set(t.params,"type",e)},expression:"params.type"}}),e("q-input",{staticClass:"col",attrs:{type:"number",outlined:"",label:"Amount"},model:{value:t.params.amount,callback:function(e){t.$set(t.params,"amount",t._n(e))},expression:"params.amount"}}),e("div",[e("q-btn",{attrs:{color:"positive",label:"Pay",padding:"md lg",loading:t.loading},on:{click:t.pay}})],1)],1)],2)],1):t._e()},a=[],n=s("b1c1"),r=s("232e"),o=s("9afe"),l={name:"PaymentCollectCard",components:{PaymentTypeSelectDropDown:o["a"]},props:["bill"],data(){return{PaymentsTypes:r["PaymentsTypes"],params:{type:"Cash",amount:0},loading:!1}},computed:{discount(){return _.toNumber(this.bill.discount)},paid(){return _.toNumber(this.bill.paid)},balance(){return _.toNumber(this.bill.balance)}},methods:{precision:n["z"],total({price:t,quantity:e}){return _.toNumber(t)*_.toNumber(e)},pay(){if(this.loading=!0,!this.params.amount)return this.loading=!1;post("payment","create",this.params).then(this.done)},done(){this.$emit("paid"),this.loading=!1}},created(){this.params.bill=this.bill.id,this.params.amount=_.toNumber(this.bill.balance)}},c=l,d=s("2877"),u=s("f09f"),m=s("d847"),p=s("0016"),h=s("2c91"),b=s("9c40"),f=s("a370"),g=s("1c1c"),v=s("66e5"),q=s("4074"),y=s("0170"),k=s("eb85"),x=s("4b7e"),C=s("27f9"),w=s("7f67"),Q=s("eebe"),S=s.n(Q),I=Object(d["a"])(c,i,a,!1,null,null,null);e["a"]=I.exports;S()(I,"components",{QCard:u["a"],QBar:m["a"],QIcon:p["a"],QSpace:h["a"],QBtn:b["a"],QCardSection:f["a"],QList:g["a"],QItem:v["a"],QItemSection:q["a"],QItemLabel:y["a"],QSeparator:k["a"],QCardActions:x["a"],QInput:C["a"]}),S()(I,"directives",{ClosePopup:w["a"]})},"40f6":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-drawer",{staticClass:"bg-grey-3",staticStyle:{"z-index":"-5000"},attrs:{side:"right",value:!0,mini:t.miniState,"mini-to-overlay":"",width:200,breakpoint:200,bordered:"",elevated:""}},[e("q-scroll-area",{staticClass:"fit",staticStyle:{"padding-bottom":"56px"}},[e("q-list",{attrs:{padding:"",separator:""}},[e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"",active:""},on:{click:function(e){t.miniState=!t.miniState}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{attrs:{"text-color":"white",size:"md",icon:"menu",rounded:"",color:"primary"}})],1),e("q-item-section",[t._v("Groups")])],1),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.sel({id:0})}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{attrs:{"text-color":"white",size:"md",rounded:"",color:t.is_sel({id:0})?"secondary":"primary"}},[t._v("A")])],1),e("q-item-section",[t._v("All")])],1),t._l(t.groups,(function(s){return e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:"gsb-g-"+s.id,attrs:{clickable:""},on:{click:function(e){return t.sel(s)}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{attrs:{"text-color":"white",size:"md",rounded:"",color:t.is_sel(s)?"secondary":"primary"}},[t._v(t._s(s.name.slice(0,1).toUpperCase()))])],1),e("q-item-section",[t._v(t._s(s.name))])],1)}))],2)],1)],1)},a=[],n=(s("caad"),s("2f62")),r=s("b1c1"),o={name:"GroupStickyButton",props:["value","type"],data(){return{miniState:!0}},computed:{type_name(){return this.type&&"Dining"!==this.type?_.snakeCase([this.type,"Menu"].join(" ")):null},...Object(n["d"])({menus:t=>Object(r["a"])(t.menus.data),selected(t){return this.type_name?_.get(t.public,this.type_name,[]):t.menus.s_items},group_master:t=>Object(r["a"])(t.groups.data)}),group_ids(){let t=this.selected||[],e=t.length>0?_.flatMap(_.filter(this.menus,(({id:e})=>_.includes(t,e))),"groups"):[];return _.get(settings("menu",this.type),"groups",e)},groups(){return Object(r["w"])(this.group_master,this.group_ids)}},methods:{is_sel({id:t}){return _.toSafeInteger(this.value)===_.toInteger(t)},sel({id:t}){this.$emit("input",t),this.miniState=!0}}},l=o,c=s("2877"),d=s("9404"),u=s("4983"),m=s("1c1c"),p=s("66e5"),h=s("4074"),b=s("cb32"),f=s("714f"),g=s("eebe"),v=s.n(g),q=Object(c["a"])(l,i,a,!1,null,null,null);e["a"]=q.exports;v()(q,"components",{QDrawer:d["a"],QScrollArea:u["a"],QList:m["a"],QItem:p["a"],QItemSection:h["a"],QAvatar:b["a"]}),v()(q,"directives",{Ripple:f["a"]})},"43fa":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-img",{attrs:{basic:"",src:t.image}},[t.title?e("div",{staticClass:"absolute-bottom"},[e("div",{staticClass:"text-subtitle2 text-center",domProps:{textContent:t._s(t.title)}}),t.caption?e("div",{staticClass:"text-caption text-center",staticStyle:{"line-height":"0.65"},domProps:{textContent:t._s(t.caption)}}):t._e()]):t._e(),void 0!==t.info?e("span",{staticClass:"absolute-top-right bg-transparent q-pr-xs q-pt-xs"},[e("q-btn",{staticStyle:{transform:"rotate(180deg)"},attrs:{icon:"error_outline",flat:"",round:"",padding:"0",size:"md",color:"white",dense:""},on:{click:function(e){return e.stopPropagation(),t.$emit("info",!0)}}})],1):t._e()])},a=[],n={name:"CardImageTitle",props:["image","title","info","caption"]},r=n,o=s("2877"),l=s("068f"),c=s("9c40"),d=s("eebe"),u=s.n(d),m=Object(o["a"])(r,i,a,!1,null,null,null);e["a"]=m.exports;u()(m,"components",{QImg:l["a"],QBtn:c["a"]})},"460a":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-card",{staticStyle:{"font-size":"0.8rem"},attrs:{flat:"",square:""}},[t.report_text&&t.report_image?e("q-card-section",{staticClass:"q-py-none print-only",attrs:{horizontal:""}},[e("q-card-section",{staticClass:"col-5 flex flex-center"},[e("q-img",{staticStyle:{"max-height":"5rem"},attrs:{src:t.report_image,"img-style":{backgroundPosition:"left center"},contain:""}})],1),e("q-card-section",{staticClass:"col-7 flex justify-end items-center"},[e("pre",{staticClass:"text-right"},[t._v(t._s(t.report_text))])])],1):t.report_text||t.report_image?e("q-card-section",{staticClass:"q-py-none text-center print-only"},[t.report_text?e("pre",{staticClass:"text-center"},[t._v(t._s(t.report_text))]):t._e(),t.report_image?e("q-img",{staticClass:"text-center q-mb-sm",staticStyle:{"max-height":"5rem"},attrs:{src:t.report_image,contain:""}}):t._e()],1):t._e(),e("q-card-section",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"title"}],staticClass:"bg-blue-grey-10 text-white text-bold q-py-sm"},[t._v(t._s(t.title))]),e("ReportHead",{directives:[{name:"show",rawName:"v-show",value:t.head,expression:"head"}],attrs:{data:t.head}}),e("ReportTable",t._b({attrs:{data:t.table}},"ReportTable",t.$attrs,!1)),e("ReportFoot",{attrs:{data:t.foot}}),e("q-card-section",{staticClass:"q-pa-none q-pb-none"},[e("div",{staticClass:"col-12 q-px-xl q-py-xs text-center bg-grey-1",staticStyle:{"font-size":"0.50rem"}},[t._v(t._s(t.footer))])])],1)},a=[],n=function(){var t=this,e=t._self._c;return e("q-table",{staticClass:"no-shadow",attrs:{data:t.records,columns:t.columns,dense:"",bordered:"","table-header-class":"bg-blue-grey-10 text-white",square:"",pagination:{rowsPerPage:0},"hide-pagination":""},scopedSlots:t._u([t._l(t.html_slots,(function(s){return{key:s,fn:function(s){return[e("q-td",{attrs:{props:s},domProps:{innerHTML:t._s(s.value)}})]}}}))],null,!0)})},r=[],o=(s("caad"),{name:"ReportTable",props:["data","right","center","index","html"],computed:{records(){return void 0===this.index?this.data:_.map(this.data,((t,e)=>Object.assign({},{"#":e+1},t)))},columns(){return _.map(_.first(this.records),((t,e)=>_.zipObject(["name","field","sortable","label","align"],[e,e,!1,e,_.includes(this.right,e)?"right":_.includes(this.center,e)?"center":"left"])))},html_slots(){return this.html?_.map(this.html,this.dynamicSlotName):[]}},methods:{dynamicSlotName(t){return"body-cell-"+t}}}),l=o,c=s("2877"),d=s("eaac"),u=s("db86"),m=s("eebe"),p=s.n(m),h=Object(c["a"])(l,n,r,!1,null,null,null),b=h.exports;p()(h,"components",{QTable:d["a"],QTd:u["a"]});var f=function(){var t=this,e=t._self._c;return e("q-list",{attrs:{dense:"",separator:""}},t._l(t.data,(function(s,i){return e("q-item",{key:t.hKey(i),attrs:{dense:""}},[e("q-item-section",[e("q-item-label",{staticClass:"text-bold"},[t._v(t._s(i))])],1),e("q-item-section",{attrs:{side:""}},[t._v(t._s(s))])],1)})),1)},g=[],v=(s("5319"),{name:"ReportHead",props:["data"],methods:{hKey(t){return _.toLower(t).replace(/\s/g,"")}}}),q=v,y=s("1c1c"),k=s("66e5"),x=s("4074"),C=s("0170"),w=Object(c["a"])(q,f,g,!1,null,null,null),Q=w.exports;p()(w,"components",{QList:y["a"],QItem:k["a"],QItemSection:x["a"],QItemLabel:C["a"]});var S=function(){var t=this,e=t._self._c;return e("q-card-section",{staticClass:"q-pa-none q-pb-none"},[e("div",{staticClass:"row"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.data,expression:"data"}],staticClass:"col-xs-12 col-sm-6 offset-xs-0 offset-sm-6",staticStyle:{"border-left":"1px solid #DDDDDD"}},[e("q-list",{staticStyle:{"font-size":"0.75rem"},attrs:{dense:"",separator:""}},t._l(t.data,(function(s,i){return e("q-item",{key:t.hKey(i),attrs:{dense:""}},[e("q-item-section",[e("q-item-label",{staticClass:"text-bold"},[t._v(t._s(i))])],1),e("q-item-section",{staticClass:"text-bold text-black",attrs:{side:""}},[t._v(t._s(s))])],1)})),1)],1)])])},I=[],O={name:"ReportFoot",props:["data"],methods:{hKey(t){return _.toLower(t).replace(/\s/g,"")}}},$=O,D=s("a370"),j=Object(c["a"])($,S,I,!1,null,null,null),T=j.exports;p()(j,"components",{QCardSection:D["a"],QList:y["a"],QItem:k["a"],QItemSection:x["a"],QItemLabel:C["a"]});var B=s("b1c1"),P={name:"ReportCard",components:{ReportFoot:T,ReportTable:b,ReportHead:Q},props:["head","foot","table","title"],data(){return{time:null}},computed:{report_text(){return settings("report_text_"+_.snakeCase(this.title))||settings("report_text")||null},report_image(){return N(settings("_file_report_image_"+_.snakeCase(this.title))||settings("_file_report_image")||null)},footer(){return`Report generated by ${_USER.name} on ${this.time} using Smart Kitchen.`}},watch:{table:{immediate:!0,deep:!0,handler(){this.time=Object(B["E"])("ddd Do MMM YYYY @ hh:mm:ss A")}}}};function N(t){return t?location.origin+"/"+t:null}var z=P,A=s("f09f"),L=s("068f"),K=Object(c["a"])(z,i,a,!1,null,null,null);e["a"]=K.exports;p()(K,"components",{QCard:A["a"],QCardSection:D["a"],QImg:L["a"]})},"47ac":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",[e("Masonry",{attrs:{items:t.page_items,width:"180"},scopedSlots:t._u([{key:"item",fn:function(s){return[e("ItemSelectCard",{attrs:{id:s.id,price_list:t.price_list,quantity:t.item_quantities&&t.item_quantities[s.id]?t.item_quantities[s.id]:0,position:s.identity},on:{selected:function(e){return t.$emit("item",e)},quantity:function(e){return t.$emit("quantity",e)}}})]}}])}),t.pages>1?e("q-page-sticky",{attrs:{position:"bottom-left",offset:t.offset}},[e("q-fab",{directives:[{name:"touch-pan",rawName:"v-touch-pan.prevent.mouse",value:t.move,expression:"move",modifiers:{prevent:!0,mouse:!0}}],attrs:{label:"Pages","vertical-actions-align":"center",color:"indigo","hide-icon":"",direction:"up",glossy:"",push:""},model:{value:t.pages_show,callback:function(e){t.pages_show=e},expression:"pages_show"}},t._l(t.pages,(function(s){return e("q-fab-action",t._b({key:"gis-p-"+s,attrs:{padding:"sm",label:s,square:"",glossy:"",push:""},on:{click:function(e){t.page=s}}},"q-fab-action",t.fab_attrs(s),!1))})),1)],1):t._e()],1)},a=[],n=s("b1c1"),r=s("7a7c"),o=s("c624"),l=s("2f62"),c=(s("caad"),s("bf7f")),d={mixins:[c["a"]],data(){return{KO_Mode:0,KO_ItemIndex:-1,KO_Begin:!1}},methods:{KO_Reset(t){this.$store.commit("public",{selected_item_position:-1}),this.KO_Mode=0,this.KO_ItemIndex=-1,this.KO_Begin=!1,t&&this.$store.commit("public",{clear_filter:!0,focus_filter:!0})},KPC(t){if(["Enter","\n"].includes(t.key)&&t.ctrlKey)return this.$emit("proceed");if(this.filter){if(0===this.KO_Mode){if("Delete"!==t.key&&"Escape"!==t.key||this.KO_Reset(!0),"Backspace"===t.key&&this.KO_Reset(),"Enter"!==t.key)return;if("Enter"===t.key)return this.KO_Mode=1,this.KO_ItemIndex++,this.KO_Begin=!1,this.$store.commit("public",{selected_item_position:this.KO_ItemIndex})}if(1===this.KO_Mode){if("Enter"===t.key)return void(this.KO_Begin?this.KO_Reset(!0):this.$store.commit("public",{selected_item_position:++this.KO_ItemIndex}));if("Escape"===t.key)return this.$store.commit("public",{focus_filter:!0}),this.KO_Reset();[0,1,2,3,4,5,6,7,8,9,"0","1","2","3","4","5","6","7","8","9","Backspace","ArrowDown","ArrowUp"].includes(t.key)&&(this.KO_Begin=!0)}}}}},u={name:"GroupItemsSelect",components:{Masonry:o["a"],ItemSelectCard:r["a"]},props:["selected","filter","price_list","type","item_quantities"],mixins:[d],data(){return{offset:[12,65],pages_show:!1,page:1}},computed:{type_name(){return this.type&&"Dining"!==this.type?_.snakeCase([this.type,"Menu"].join(" ")):null},...Object(l["d"])({item_master:t=>t.items.data,group_master:t=>t.groups.data,menus(t){return this.type_name?_.get(t.public,this.type_name,[]):t.menus.s_items}}),items_per_page(){return this.$store.getters["settings/items_per_page"]},group_items(){return this.selected?_(_.get(this.group_master,[_.toInteger(this.selected),"items"],[])).map((t=>this.item_master[_.toInteger(t)])).filter(["status","Active"]).value():_.isEmpty(this.menus)?[]:this.menu_items(this.menus[0])},filter_search_keys(){return settings("items_search_fields",this.type)},filtered_items(){return this.filter?_.filter(this.group_items,(t=>Object(n["r"])(t,this.filter_search_keys,this.filter))):this.group_items},pages(){return _.ceil(_.size(this.filtered_items)/this.items_per_page)},page_items(){return _.slice(this.filtered_items,(this.page-1)*this.items_per_page,this.page*this.items_per_page)}},methods:{menu_items(t){let e=_.get(this.$store.state.menus.data,[t,"groups"]),s=_.uniq(_.flatMap(e,(t=>_.get(this.group_master,[t,"items"]))));return _(s).map((t=>_.get(this.item_master,[t]))).filter(["status","Active"]).value()},fab_attrs(t){return this.page===t?{disable:!0,color:"secondary"}:{color:"indigo"}},move(t){this.offset=[this.offset[0]+t.delta.x,this.offset[1]-t.delta.y]}},watch:{filter(t,e){!e&&t&&(this.page=1)},selected(){this.page=1},pages(t){t<this.page&&(this.page=t||1)}}},m=u,p=s("2877"),h=s("de5e"),b=s("c294"),f=s("72db"),g=s("75c3"),v=s("eebe"),q=s.n(v),y=Object(p["a"])(m,i,a,!1,null,null,null);e["a"]=y.exports;q()(y,"components",{QPageSticky:h["a"],QFab:b["a"],QFabAction:f["a"]}),q()(y,"directives",{TouchPan:g["a"]})},"514b":function(t,e,s){"use strict";e["a"]={computed:{quick:{get(){return _.get(this.$store.state.public,"quick",settings("quick"))},set(t){this.$store.commit("public",{quick:t})}}}}},5632:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-select",t._b({attrs:{options:t.options,value:t.optValue},on:{input:t.doEmit}},"q-select",t.$attrs,!1))},a=[],n=s("9ee2"),r=s("2071"),o={name:"SeatSelectDropDown",mixins:[n["a"],r["a"]],computed:{options(){return _.map(this.seats,(t=>Object.assign({},t,{label:this.getName(t),value:t.id})))}},methods:{getName(t){return this.name?this.name(t):[t.name," (",t.status,")"].join("")}}},l=o,c=s("2877"),d=s("ddd8"),u=s("eebe"),m=s.n(u),p=Object(c["a"])(l,i,a,!1,null,null,null);e["a"]=p.exports;m()(p,"components",{QSelect:d["a"]})},5843:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return void 0===t.div?e("q-item-section",[e("q-item-label",{staticClass:"text-uppercase",class:"text-"+t.color,staticStyle:{"font-size":"0.65rem","line-height":"0rem !important"},attrs:{caption:""}},[t._v(t._s(t.label))]),e("q-item-label",{staticClass:"text-bold",staticStyle:{"font-size":"0.75rem"},attrs:{caption:""}},[t._t("default")],2)],1):e("div",[e("div",{staticClass:"text-uppercase",class:"text-"+t.color,staticStyle:{"font-size":"0.65rem","line-height":"0rem !important"},attrs:{caption:""}},[t._v(t._s(t.label))]),e("div",{staticClass:"text-bold",staticStyle:{"font-size":"0.75rem"},attrs:{caption:""}},[t._t("default")],2)])},a=[],n={name:"ItemDetailStackLeft",props:["div","label","color"]},r=n,o=s("2877"),l=s("4074"),c=s("0170"),d=s("eebe"),u=s.n(d),m=Object(o["a"])(r,i,a,!1,null,null,null);e["a"]=m.exports;u()(m,"components",{QItemSection:l["a"],QItemLabel:c["a"]})},"58d1":function(t,e,s){"use strict";var i=s("2f62"),a=s("3758");e["a"]={mixins:[a["a"]],computed:{...Object(i["b"])("bills",["bills"]),token_bill(){return _(this.bills).filter((t=>"Cancelled"!==t.progress)).keyBy((t=>_.get(t,["token","id"]))).value()}}}},"5ab9":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return void 0!==t.lazy?e("q-input",t._b({ref:"filter_input",attrs:{label:t.label||t.dLabel,outlined:"",dense:"",clearable:"",debounce:"500"},on:{input:function(e){return t.$emit("text",t.filter)}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},"q-input",t.$attrs,!1)):void 0!==t.blur?e("q-input",t._b({ref:"filter_input",attrs:{label:t.label||t.dLabel,outlined:"",dense:"",clearable:""},on:{blur:function(e){return t.$emit("text",t.filter)}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},"q-input",t.$attrs,!1)):e("q-input",t._b({ref:"filter_input",attrs:{label:t.label||t.dLabel,outlined:"",dense:"",clearable:""},on:{input:function(e){return t.$emit("text",t.filter)}},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},"q-input",t.$attrs,!1))},a=[],n={name:"FilterInputText",props:["label","lazy","blur"],data(){return{filter:"",dLabel:"Filter Items"}},computed:{clear_filter(){return _.get(this.$store.state.public,"clear_filter",!1)},focus_filter(){return _.get(this.$store.state.public,"focus_filter",!1)}},watch:{clear_filter(t){t&&(this.$store.commit("public",{clear_filter:!1}),this.filter="",this.$emit("text",""))},focus_filter(t){t&&(this.$store.commit("public",{focus_filter:!1}),this.$refs["filter_input"].$el.focus())}}},r=n,o=s("2877"),l=s("27f9"),c=s("eebe"),d=s.n(c),u=Object(o["a"])(r,i,a,!1,null,null,null);e["a"]=u.exports;d()(u,"components",{QInput:l["a"]})},"5cc1":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-select",t._b({attrs:{options:t.options,value:t.optValue},on:{input:t.doEmit}},"q-select",t.$attrs,!1))},a=[],n=s("2071"),r={name:"ItemSelectDropDown",mixins:[n["a"]],computed:{options(){return _.map(this.$store.state.items.data)}}},o=r,l=s("2877"),c=s("ddd8"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=m.exports;u()(m,"components",{QSelect:c["a"]})},"5dee":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-input",t._b({scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"},on:{"before-hide":function(e){return t.$refs["time_pop"].show()}}},[e("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm:ss","today-btn":""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Ok",color:"primary",flat:""},on:{click:function(e){return t.$emit("input",t.date)}}})],1)])],1)],1),e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[e("q-popup-proxy",{ref:"time_pop",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm:ss"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[e("div",{staticClass:"row items-center justify-end"},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Ok",color:"primary",flat:""},on:{click:function(e){return t.$emit("input",t.date)}}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"q-input",t.$attrs,!1))},a=[],n=s("b1c1"),r={name:"DateTime",props:["value"],data(){return{date:null}},created(){this.date=this.value||Object(n["E"])("YYYY-MM-DD HH:mm:ss",new Date)},watch:{date:{immediate:!0,handler(t){this.$emit("input",t)}}}},o=r,l=s("2877"),c=s("27f9"),d=s("0016"),u=s("7cbe"),m=s("52ee"),p=s("9c40"),h=s("ca78"),_=s("7f67"),b=s("eebe"),f=s.n(b),g=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=g.exports;f()(g,"components",{QInput:c["a"],QIcon:d["a"],QPopupProxy:u["a"],QDate:m["a"],QBtn:p["a"],QTime:h["a"]}),f()(g,"directives",{ClosePopup:_["a"]})},"626b":function(t,e,s){"use strict";s("14d9");e["a"]={data(){return{token_items_selected:[],TIS_loading:!1}},methods:{token_item_select({id:t}){let e=_.toInteger(t),s=_.indexOf(this.token_items_selected,e);s>-1?this.token_items_selected.splice(s,1):this.token_items_selected.push(e)},serve_selected_token_items(){if(this.TIS_loading=!0,!this.token_items_selected.length)return this.TIS_loading=!1;post("token","served",{id:this.token_items_selected}).then((()=>this.token_items_selected.splice(0,this.token_items_selected.length))).catch().finally((()=>this.TIS_loading=!1))}}}},"67ed":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return t.silent&&!t.isInPwaMode&&t.isPwaInstallable?e("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"install_mobile"},on:{click:t.prompt}}):t.isInPwaMode?t._e():e("q-dialog",{attrs:{persistent:""},model:{value:t.isCustomPromptVisible,callback:function(e){t.isCustomPromptVisible=e},expression:"isCustomPromptVisible"}},[e("q-card",{style:t.popup_width()},[e("q-bar",{staticClass:"bg-primary text-white q-py-lg"},[e("q-icon",{attrs:{name:"install_mobile"}}),e("div",[t._v("Install Smart Kitchen")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[e("q-tooltip",[t._v("Close")])],1)],1),e("q-card-section",[t._v("\n\t\t\tInstall Smart Kitchen to your device and feel the seamless experience. Smart Kitchen icon will be added to your Desktop/Home Screen\n\t\t")]),e("q-separator"),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Install",color:"primary"},on:{click:t.prompt}})],1)],1)],1)},a=[],n=s("b1c1"),r={name:"InstallPrompt",data(){return{displayMode:null,event:null,userChoiceOutcome:null,isCustomPromptDismissed:!1}},computed:{silent(){return"2"===settings("installable")},isInPwaMode(){return"standalone"===this.displayMode},isCustomPromptVisible:{get(){return this.event&&!this.isCustomPromptDismissed},set(){this.dismissCustomPrompt()}},isPwaInstallable(){return null!==this.event}},methods:{popup_width:n["y"],async prompt(){const t=await this.event.prompt();this.userChoiceOutcome=t.outcome},dismissCustomPrompt(){this.isCustomPromptDismissed=!0}},created(){let t=this,e="browser tab";window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),t.event=e})),window.matchMedia("(display-mode: standalone)").addListener((t=>{t.matches&&(e="standalone"),this.displayMode=e})),navigator.standalone&&(e="standalone-ios"),window.matchMedia("(display-mode: standalone)").matches&&(e="standalone"),this.displayMode=e}},o=r,l=s("2877"),c=s("9c40"),d=s("24e8"),u=s("f09f"),m=s("d847"),p=s("0016"),h=s("2c91"),_=s("05c0"),b=s("a370"),f=s("eb85"),g=s("4b7e"),v=s("7f67"),q=s("eebe"),y=s.n(q),k=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=k.exports;y()(k,"components",{QBtn:c["a"],QDialog:d["a"],QCard:u["a"],QBar:m["a"],QIcon:p["a"],QSpace:h["a"],QTooltip:_["a"],QCardSection:b["a"],QSeparator:f["a"],QCardActions:g["a"]}),y()(k,"directives",{ClosePopup:v["a"]})},"75b8":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"row items-center q-py-sm bg-grey-2"},[e("div",{staticClass:"text-h6"},[t._v("New Customer")]),e("q-space"),e("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){return t.$emit("close",null)}}})],1),e("q-card-section",{staticClass:"q-gutter-xs"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),e("q-input",{attrs:{dense:"",outlined:"",label:"Phone"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),e("q-input",{attrs:{dense:"",type:"email",outlined:"",label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),e("q-input",{attrs:{dense:"",type:"textarea",outlined:"",label:"Address"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),e("q-card-actions",{staticClass:"q-py-sm bg-grey-2",attrs:{align:"right"}},[e("q-btn",{staticClass:"text-grey",attrs:{color:"primary",label:"Reset",type:"reset",flat:""},on:{click:function(e){return e.preventDefault(),t.reset.apply(null,arguments)}}}),e("q-space"),e("q-btn",{attrs:{color:"primary",label:"Submit",type:"submit"},on:{click:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}})],1)],1)},a=[],n={name:"CustomerCreate",props:["param","param_value"],data(){return{name:"",phone:"",email:"",address:""}},methods:{reset(){this.name=this.phone=this.email=this.address=""},submit(){if(!this.name&&!this.phone)return;let t=_.zipObject(["name","phone","email","address"],[this.name,this.phone,this.email,this.address]);post("customer","create",t).then((t=>{this.$emit("customer",t),this.reset()}))}},created(){this[this.param]=this.param_value}},r=n,o=s("2877"),l=s("f09f"),c=s("a370"),d=s("2c91"),u=s("9c40"),m=s("27f9"),p=s("4b7e"),h=s("eebe"),b=s.n(h),f=Object(o["a"])(r,i,a,!1,null,null,null);e["a"]=f.exports;b()(f,"components",{QCard:l["a"],QCardSection:c["a"],QSpace:d["a"],QBtn:u["a"],QInput:m["a"],QCardActions:p["a"]})},"79d0":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return t.enabled&&t.orders.length?e("q-card",t._b({},"q-card",t.$attrs,!1),[t.title?e("q-card-section",{staticClass:"row justify-between text-bold text-white",class:"bg-"+t.clr},[e("div",[t._v(t._s(t.title))])]):t._e(),e("q-list",{attrs:{separator:""}},t._l(t.orders,(function(s,i){return e("q-item",{key:"ono-rd-or-"+s.id},[s.type?e("q-item-section",[e("q-item-label",[t._v(t._s(s.type))]),e("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.t2DateTime(s)))])],1):t._e(),s.price_list?e("q-item-section",[e("q-item-label",[t._v(t._s(t.pl_name(s)))]),e("q-item-label",{attrs:{caption:""}},[t._v("Price List")])],1):t._e(),s.seating?e("q-item-section",[e("q-item-label",[t._v(t._s(t.st_name(s)))]),e("q-item-label",{attrs:{caption:""}},[t._v("Seating")])],1):t._e(),s.customer?e("q-item-section",[e("q-item-label",[t._v(t._s(t.ct_name(s)))]),e("q-item-label",{attrs:{caption:""}},[t._v("Customer")])],1):t._e(),e("q-item-section",{attrs:{side:""}},[e("q-item-label",{staticClass:"text-bold text-subtitle1",class:"text-"+t.clr},[t._v(t._s(t.precision(t.it_total(s))))])],1),e("q-item-section",{attrs:{side:""}},[e("q-btn",{staticClass:"flip-horizontal",attrs:{icon:"reply",flat:"",dense:"",color:t.clr},on:{click:function(e){return t.confirm_order(i)}}})],1)],1)})),1),e("q-dialog",{attrs:{persistent:""},model:{value:t.confirm_pop,callback:function(e){t.confirm_pop=e},expression:"confirm_pop"}},[e("OnlineOrderConfirmCard",t._b({style:t.popup_width,attrs:{color:t.clr},on:{confirmed:function(e){t.confirm_pop=!1}}},"OnlineOrderConfirmCard",t.orders[t.confirm_idx],!1))],1)],1):t._e()},a=[],n=s("b1c1"),r=(s("caad"),function(){var t=this,e=t._self._c;return e("q-card",[e("q-bar",{staticClass:"text-white text-subtitle2",class:"bg-"+t.clr},[t._v("Confirm Pending Online Order"),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",dense:""}})],1),e("q-card-section",{staticClass:"q-gutter-sm flex items-center justify-between"},[e("q-badge",{staticClass:"q-pa-sm",attrs:{label:t.type,color:t.clr,outline:""}}),"Dining"===t.type?e("q-badge",{staticClass:"q-pa-sm",attrs:{label:t.st_name(t.$attrs),color:t.clr,outline:""}}):t._e(),["Sale","Take Away"].includes(t.type)?e("q-badge",{staticClass:"q-pa-sm",attrs:{label:"Price List: "+t.pl_name(t.$attrs),color:t.clr,outline:""}}):t._e(),"Home Delivery"===t.type?e("q-badge",{staticClass:"q-pa-sm",attrs:{label:t.ct_name(t.$attrs),color:t.clr,outline:""}}):t._e()],1),e("q-list",{attrs:{separator:"",bordered:""}},t._l(t.items,(function(s,i){return e("OnlineOrderItemEdit",{key:"oo-cc-il-i-"+s.item,attrs:{color:t.clr,idx:i,order:t.$attrs.id}})})),1),e("q-card-section",{staticClass:"text-center text-bold text-h6",class:"text-"+t.clr},[t._v(t._s(t.precision(t.it_total({items:t.items}))))]),e("q-separator"),t.waiter_select||!t.$attrs.customer?e("q-card-section",{staticClass:"q-gutter-y-xs"},[t.waiter_select?e("WaiterSelectDropDown",{attrs:{outlined:"",dense:"","input-debounce":"0",label:"Select Waiter",get:"id"},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}):t._e(),t.$attrs.customer?t._e():e("OrderCustomer",{attrs:{get:"id",outlined:"",dense:""},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}})],1):t._e(),e("q-card-actions",{staticClass:"bg-grey-2"},[e("q-btn",{attrs:{color:"red",icon:"delete",flat:""},on:{click:t.remove}}),e("q-space"),e("q-btn",{attrs:{color:t.clr,label:"Confirm & Create Token"},on:{click:t.create}})],1),e("q-dialog",{model:{value:t.remove_confirm,callback:function(e){t.remove_confirm=e},expression:"remove_confirm"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center"},[e("q-avatar",{attrs:{icon:"delete",color:"red","text-color":"white"}}),e("span",{staticClass:"q-ml-sm"},[t._v("You are about to cancel an order. Are you sure??")])],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"info"}}),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Yes, Cancel Order",color:"red"},on:{click:function(e){return t.remove(!0)}}})],1)],1)],1)],1)}),o=[],l={methods:{pl_name({price_list:t}){return _.get(this.$store.state.prices.list,[t,"name"])},st_name({seating:t}){return _.get(this.$store.state.seating.data,[t,"name"])},ct_name({customer:t}){return _.get(this.$store.state.customers.data,[t,"name"])},it_total({items:t}){return _.sumBy(t,(({rate:t,quantity:e})=>_.toNumber(t)*_.toNumber(e)))}}},c=function(){var t=this,e=t._self._c;return e("q-item",[e("q-item-section",{staticClass:"col-shrink text-bold",attrs:{avatar:""}},[t._v(t._s(t.idx+1))]),e("q-item-section",[e("q-item-label",{class:"text-"+t.clr,attrs:{caption:""}},[t._v("Rate: "+t._s(t.item.rate))]),e("q-item-label",{staticStyle:{"font-size":"0.75rem"}},[e("span",{staticClass:"text-bold",class:"text-"+t.clr},[t._v(t._s(t.item.quantity)+"x")]),t._v(" "+t._s(t.item.name))])],1),e("q-item-section",{attrs:{side:""}},[e("q-btn",{attrs:{icon:"edit",color:"amber",round:"",outline:""},on:{click:function(e){t.edit_mode=!0}}})],1),t.edit_mode?e("q-dialog",{attrs:{persistent:""},model:{value:t.show_edit,callback:function(e){t.show_edit=e},expression:"show_edit"}},[e("q-card",{style:t.popup_width},[e("q-bar",{staticClass:"text-white text-subtitle2",class:"bg-"+t.clr},[t._v(t._s(t.item.name)),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:""}})],1),e("q-card-section",[e("q-card-section",{staticClass:"q-gutter-xs"},[e("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Quantity"},model:{value:t.params.quantity,callback:function(e){t.$set(t.params,"quantity",t._n(e))},expression:"params.quantity"}}),e("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Delay in Minutes"},model:{value:t.params.delay,callback:function(e){t.$set(t.params,"delay",t._n(e))},expression:"params.delay"}}),e("q-input",{attrs:{dense:"",type:"textarea",outlined:"",label:"Narration if any"},model:{value:t.params.narration,callback:function(e){t.$set(t.params,"narration",e)},expression:"params.narration"}})],1)],1),e("q-card-actions",{staticClass:"bg-grey-1",attrs:{align:"right"}},[e("q-btn",{attrs:{label:"update",color:t.clr},on:{click:t.update}})],1)],1)],1):t._e()],1)},d=[],u={name:"OnlineOrderItemEdit",props:["color","order","idx"],data(){return{edit_mode:!1,show_edit:!1,params:{delay:0,narration:"",quantity:1},popup_width:Object(n["y"])()}},computed:{clr(){return this.color||"info"},order_details(){return _.get(this.$store.state.online.data,this.order)},item(){return _.get(this.order_details,["items",this.idx])}},methods:{update(){let t=_.defaults({},this.params,this.item),e=_.set(_.cloneDeep(this.order_details),["items",this.idx],t);this.$store.dispatch("online/update",{id:this.order,data:e},{root:!0}).then((()=>this.show_edit=!1))}},watch:{show_edit(t){t||setTimeout((t=>t.edit_mode=!1),250,this)},edit_mode(t){t&&setTimeout((t=>t.show_edit=!0),250,this)}},created(){_.forEach(this.params,((t,e)=>this.$set(this.params,e,_.get(this.item,e,null))))}},m=u,p=s("2877"),h=s("66e5"),b=s("4074"),f=s("0170"),g=s("9c40"),v=s("24e8"),q=s("f09f"),y=s("d847"),k=s("2c91"),x=s("a370"),C=s("27f9"),w=s("4b7e"),Q=s("7f67"),S=s("eebe"),I=s.n(S),O=Object(p["a"])(m,c,d,!1,null,null,null),$=O.exports;I()(O,"components",{QItem:h["a"],QItemSection:b["a"],QItemLabel:f["a"],QBtn:g["a"],QDialog:v["a"],QCard:q["a"],QBar:y["a"],QSpace:k["a"],QCardSection:x["a"],QInput:C["a"],QCardActions:w["a"]}),I()(O,"directives",{ClosePopup:Q["a"]});var D=s("e925"),j=s("9708"),T={name:"OnlineOrderConfirmCard",components:{OrderCustomer:j["a"],WaiterSelectDropDown:D["a"],OnlineOrderItemEdit:$},data(){return{user:"Waiter"===_USER.role?_USER.id:null,customer:null,remove_confirm:!1}},mixins:[l],props:["color","type","items"],computed:{clr(){return this.color||"info"},waiter_select(){return"Dining"===this.type&&"Waiter"!==_USER.role}},methods:{precision:n["z"],create(){let t={type:this.type,price_list:this.$attrs.price_list,seating:this.$attrs.seating,customer:this.customer,user:this.user,items:_.cloneDeep(this.items)};this.$store.dispatch("online/create",{reference:this.$attrs.id,params:t}).then((()=>this.$emit("confirmed")))},remove(t){!0===t&&this.$store.dispatch("online/remove",{reference:this.$attrs.id}).then((()=>this.$emit("cancelled"))),this.remove_confirm=!0}},created(){"Home Delivery"===this.type&&(this.customer=this.$attrs.customer)}},B=T,P=s("58a8"),N=s("1c1c"),z=s("eb85"),A=s("cb32"),L=Object(p["a"])(B,r,o,!1,null,null,null),K=L.exports;I()(L,"components",{QCard:q["a"],QBar:y["a"],QSpace:k["a"],QBtn:g["a"],QCardSection:x["a"],QBadge:P["a"],QList:N["a"],QSeparator:z["a"],QCardActions:w["a"],QDialog:v["a"],QAvatar:A["a"]}),I()(L,"directives",{ClosePopup:Q["a"]});const{GH75F:E,JI36A:M}=s("adfa").FEATURES;var R={name:"OnlineOrdersPendingList",components:{OnlineOrderConfirmCard:K},props:["title","color","only"],mixins:[l],data(){return{enabled:"Yes"===E,local:!M,reference:M,confirm_pop:!1,popup_width:Object(n["y"])(),confirm_idx:null}},computed:{orders(){return _.filter(this.$store.state.online.data,(({active:t,type:e,token:s})=>t&&(!this.only||this.only===e)&&!s))},clr(){return this.color||"purple"}},methods:{precision:n["z"],hKey(){return h_key("receptionist","online","order")},t2DateTime({time:t}){let e=Object(n["t"])()-t;return Object(n["E"])(e>86400?"hh:mm A (dddd)":"hh:mm A",1e3*_.toNumber(t))},confirm_order(t){this.confirm_pop=!0,this.confirm_idx=t}}},F=R,U=Object(p["a"])(F,i,a,!1,null,null,null);e["a"]=U.exports;I()(U,"components",{QCard:q["a"],QCardSection:x["a"],QList:N["a"],QItem:h["a"],QItemSection:b["a"],QItemLabel:f["a"],QBtn:g["a"],QDialog:v["a"]})},"7a7c":function(t,e,s){"use strict";s("caad");var i=function(){var t=this,e=t._self._c;return t.item?e("q-card",[e("q-card-section",{staticClass:"q-py-xs bg-teal"}),e("CardImageTitle",{staticStyle:{cursor:"pointer"},attrs:{title:t.item.name,image:t.image,info:"true"},on:{info:function(e){t.info=!t.info}},nativeOn:{click:function(e){return t.$emit("selected",t.item)}}}),t.info?e("q-card-section",{staticClass:"q-pa-none q-ma-none"},[e("q-card-actions",{staticClass:"q-pb-none",staticStyle:{cursor:"pointer"},attrs:{align:"right"},nativeOn:{click:function(e){return t.$emit("selected",t.item)}}},[e("q-badge",{staticClass:"q-py-sm q-px-md text-weight-bolder",attrs:{color:"positive",label:t.currency+t.price}})],1),t.kitchen_items.length?e("q-list",{staticStyle:{"font-size":"0.75rem"}},t._l(t.kitchen_items,(function(s){return e("q-item",{key:t.hKey(s)},[e("q-item-section",[e("q-item-label",[e("q-spinner-radio",{directives:[{name:"show",rawName:"v-show",value:t.live.includes(s.kitchen),expression:"live.includes(i_kitchen.kitchen)"}],staticClass:"q-ml-md absolute-top",attrs:{color:"positive",size:"0.6rem"}}),t._v(t._s(t.kName(s)))],1),e("q-item-label",{staticStyle:{"font-size":"0.6rem"},attrs:{caption:""}},[t._v("Duration: "+t._s(Math.ceil(s.duration/60))+" Min")]),t.pending(s)?e("q-item-label",{staticClass:"text-teal",staticStyle:{"font-size":"0.6rem"},attrs:{caption:""}},[t._v("Pending: "+t._s(t.pending(s))+" "),e("q-spinner-dots",{staticClass:"q-ml-xs"})],1):t._e()],1),e("q-item-section",{staticClass:"text-bold text-black",staticStyle:{"font-size":"0.9rem"},attrs:{side:""}},[t._v(t._s(s.stock))])],1)})),1):e("q-card-section",{staticClass:"text-caption text-center text-warning q-pa-none q-pt-xs",staticStyle:{"font-size":"0.65rem"}},[t._v("Not available in any active kitchens!!")]),t.item.detail?e("q-card-section",{staticClass:"q-pt-xs"},[e("div",{staticClass:"text-caption",staticStyle:{"font-size":"0.65rem","line-height":"0.8rem"}},[e("q-separator",{staticClass:"q-mb-sm"}),t._v(" "+t._s(t.item.detail)+" "),e("q-separator",{staticClass:"q-mt-sm"})],1)]):t._e(),e("q-card-section",{staticClass:"q-py-none"},[e("q-input",{ref:"item_quantity_input",attrs:{type:"number",outlined:"",dense:""},model:{value:t.qty,callback:function(e){t.qty=t._n(e)},expression:"qty"}}),e("q-slider",{attrs:{min:0,max:t.stock,label:"",color:"positive"},model:{value:t.qty,callback:function(e){t.qty=t._n(e)},expression:"qty"}})],1)],1):t._e()],1):t._e()},a=[],n=s("43fa"),r=s("2f62"),o=s("b1c1"),l={name:"ItemSelectCard",components:{CardImageTitle:n["a"]},props:["id","price_list","remote","quantity","position"],data(){return{info:!1,processing_status:["Accepted","Processing"]}},computed:{...Object(r["d"])({items:t=>t.items.data,prices:t=>t.prices.data,s_kitchens:function(t){return _(t.kitchens.data).filter((({cloud:t})=>t===(this.remote?"Yes":"No"))).keyBy((({id:t})=>_.toInteger(t))).value()},k_items:t=>t.kitchens.items,t_items:t=>_(t.tokens.items).flatMap().value()}),...Object(r["b"])("kitchens",["live"]),s_kitchen_ids(){return _.map(this.s_kitchens,(({id:t})=>_.toInteger(t)))},intID(){return _.toInteger(this.id)},intPL(){return _.toInteger(this.price_list)},item(){return _.get(this.items,this.intID)},image(){return Object(o["i"])(this.item.image)},currency(){return settings("currency_symbol")||""},price(){return this.price_list?_.toNumber(_.get(_.find(this.prices,this.matchItemPriceList),"price",0)):0},kitchen_items(){return _(this.k_items).flatMap().filter(["item",this.intID]).filter((({kitchen:t})=>_.includes(this.s_kitchen_ids,_.toInteger(t)))).value()},stock(){return _.sumBy(this.kitchen_items,"stock")},processing(){return _(this.t_items).filter((({item:t,progress:e})=>t===this.intID&&this.processing_status.includes(e))).value()},qty:{get(){return this.quantity||0},set(t){this.$emit("quantity",{quantity:_.toNumber(t),item:this.id})}},selected_item_position(){return _.get(this.$store.state.public,"selected_item_position",-1)}},methods:{hKey({id:t,kitchen:e}){return Object(o["e"])("isc",this.id,"kitchen",e,"stock",t)},matchItemPriceList({item:t,price_list:e}){return _.toInteger(t)===this.intID&&_.toInteger(e)===this.intPL},kName({kitchen:t}){return _.truncate(_.get(this.s_kitchens,[_.toInteger(t),"name"]),{length:15,omission:".."})},pending(t){return _.sumBy(this.processing,(({quantity:e,kitchen:s})=>_.toInteger(s)===t.kitchen?_.toNumber(e):0))}},watch:{selected_item_position:{deep:!0,handler(t){this.info=t===this.position,this.$nextTick((function(){setTimeout((()=>{let t=!(!this.$refs||!this.$refs["item_quantity_input"])&&_.get(this.$refs,["item_quantity_input","$el"],!1);t&&t.focus()}),150)}))}}}},c=l,d=s("2877"),u=s("f09f"),m=s("a370"),p=s("4b7e"),h=s("58a8"),b=s("1c1c"),f=s("66e5"),g=s("4074"),v=s("0170"),q=s("9569"),y=s("8380"),k=s("eb85"),x=s("27f9"),C=s("c1d0"),w=s("eebe"),Q=s.n(w),S=Object(d["a"])(c,i,a,!1,null,null,null);e["a"]=S.exports;Q()(S,"components",{QCard:u["a"],QCardSection:m["a"],QCardActions:p["a"],QBadge:h["a"],QList:b["a"],QItem:f["a"],QItemSection:g["a"],QItemLabel:v["a"],QSpinnerRadio:q["a"],QSpinnerDots:y["a"],QSeparator:k["a"],QInput:x["a"],QSlider:C["a"]})},"7e10":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-toggle",{attrs:{icon:"offline_bolt",color:"indigo"},model:{value:t.quick,callback:function(e){t.quick=e},expression:"quick"}})},a=[],n=s("514b"),r={name:"QuickToggle",mixins:[n["a"]]},o=r,l=s("2877"),c=s("9564"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=m.exports;u()(m,"components",{QToggle:c["a"]})},"7fe1":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-select",t._b({attrs:{options:t.options,value:t.optValue},on:{input:t.doEmit,clear:t.clear}},"q-select",t.$attrs,!1))},a=[],n=(s("caad"),s("2071")),r={name:"UserSelectDropDown",props:["role"],mixins:[n["a"]],computed:{options(){return _(this.$store.state.users.data).filter((({role:t})=>!this.role||(_.isArray(this.role)?this.role.includes(t):t===this.role))).map((t=>Object.assign({},t,{label:this.getName(t),value:t.id}))).value()}}},o=r,l=s("2877"),c=s("ddd8"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=m.exports;u()(m,"components",{QSelect:c["a"]})},"84ba":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-card",{staticClass:"no-shadow"},[e("q-card-section",{class:t.section_class},[e("div",{staticClass:"text-h4",staticStyle:{"font-weight":"bolder"}},[t._v(t._s(t.value)),t.icon?e("q-icon",{staticClass:"q-mr-md q-mt-md absolute-right",attrs:{color:t.icon_color,name:t.icon,size:"3.8rem"}}):t._e()],1),e("div",{staticClass:"text-subtitle2 text-uppercase",staticStyle:{"font-size":"0.75rem"}},[t._v(t._s(t.title||t.defaults.title))])]),t.to?e("q-card-actions",{class:t.action_class,attrs:{align:"center"}},[e("q-btn",{attrs:{size:"sm",flat:"",type:"a",to:t.to}},[t._v("View Detail "),e("q-icon",{staticClass:"q-ml-sm",attrs:{name:"double_arrow",size:"0.8rem"}})],1)],1):t._e()],1)},a=[],n={name:"DigitMetric",props:["bg","value","text","title","icon","to"],data(){return{defaults:{bg:"white",text:"black",title:"Title"}}},computed:{section_class(){return[].concat("bg-"+this.bg||!1).concat("text-"+this.text||!1)},action_class(){return[].concat("bg-"+(this.bg||this.defaults.bg)+"-9").concat("text-"+(this.text||this.defaults.text)).concat("q-pa-none")},icon_color(){return(this.bg||this.defaults.bg)+"-9"}}},r=n,o=s("2877"),l=s("f09f"),c=s("a370"),d=s("0016"),u=s("4b7e"),m=s("9c40"),p=s("eebe"),h=s.n(p),_=Object(o["a"])(r,i,a,!1,null,null,null);e["a"]=_.exports;h()(_,"components",{QCard:l["a"],QCardSection:c["a"],QIcon:d["a"],QCardActions:u["a"],QBtn:m["a"]})},9061:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-select",t._b({attrs:{options:t.options,value:t.optValue},on:{input:t.doEmit}},"q-select",t.$attrs,!1))},a=[],n=s("2071"),r={name:"PriceListSelectDropDown",mixins:[n["a"]],computed:{options(){return _(this.$store.state.prices.list).filter(["status","Active"]).map((t=>Object.assign({},t,{label:this.getName(t),value:t.id}))).value()}}},o=r,l=s("2877"),c=s("ddd8"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=m.exports;u()(m,"components",{QSelect:c["a"]})},9416:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return t.ordering?e("div",[e("q-page-sticky",{attrs:{position:"bottom-right",offset:t.offset}},[e("transition",{attrs:{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"}},[e("q-fab",{directives:[{name:"show",rawName:"v-show",value:t.fab,expression:"fab"},{name:"touch-pan",rawName:"v-touch-pan.prevent.mouse",value:t.move,expression:"move",modifiers:{prevent:!0,mouse:!0}}],attrs:{icon:"add","active-icon":"add",color:"primary",glossy:""},on:{click:function(e){t.fab=!1}}})],1)],1),e("q-dialog",{attrs:{persistent:"",value:!t.fab,"transition-show":"flip-down","transition-hide":"flip-up"},on:{hide:function(e){t.fab=!0}}},[e("OrderNewBasic",{style:t.popup_width(),attrs:{type:"Home Delivery",price_list:t.price_list,user:t.$route.meta.me.id,after:"orders"}})],1)],1):t._e()},a=[],n=s("b1c1"),r=s("3cdb"),o={name:"OrderNewFabDeliveryBoy",components:{OrderNewBasic:r["a"]},data(){return{fab:!0,offset:[24,24],customer:null}},computed:{ordering(){return!1!==Object(n["B"])(settings("delivery_boy_take_orders"))},price_list(){if(!_.has(this.$store.state.public,"home_delivery_price_list")){let t=_.get(settings("price_list","Home Delivery"),"id",null);t&&this.$store.commit("public",{home_delivery_price_list:t})}return _.get(this.$store.state.public,"home_delivery_price_list",void 0)}},methods:{popup_width:n["y"],move(t){this.offset=[this.offset[0]-t.delta.x,this.offset[1]-t.delta.y]}}},l=o,c=s("2877"),d=s("de5e"),u=s("c294"),m=s("24e8"),p=s("75c3"),h=s("eebe"),b=s.n(h),f=Object(c["a"])(l,i,a,!1,null,null,null);e["a"]=f.exports;b()(f,"components",{QPageSticky:d["a"],QFab:u["a"],QDialog:m["a"]}),b()(f,"directives",{TouchPan:p["a"]})},9527:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"power_settings_new"},on:{click:t.logout}})},a=[],n=s("2f62"),r=s("de36"),o=s("adfa"),l={name:"Logout",data(){return{me:parseInt(_USER.id)}},computed:{...Object(n["d"])("remote",["monitoring","data"]),...Object(n["b"])("kitchens",["assign","kitchen_full_timer"])},methods:{logout(){if(_.forEach(this.monitoring,(function(t){t&&t[0]&&t[0](),t&&t[1]&&t[1]()})),"Chef"===_USER.role){let t=this,e=_(this.assign[this.me]).mapKeys().mapKeys((t=>_.get(_.find(this.data,(({item:e,location:s,local_id:i})=>s===o["BRANCH_CODE"]&&"kitchens"===e&&i===t)),"reference",null))).value(),s=_(e).keys().filter((t=>t&&"null"!==t)).value(),i=this.kitchen_full_timer;if(!s.length)return t.nav();Object(r["f"])("kitchens",{__name__:s,operand:"in"}).then((function(s){s.forEach((function(s){let a=s.get("users"),n=s.id;if(_.has(e,n)&&_.has(i,e[n])&&i[e[n]]===t.me)return!!--size||t.nav();Object(r["h"])(s.ref,{users:Object(r["a"])(t.me),online:a.length>1}).then((()=>--size?null:t.nav()))}))})).catch(this.nav)}else this.nav()},nav(){location.href=LOGOUT}}},c=l,d=s("2877"),u=s("9c40"),m=s("eebe"),p=s.n(m),h=Object(d["a"])(c,i,a,!1,null,null,null);e["a"]=h.exports;p()(h,"components",{QBtn:u["a"]})},9708:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",[e("q-select",t._b({attrs:{"hide-selected":"","fill-input":"","use-input":"","input-debounce":"0",options:t.options,label:"Select Customer",clearable:""},on:{filter:t.filter,"new-value":t.createCustomer},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}},"q-select",t.$attrs,!1)),e("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.create_mode,callback:function(e){t.create_mode=e},expression:"create_mode"}},[e("CustomerCreate",{style:t.popup_width(400),attrs:{param:t.param,param_value:t.param_value},on:{close:t.closeCreate,customer:t.closeCreate}})],1)],1)},a=[],n=s("75b8"),r=s("b1c1"),o=s("2f62");const l=settings("customer_display_format")||"[name], [phone]";var c={name:"OrderCustomer",components:{CustomerCreate:n["a"]},props:["value","get"],data(){return{create_mode:!1,param:"name",param_value:"",options:[]}},computed:{...Object(o["d"])("customers",{customers:t=>_.filter(t.data,["status","Active"])}),customer_options(){return Object(r["v"])(this.customers,l)},customer:{get(){return void 0===this.value?null:void 0===this.get?this.value:_.find(this.customer_options,[this.get,this.value])},set(t){this.$emit("input",void 0===this.get?t:_.get(t,this.get,null))}}},methods:{popup_width:r["y"],filter(t,e){e((()=>{const e=(t||"").toLowerCase();this.options=e?this.customer_options.filter((t=>_.values(t).join(" ").toLowerCase().indexOf(e)>-1)):this.customer_options}))},createCustomer(t){this.param=_.toNumber(t)==t?"phone":"name",this.param_value=t,this.customer=null,this.create_mode=!0},closeCreate(t){this.create_mode=!1,this.customer=t?Object(r["u"])(t,l):null}},created(){this.options=this.customer_options},watch:{customer(t){t&&0===t.id&&(this.create_mode=!0)}}},d=c,u=s("2877"),m=s("ddd8"),p=s("24e8"),h=s("eebe"),b=s.n(h),f=Object(u["a"])(d,i,a,!1,null,null,null);e["a"]=f.exports;b()(f,"components",{QSelect:m["a"],QDialog:p["a"]})},"97b7":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"bg-grey-2 text-weight-bold flex justify-between items-center"},[e("div",[t._v("Items Price")]),e("div",{staticClass:"col-grow q-mx-xl gt-xs"},[e("q-slider",{attrs:{min:0,max:6,step:1,color:"black"},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}})],1),e("q-toggle",{attrs:{"checked-icon":"check",color:"red",label:"Show all items","unchecked-icon":"clear"},model:{value:t.all,callback:function(e){t.all=e},expression:"all"}})],1),e("q-card-section",[e("div",{staticClass:"row q-col-gutter-xs"},[e("div",{staticClass:"col-12"},[e("FilterInputText",{on:{text:function(e){t.filter=e}}})],1),t._l(t.items,(function({item:s,price:i,name:a},n){return n<40||t.all?e("div",{key:"plps-"+s,class:t.colCls},[e("q-input",{attrs:{label:a,type:"number",dense:"",outlined:"",value:i},on:{input:function(e){return t.update(s,e)}}})],1):t._e()}))],2)])],1)},a=[],n=s("2f62"),r=s("5ab9"),o=s("b1c1"),l={name:"AdministratorMasterPriceListPriceSet",components:{FilterInputText:r["a"]},props:["list"],data(){return{filter:"",updates:{},all:!1,size:0,size_chart:[null,1,2,3,4,6,12],screens:[999999,1500,1300,1100,900,700,0]}},computed:{...Object(n["d"])("items",{products:"data"}),colCls(){let t=this.size_chart[this.size||c(this.$q.screen.width)];return t?"col-"+t:"col-12"},lPrice(){return this.list?_(this.$store.state.prices.data).filter(["price_list",this.list]).mapKeys("item").mapValues((({price:t})=>_.toNumber(t))).value():{}},items(){return _(this.products).filter((t=>!this.filter||Object(o["r"])(t,["id","name","detail","prop1","prop2","prop3","prop4","prop5"],this.filter))).map((({id:t,name:e})=>Object.assign({},{item:t,price:this.getPrice(t),name:e}))).value()}},methods:{getPrice(t){return _.has(this.updates,t)?this.updates[t]:_.toNumber(_.get(this.lPrice,t,0))},update(t,e){this.$set(this.updates,t,_.toNumber(e)),this.$emit("input",this.updates)}},watch:{list(){this.updates={}}}};function c(t){let e=[999999,1500,1300,1100,900,700,0];for(let s in e)if(t>e[s])return s;return 1}var d=l,u=s("2877"),m=s("f09f"),p=s("a370"),h=s("c1d0"),b=s("9564"),f=s("27f9"),g=s("eebe"),v=s.n(g),q=Object(u["a"])(d,i,a,!1,null,null,null);e["a"]=q.exports;v()(q,"components",{QCard:m["a"],QCardSection:p["a"],QSlider:h["a"],QToggle:b["a"],QInput:f["a"]})},"9afe":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-select",t._b({attrs:{options:t.options,value:t.optValue,label:t.label||"Payment Type"},on:{input:t.doEmit}},"q-select",t.$attrs,!1))},a=[],n=s("2071"),r=s("232e"),o={name:"PaymentTypeSelectDropDown",props:["label"],mixins:[n["a"]],computed:{options(){return r["PaymentsTypes"]}}},l=o,c=s("2877"),d=s("ddd8"),u=s("eebe"),m=s.n(u),p=Object(c["a"])(l,i,a,!1,null,null,null);e["a"]=p.exports;m()(p,"components",{QSelect:d["a"]})},"9b77":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-form",{staticClass:"q-gutter-y-xs",on:{submit:()=>!1}},[e("div",{staticClass:"text-right"},[t.data?e("q-btn",{attrs:{label:"add new",color:"light-blue",disable:t.loading},on:{click:t.reset}}):t._e()],1),t._l(t.fields,(function(s,i,a){return["status"===s?e("q-select",{attrs:{options:["Active","Inactive"],label:t.title(i),outlined:""},model:{value:t.params[i],callback:function(e){t.$set(t.params,i,e)},expression:"params[field]"}}):"yesno"===s?e("q-select",{attrs:{options:["Yes","No"],label:t.title(i),outlined:""},model:{value:t.params[i],callback:function(e){t.$set(t.params,i,e)},expression:"params[field]"}}):"noyes"===s?e("q-select",{attrs:{options:["No","Yes"],label:t.title(i),outlined:""},model:{value:t.params[i],callback:function(e){t.$set(t.params,i,e)},expression:"params[field]"}}):"PL"===s?e("PriceListSelectDropDown",{attrs:{label:t.title(i),outlined:"",get:"id"},model:{value:t.params[i],callback:function(e){t.$set(t.params,i,e)},expression:"params[field]"}}):"seats_input"===s?e("SeatInputSeats",{attrs:{label:t.title(i),outlined:""},model:{value:t.params[i],callback:function(e){t.$set(t.params,i,e)},expression:"params[field]"}}):"tax_contents"===s?e("TaxContentManage",{attrs:{label:t.title(i)},model:{value:t.params[i],callback:function(e){t.$set(t.params,i,e)},expression:"params[field]"}}):"items_choose"===s?e("ItemsChoose",{attrs:{label:t.title(i)},model:{value:t.params[i],callback:function(e){t.$set(t.params,i,e)},expression:"params[field]"}}):"login_pin"===s?e("UserLoginPin",{attrs:{label:t.title(i),outlined:"",update:t.data?t.data[i]:null},model:{value:t.params[i],callback:function(e){t.$set(t.params,i,e)},expression:"params[field]"}}):"login_user"===s?e("UserLoginUserName",{attrs:{label:t.title(i),outlined:"",update:t.data?t.data[i]:null},model:{value:t.params[i],callback:function(e){t.$set(t.params,i,e)},expression:"params[field]"}}):"chef"===s?e("UserSelectDropDown",{attrs:{label:t.title(i),role:"Chef",get:"id",clearable:"",outlined:"",update:t.data?t.data[i]:null},model:{value:t.params[i],callback:function(e){t.$set(t.params,i,e)},expression:"params[field]"}}):"item_groups_choose"===s?e("ItemGroupsChoose",{attrs:{label:t.title(i)},model:{value:t.params[i],callback:function(e){t.$set(t.params,i,e)},expression:"params[field]"}}):"item_prices_set"===s?e("ItemPricesSet",{model:{value:t.params[i],callback:function(e){t.$set(t.params,i,e)},expression:"params[field]"}}):"item_kitchen_stocks"===s?e("ItemKitchenStocks",{model:{value:t.params[i],callback:function(e){t.$set(t.params,i,e)},expression:"params[field]"}}):e("q-input",{attrs:{type:s,label:t.title(i),outlined:""},model:{value:t.params[i],callback:function(e){t.$set(t.params,i,e)},expression:"params[field]"}})]})),t._t("default"),e("div",{staticClass:"row items-center justify-between"},[t.destroy&&t.data?e("q-btn",{staticClass:"q-mr-sm",attrs:{label:"Delete",color:"negative",icon:"delete",loading:t.loading},on:{click:function(e){return t.$emit("destroy",t.data)}}}):t._e(),t.data?t._e():e("q-btn",{staticClass:"q-mr-sm",attrs:{label:"Reset",color:"warning",icon:"reset_tv",loading:t.loading},on:{click:t.reset}}),e("q-btn",{staticClass:"col-grow",attrs:{label:t.data?"Update":"Submit",color:"light-blue",loading:t.loading},on:{click:function(e){return t.$emit("save",t.params)}}})],1)],2)},a=[],n=s("9061"),r=function(){var t=this,e=t._self._c;return e("q-select",t._b({attrs:{options:t.options,value:t.optValue,"use-chips":"",multiple:"","stack-label":"","use-input":""},on:{input:t.doEmit}},"q-select",t.$attrs,!1))},o=[],l=s("2071"),c={name:"SeatInputSeats",mixins:[l["a"]],computed:{optValue(){return _.isArray(this.value)?this.value:this.value?[this.value]:[]},options(){let t=0,e=_.flatMap(this.$store.state.seating.data,"seats"),s=_.map(Array(_.max(e)-_.min(e)+1+20),(()=>++t));return _.difference(s,e)}}},d=c,u=s("2877"),m=s("ddd8"),p=s("eebe"),h=s.n(p),b=Object(u["a"])(d,r,o,!1,null,null,null),f=b.exports;h()(b,"components",{QSelect:m["a"]});var g=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"bg-grey-2 text-bold"},[t._v(t._s(t.label||"Add/Edit Tax Contents"))]),e("q-card-section",{staticClass:"row q-col-gutter-xs"},t._l(t.contents,(function(s,i){return e("div",{key:"tcm-"+i,staticClass:"col-sm-4 col-md-3 col-lg-2 col-xl-1",class:t.colXSCls},[e("q-card",[e("q-card-section",{staticClass:"text-bold bg-grey-1"},[t._v(t._s(s.name))]),e("q-card-section",{staticClass:"text-caption text-center text-weight-bold"},[t._v("\n            "+t._s(s.nature||"-")),e("br"),t._v(t._s(s.percent)+"%\n          ")]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{attrs:{size:"xs",icon:"delete",color:"negative"},on:{click:function(e){return t.remove(i)}}}),e("q-btn",{attrs:{size:"xs",icon:"edit",color:"warning"},on:{click:function(e){return t.edit(i)}}})],1)],1)],1)})),0),e("q-card-actions",{staticClass:"bg-grey-1 q-px-md"},[e("div",{staticClass:"col-12 q-col-gutter-xs row"},[e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Name"},model:{value:t.fresh.name,callback:function(e){t.$set(t.fresh,"name",e)},expression:"fresh.name"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",label:"Nature"},model:{value:t.fresh.nature,callback:function(e){t.$set(t.fresh,"nature",e)},expression:"fresh.nature"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Percent"},model:{value:t.fresh.percent,callback:function(e){t.$set(t.fresh,"percent",t._n(e))},expression:"fresh.percent"}})],1),e("div",{staticClass:"col-3"},[e("q-btn",{staticClass:"full-width full-height",attrs:{dense:"",icon:"add",color:"secondary"},on:{click:t.add}})],1)])])],1)},v=[],q=(s("14d9"),{name:"TaxContentManage",props:["value","label"],data(){return{contents:[],fresh:{name:"",percent:"",nature:""}}},computed:{colXSCls(){return"col-xs-"+[12,6,4][_.toInteger(this.$q.screen.width/220)]}},methods:{add(){this.contents.push(_.clone(this.fresh)),_.forEach(this.fresh,((t,e)=>this.fresh[e]=""))},remove(t){return this.contents.splice(t,1)},edit(t){return _.forEach(this.remove(t)[0],((t,e)=>this.fresh[e]=t))}},watch:{contents:{deep:!0,immediate:!0,handler(t){return this.$emit("input",t)}},value:{deep:!0,immediate:!0,handler(t){this.contents=t||[]}}}}),y=q,k=s("f09f"),x=s("a370"),C=s("4b7e"),w=s("9c40"),Q=s("27f9"),S=Object(u["a"])(y,g,v,!1,null,null,null),I=S.exports;h()(S,"components",{QCard:k["a"],QCardSection:x["a"],QCardActions:C["a"],QBtn:w["a"],QInput:Q["a"]});s("caad");var O=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"text-weight-bold bg-grey-1 flex justify-between"},[e("div",[t._v(t._s(t.label||"Choose Items"))]),e("q-toggle",{attrs:{"checked-icon":"check",color:"red",label:"Items with Image","unchecked-icon":"clear"},model:{value:t.ims,callback:function(e){t.ims=e},expression:"ims"}})],1),e("q-card-section",[e("FilterInputText",{staticClass:"q-mb-sm",on:{text:function(e){t.fTxt=e}}}),t._l(t.items,(function(s,i){return i<t.init_load||t.delayed?e("q-chip",{key:"tic-"+s.id,attrs:{color:"secondary",outline:!t.chosen.includes(s.id),clickable:""},on:{click:function(e){return t.toggle(s)}}},[t.ims?e("q-avatar",[e("q-img",{attrs:{src:s.image}})],1):t._e(),t._v(t._s(s.name))],1):t._e()}))],2)],1)},$=[],D=s("2f62"),j=s("b1c1"),T=s("5ab9"),B={name:"ItemsChoose",components:{FilterInputText:T["a"]},data(){return{chosen:[],filter:"",ims:!1,init_load:100,delayed:!1}},props:["label","value"],computed:{...Object(D["d"])("items",{items({data:t}){return this.filter?_(t).filter(this.has).map(this.itmObj).value():_.map(t,this.itmObj)}})},methods:{fTxt(t){this.filter=t?t.toLowerCase():""},toggle({id:t}){let e=_.indexOf(this.chosen,t);e>-1?this.chosen.splice(e,1):this.chosen.push(t),this.$emit("input",this.chosen)},image(t){return Object(j["i"])(t)},itmObj({id:t,name:e,image:s}){return _.zipObject(["id","name","image"],[t,e,this.image(s)])},has({name:t}){return t.toLowerCase().includes(this.filter)}},watch:{value:{immediate:!0,deep:!0,handler(){this.chosen=_.clone(this.value?_.isArray(this.value)?this.value:[this.value]:[])}}},created(){this.items&&this.items.length>this.init_load&&setTimeout((t=>t.delayed=!0),1500,this)}},P=B,N=s("9564"),z=s("b047"),A=s("cb32"),L=s("068f"),K=Object(u["a"])(P,O,$,!1,null,null,null),E=K.exports;h()(K,"components",{QCard:k["a"],QCardSection:x["a"],QToggle:N["a"],QChip:z["a"],QAvatar:A["a"],QImg:L["a"]});var M=s("97b7"),R=s("bf8e"),F=function(){var t=this,e=t._self._c;return e("q-input",t._b({ref:"input",attrs:{type:"number",rules:t.rules,"lazy-rules":"",clearable:""},model:{value:t.v_pin,callback:function(e){t.v_pin=e},expression:"v_pin"}},"q-input",t.$attrs,!1))},U=[],H={name:"UserLoginPin",props:["value","update"],data(){return{pin:"",rules:[t=>!!t||"PIN Required",t=>4===t.length||"4 Digit",this.unique]}},computed:{pins(){return _.map(this.$store.state.users.data,"pin")},v_pin:{get(){return(this.pin||this.value).substr(-4)},set(t){this.pin=_.size(t)>4?t.substr(-4):t}}},methods:{unique(t){return Promise.resolve(this.update&&this.update===t||!this.pins.includes(t)||"PIN is already using by another user")}},watch:{pin(t){let e=this.$refs.input.validate(t);return _.isBoolean(e)?this.$emit("input",e?t:""):_.isObject(e)?e.then((e=>this.$emit("input",e?t:""))):void 0},value(t){this.v_pin=t}}},V=H,Y=Object(u["a"])(V,F,U,!1,null,null,null),G=Y.exports;h()(Y,"components",{QInput:Q["a"]});var W=function(){var t=this,e=t._self._c;return e("q-input",t._b({ref:"input",attrs:{rules:t.rules,"lazy-rules":"",clearable:""},model:{value:t.v_login,callback:function(e){t.v_login=e},expression:"v_login"}},"q-input",t.$attrs,!1))},X=[],J={name:"UserLoginUserName",props:["value","update"],data(){return{login:"",rules:[t=>!!t||"Login Required",this.unique]}},computed:{logins(){return _.map(this.$store.state.users.data,"login")},v_login:{get(){return this.login||this.value},set(t){this.login=t}}},methods:{unique(t){return Promise.resolve(this.update&&this.update===t||!this.logins.includes(t)||"This is already using by another user")}},watch:{login(t){let e=this.$refs.input.validate(t);return _.isBoolean(e)?this.$emit("input",e?t:""):_.isObject(e)?e.then((e=>this.$emit("input",e?t:""))):void 0},value(t){this.v_login=t}}},Z=J,tt=Object(u["a"])(Z,W,X,!1,null,null,null),et=tt.exports;h()(tt,"components",{QInput:Q["a"]});var st=s("7fe1"),it=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"text-weight-bold bg-grey-1 flex justify-between q-py-xs"},[e("div",[t._v(t._s(t.label||"Choose Groups"))])]),e("q-card-section",[e("FilterInputText",{staticClass:"q-mb-sm",on:{text:function(e){t.fTxt=e}}}),t._l(t.item_groups,(function(s){return e("q-chip",{key:"igc-"+s.id,attrs:{color:"secondary",outline:!t.groups.includes(s.id),clickable:"",label:s.name},on:{click:function(e){return t.toggle(s)}}})}))],2)],1)},at=[],nt={name:"ItemGroupsChoose",components:{FilterInputText:T["a"]},props:["value","label"],data(){return{fTxt:""}},computed:{all_item_groups(){return this.$store.state.groups.data},item_groups(){return this.fTxt?_.filter(this.all_item_groups,(t=>Object(j["r"])(t,["name"],this.fTxt))):this.all_item_groups},groups:{get(){return this.value||[]},set(t){this.$emit("input",t)}}},methods:{toggle({id:t}){let e=_.indexOf(this.groups,t);e>-1?this.groups.splice(e,1):this.groups.push(t)}}},rt=nt,ot=Object(u["a"])(rt,it,at,!1,null,null,null),lt=ot.exports;h()(ot,"components",{QCard:k["a"],QCardSection:x["a"],QChip:z["a"]});var ct=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"text-weight-bold bg-grey-1 flex justify-between q-py-xs"},[e("div",[t._v(t._s(t.label||"Set Prices"))])]),e("q-card-section",[e("div",{staticClass:"row q-col-gutter-xs"},t._l(t.price_lists,(function(s){return e("div",{key:"ips-"+s.id,class:t.colCls},[e("q-input",{attrs:{label:s.name,type:"number",dense:"",outlined:""},model:{value:t.prices[s.id],callback:function(e){t.$set(t.prices,s.id,t._n(e))},expression:"prices[pl.id]"}})],1)})),0)])],1)},dt=[],ut={name:"ItemPricesSet",props:["value","label"],data(){return{size:0,size_chart:[null,1,2,3,4,6,12],screens:[999999,1500,1300,1100,900,700,0]}},computed:{price_lists(){return this.$store.state.prices.list},colCls(){let t=this.size_chart[this.size||mt(this.$q.screen.width)];return t?"col-"+t:"col-12"},prices:{get(){return this.value},set(t){this.$emit("input",t)}}}};function mt(t){let e=[999999,1500,1300,1100,900,700,0];for(let s in e)if(t>e[s])return s;return 1}var pt=ut,ht=Object(u["a"])(pt,ct,dt,!1,null,null,null),_t=ht.exports;h()(ht,"components",{QCard:k["a"],QCardSection:x["a"],QInput:Q["a"]});var bt=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"text-weight-bold bg-grey-1 flex justify-between q-py-xs"},[e("div",[t._v(t._s(t.label||"Kitchen Stocks"))])]),e("q-list",t._l(t.kitchens,(function(s){return e("q-item",{key:"iks-"+s.id},[e("q-item-section",{attrs:{side:""}},[e("q-checkbox",{attrs:{val:s.id},model:{value:t.act_kitchens,callback:function(e){t.act_kitchens=e},expression:"act_kitchens"}})],1),e("q-item-section",[e("q-item-label",{staticClass:"text-bold"},[t._v(t._s(s.name))]),e("q-item-label",{staticClass:"row q-col-gutter-x-xs",attrs:{caption:""}},[e("q-input",{staticClass:"col",attrs:{outlined:"",dense:"",type:"number",label:"Stock"},model:{value:t.stocks[s.id]["stock"],callback:function(e){t.$set(t.stocks[s.id],"stock",t._n(e))},expression:"stocks[kitchen.id]['stock']"}}),e("q-input",{staticClass:"col",attrs:{outlined:"",dense:"",type:"number",label:"Duration"},model:{value:t.stocks[s.id]["duration"],callback:function(e){t.$set(t.stocks[s.id],"duration",t._n(e))},expression:"stocks[kitchen.id]['duration']"}}),e("q-select",{staticClass:"col",attrs:{outlined:"",dense:"",label:"Auto Process",options:["Yes","No"]},model:{value:t.stocks[s.id]["auto_process"],callback:function(e){t.$set(t.stocks[s.id],"auto_process",e)},expression:"stocks[kitchen.id]['auto_process']"}}),e("q-select",{staticClass:"col",attrs:{outlined:"",dense:"",label:"Auto Complete",options:["Yes","No"]},model:{value:t.stocks[s.id]["auto_complete"],callback:function(e){t.$set(t.stocks[s.id],"auto_complete",e)},expression:"stocks[kitchen.id]['auto_complete']"}})],1)],1)],1)})),1)],1)},ft=[];const gt=new Object({stock:100,duration:180,auto_process:"No",auto_complete:"No"});var vt={name:"ItemKitchenStocks",components:{FilterInputText:T["a"]},props:["value","label"],data(){return{v_stocks:null}},computed:{kitchens(){return this.$store.state.kitchens.data},stocks:{get(){return Object.assign({},this.v_stocks,this.value)},set(t){this.$emit("input",_.pick(t,this.act_kitchens))}},act_kitchens:{get(){return _(this.value).keys().map(_.toInteger).value()},set(t){this.$emit("input",_.pick(this.stocks,t))}}},created(){this.v_stocks=_(this.kitchens).mapKeys("id").mapValues((()=>_.cloneDeep(gt))).value()}},qt=vt,yt=s("1c1c"),kt=s("66e5"),xt=s("4074"),Ct=s("8f8e"),wt=s("0170"),Qt=Object(u["a"])(qt,bt,ft,!1,null,null,null),St=Qt.exports;h()(Qt,"components",{QCard:k["a"],QCardSection:x["a"],QList:yt["a"],QItem:kt["a"],QItemSection:xt["a"],QCheckbox:Ct["a"],QItemLabel:wt["a"],QInput:Q["a"],QSelect:m["a"]});const It={status:"Active",yesno:"Yes",noyes:"No"};var Ot={name:"MasterForm",components:{ItemKitchenStocks:St,ItemPricesSet:_t,ItemGroupsChoose:lt,UserSelectDropDown:st["a"],UserLoginUserName:et,UserLoginPin:G,KitchenSelectDropDown:R["a"],AdministratorMasterPriceListPriceSet:M["a"],ItemsChoose:E,TaxContentManage:I,SeatInputSeats:f,PriceListSelectDropDown:n["a"]},props:["fields","data","loading","destroy"],data(){return{params:{}}},methods:{title(t){return _.startCase(t)},defs(t){return _.get(It,t,"")},reset(){let t=this;_.forEach(this.params,((e,s)=>t.$set(t["params"],s,t.defs(t.fields[s])))),this.$emit("new")}},watch:{fields:{immediate:!0,deep:!0,handler(){let t=this;_.forEach(this.fields,((e,s)=>t.$set(t["params"],s,_.get(this.data,s,this.defs(e)))))}},data(t){let e=this;_.forEach(t,((t,s)=>_.has(e["params"],s)?e["params"][s]=t:null))}}},$t=Ot,Dt=s("0378"),jt=Object(u["a"])($t,i,a,!1,null,null,null);e["a"]=jt.exports;h()(jt,"components",{QForm:Dt["a"],QBtn:w["a"],QSelect:m["a"],QInput:Q["a"]})},"9ee2":function(t,e,s){"use strict";s("14d9");var i=s("2f62"),a=s("232e"),n=s("3758"),r=s("b1c1");e["a"]={mixins:[n["a"]],computed:Object(i["d"])("seating",{seats(t){let e=_.groupBy(this.tokens,"seating.id");return _(t.data).filter(["status","Active"]).map((t=>Object.assign({},t,{tokens:this.activeTokens(_.get(e,t.id,[]))},{status:this.seatStatus(_.get(e,t.id,[]))}))).map((t=>Object.assign({},t,{slug:this.slug(t)}))).value()}}),methods:{activeTokens(t){return _.filter(t,(({progress:t,progress_timing:e})=>"Paid"!==t||_.toInteger(_.get(_.last(e),"time"))>Object(r["t"])()-180))},seatStatus(t){return _.isEmpty(t)?"Vacant":a["TokenProgressSeatStatus"][this.leastStatus(t)]},leastStatus(t){let e=["Cancelled","New","Billed","Pending","Partial","Paid","Completed","Processing"];return e[_.reduce(t,(function(t,{progress:s}){let i=e.indexOf(s);return i>t?i:t}),0)]},slug(t){let e=[];return e.push(t.name,t.status),_.forEach(t.tokens,(t=>{e.push(t.progress,t.id),t.customer&&e.push(t.customer.name,t.customer.phone),t.waiter&&e.push(t.waiter.name)})),e.join(" ").toLowerCase()}}}},a861:function(t,e,s){"use strict";s("caad");var i=function(){var t=this,e=t._self._c;return e("q-list",{attrs:{separator:"",bordered:""}},t._l(t.items,(function(s){return e("q-item",{key:t.hKey(s),attrs:{disable:"Cancelled"===s.progress,clickable:t.clickable(s)},on:{click:function(e){return t.$emit("select",s)}}},[e("q-item-section",[s.deliver?e("q-item-label",{staticClass:"text-red text-bold",attrs:{caption:""}},[t._v("Delivery: "+t._s(s.deliver_human))]):t._e(),e("q-item-label",[t._v(t._s(s.quantity)+" x "+t._s(s.item.name)),s.narration?e("span",[t._v(" ("+t._s(s.narration)+")")]):t._e()]),t.delay(s)?e("q-item-label",{attrs:{lines:"1",caption:""}},[t._v("Delay: "+t._s(t.delay(s))+" seconds")]):t._e(),s.kitchen?e("q-item-label",{attrs:{lines:"1",caption:""}},[t._v("Kitchen: "+t._s(s.kitchen.name))]):t._e()],1),e("q-item-section",{directives:[{name:"show",rawName:"v-show",value:t.selected&&t.selected.includes(s.id),expression:"selected && selected.includes(item.id)"}],attrs:{side:""}},[e("q-icon",{attrs:{name:"how_to_reg",color:"positive"}})],1),e("q-item-section",{attrs:{side:""}},[e("q-badge",{staticClass:"q-py-xs",attrs:{label:s.progress}})],1)],1)})),1)},a=[],n=s("b1c1"),r=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"row items-center q-pb-none"},[e("div",{staticClass:"text-h6"},[t._v("Update "+t._s(t.name))]),e("q-space"),e("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){return t.$emit("close",null)}}})],1),e("q-card-section",{staticClass:"q-gutter-xs q-pb-none"},[e("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Quantity"},model:{value:t.params.quantity,callback:function(e){t.$set(t.params,"quantity",t._n(e))},expression:"params.quantity"}}),e("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Delay in Minutes"},model:{value:t.params.delay,callback:function(e){t.$set(t.params,"delay",t._n(e))},expression:"params.delay"}}),e("q-input",{attrs:{dense:"",type:"textarea",outlined:"",label:"Narration if any"},model:{value:t.params.narration,callback:function(e){t.$set(t.params,"narration",e)},expression:"params.narration"}})],1),e("q-card-actions",{staticClass:"q-px-md q-pt-xs",attrs:{align:"right"}},[e("q-btn",{attrs:{color:"negative",label:"Cancel Item",type:"submit",disable:t.loading,icon:"delete"},on:{click:function(e){return e.preventDefault(),t.cancel.apply(null,arguments)}}}),e("q-space"),e("q-btn",{attrs:{color:"warning",flat:"",label:"Close",type:"submit",disable:t.loading},on:{click:function(e){return e.preventDefault(),t.$emit("close",null)}}}),e("q-btn",{attrs:{color:"primary",label:"Update Item",type:"submit",loading:t.loading},on:{click:function(e){return e.preventDefault(),t.update.apply(null,arguments)}}})],1)],1)},o=[],l={name:"OrderSummaryItemUpdate",props:["token"],data(){return{loading:!1,params:{item:null,quantity:1,narration:"",delay:0,id:null}}},computed:{name(){return _.get(this.$store.state.items,[this.params.item,"name"])}},methods:{cancel(){this.loading=!0,post("token","cancel",{id:this.params.id}).then((()=>{this.$emit("close")})).catch().then((()=>this.loading=!1))},update(){this.loading=!0,post("token","item",this.params).then((()=>this.$emit("close"))).catch().then((()=>this.loading=!1))}},created(){_.forEach(["quantity","narration","id"],(t=>this.params[t]=_.get(this.$attrs,t))),this.params.item=_.get(this.$attrs,["item","id"]),this.$attrs.delay&&this.$attrs.delay>0&&1e3*this.$attrs.delay>(new Date).getTime()?this.params.delay=_.ceil((this.$attrs.delay-_.toInteger((new Date).getTime()/1e3))/60):this.params.delay=0}},c=l,d=s("2877"),u=s("f09f"),m=s("a370"),p=s("2c91"),h=s("9c40"),b=s("27f9"),f=s("4b7e"),g=s("eebe"),v=s.n(g),q=Object(d["a"])(c,r,o,!1,null,null,null),y=q.exports;v()(q,"components",{QCard:u["a"],QCardSection:m["a"],QSpace:p["a"],QBtn:h["a"],QInput:b["a"],QCardActions:f["a"]});var k=s("bfc7"),x={name:"OrderSummaryWaiterOrderItemsList",components:{OrderSummaryItemUpdate:y},props:["token","noserve","selected"],mixins:[k["a"]],data(){return{}},computed:{items(){return _.get(this.token,"items",[])}},methods:{hKey({id:t,item:e}){return Object(n["e"])("waiter","order","items","list","item",e.id,"id",t)},itemName({item:t}){return _.get(this.items,[_.toSafeInteger(t),"name"])},delay({delay:t}){return t>0&&1e3*t>(new Date).getTime()?t-_.toInteger((new Date).getTime()/1e3):0},kitchen({kitchen:t}){return _.get(this.kitchens,[_.toSafeInteger(t),"name"],null)},clickable({progress:t}){return!this.noserve&&"Completed"===t}}},C=x,w=s("1c1c"),Q=s("66e5"),S=s("4074"),I=s("0170"),O=s("0016"),$=s("58a8"),D=Object(d["a"])(C,i,a,!1,null,null,null);e["a"]=D.exports;v()(D,"components",{QList:w["a"],QItem:Q["a"],QItemSection:S["a"],QItemLabel:I["a"],QIcon:O["a"],QBadge:$["a"]})},b56d:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("q-layout",{attrs:{view:"hhh LpR fFf"}},[e("q-header",{staticClass:"bg-primary text-white",attrs:{reveal:"",elevated:"","height-hint":"98"}},[t.special?e("q-toolbar",[e("q-toolbar-title",[e("div",{staticClass:"row items-center"},[e("q-btn",{attrs:{to:{name:"chef_index"},flat:"",round:"",dense:"",icon:"arrow_back_ios"}}),e("KitchenSelectElement",{attrs:{dark:"",borderless:""},model:{value:t.kitchen,callback:function(e){t.kitchen=e},expression:"kitchen"}})],1)]),e("ToolBarTime"),e("q-toolbar-title",{staticClass:"row"},[e("q-space"),e("KitchenTokenDisplayMode",{attrs:{dark:"",borderless:""},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}}),e("q-btn",{staticClass:"gt-sm q-mx-sm self-center",attrs:{round:"",color:"white",icon:"undo","text-color":"red",dense:""},on:{click:function(e){t.reset=!0}}}),e("ManualSync")],1)],1):e("q-toolbar",[e("q-toolbar-title",[t.$store.state.back?e("q-btn",{attrs:{to:t.$store.state.back,flat:"",round:"",dense:"",icon:"arrow_back_ios"}}):t._e(),t._v("\n        "+t._s(t.$store.state.title||t.chef)+"\n      ")],1),e("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"kitchen",to:{name:t.kitchens_route}}}),e("ManualSync"),e("Logout")],1)],1),e("q-page-container",[e("router-view"),e("q-dialog",{attrs:{value:t.k_show,persistent:""}},[e("KitchenSelect",{staticStyle:{width:"75vw","max-width":"330px"}})],1)],1),e("q-footer",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.footer&&!t.special,expression:"$store.state.footer && !special"}],staticClass:"bg-primary text-white",attrs:{elevated:""}},[e("q-tabs",{attrs:{align:"left"}},[e("q-route-tab",{attrs:{to:{name:"chef_index"},label:"Home",icon:"home"}}),e("q-route-tab",{attrs:{to:{name:"tokens"},label:"Tokens",icon:"receipt"}})],1)],1)],1)},a=[],n=s("ed79"),r=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"bg-grey-2 row items-center"},[e("div",{staticClass:"text-bold"},[t._v("Select Kitchen")]),e("q-space"),e("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.selected.length,expression:"selected.length"},{name:"close-popup",rawName:"v-close-popup"}],staticClass:"text-weight-bold",attrs:{round:"",icon:"clear",flat:"",color:"red-12"}})],1),e("q-list",{attrs:{separator:"",bordered:""}},t._l(t.kitchens,(function(s){return e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.hKey(s),attrs:{clickable:""},on:{click:function(e){t.selected=s}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",[e("img",{attrs:{src:t.image(s.image)}})])],1),e("q-item-section",[e("q-item-label",[t._v(t._s(s.name))])],1),e("q-item-section",{attrs:{side:""}},[e("q-icon",{attrs:{size:"lg",name:"toggle_"+(t.is_selected(s)?"on":"off"),color:t.is_selected(s)?"positive":"grey"}})],1)],1)})),1)],1)},o=[],l=(s("caad"),s("2f62")),c=s("b1c1"),d=(s("d503"),{name:"KitchenSelect",data(){return{}},computed:{...Object(l["b"])("kitchens",{kitchens:"non_remote",assigned:"assign"}),selected:{get(){return _.get(this.assigned,parseInt(_USER.id),[])},set({id:t}){this.$store.dispatch("kitchens/chef",{kitchen:t})}}},methods:{is_selected({id:t}){return this.selected.includes(t)},hKey({id:t}){return Object(c["e"])("chef","kitchen","select",t)},image(t){return Object(c["i"])(t)}},created(){0===this.selected.length&&1===_.size(this.kitchens)&&(this.selected=_.first(_.values(this.kitchens)))}}),u=d,m=s("2877"),p=s("f09f"),h=s("a370"),b=s("2c91"),f=s("9c40"),g=s("1c1c"),v=s("66e5"),q=s("4074"),y=s("cb32"),k=s("0170"),x=s("0016"),C=s("7f67"),w=s("714f"),Q=s("eebe"),S=s.n(Q),I=Object(m["a"])(u,r,o,!1,null,null,null),O=I.exports;S()(I,"components",{QCard:p["a"],QCardSection:h["a"],QSpace:b["a"],QBtn:f["a"],QList:g["a"],QItem:v["a"],QItemSection:q["a"],QAvatar:y["a"],QItemLabel:k["a"],QIcon:x["a"]}),S()(I,"directives",{ClosePopup:C["a"],Ripple:w["a"]});var $=function(){var t=this,e=t._self._c;return e("q-select",t._b({attrs:{options:t.kitchens},model:{value:t.kitchen,callback:function(e){t.kitchen=e},expression:"kitchen"}},"q-select",t.$attrs,!1))},D=[],j={name:"KitchenSelectElement",props:["value"],computed:{kitchens(){return _(this.$store.getters["kitchens/assign"][_USER.id]).map((t=>_.get(this.$store.state.kitchens.data,t,null))).filter().map((({id:t,name:e})=>_.zipObject(["label","value"],[this.truncate(e),t]))).value()},kitchen:{get(){return this.value&&_.find(this.kitchens,["value",_.toInteger(this.value)])?_.find(this.kitchens,["value",_.toInteger(this.value)]):_.first(this.kitchens)},set({value:t}){this.$emit("input",_.toInteger(t))}}},methods:{truncate(t){return this.$q.screen.width<500?_.truncate(t,{length:10}):t}},mounted(){this.kitchen=_.cloneDeep(this.kitchen)}},T=j,B=s("ddd8"),P=Object(m["a"])(T,$,D,!1,null,null,null),N=P.exports;S()(P,"components",{QSelect:B["a"]});var z=s("3610"),A=function(){var t=this,e=t._self._c;return e("q-toolbar-title",{staticClass:"gt-xs text-center"},[e("span",{staticClass:"text-white text-subtitle2"},[t._v(t._s(t.time))])])},L=[],K={name:"ToolBarTime",props:["sec"],data(){return{time:E(this.sec)}},watch:{time:{immediate:!0,handler(){setTimeout((t=>t.time=E(t.sec)),1e3*(60-(void 0===this.sec?(new Date).getSeconds():59)),this)}}}};function E(t){return Object(c["D"])((new Date).getTime()+"","x",void 0!==t)}var M=K,R=s("6ac5"),F=Object(m["a"])(M,A,L,!1,null,null,null),U=F.exports;S()(F,"components",{QToolbarTitle:R["a"]});var H=s("9527"),V={name:"ChefLayout",components:{Logout:H["a"],ToolBarTime:U,KitchenTokenDisplayMode:z["a"],KitchenSelectElement:N,KitchenSelect:O,ManualSync:n["a"]},data(){return{chef:_USER.name,kitchens_route:"chef_kitchens",time:Y()}},computed:{assigned(){return _.get(this.$store.getters["kitchens/assign"],parseInt(_USER.id),[])},k_show(){return!this.assigned.length&&this.$route.name!==this.kitchens_route},special(){return"tokens"===this.$route.name},kitchen:{get(){return _.get(this.$store.state,["public","kitchen"],null)},set(t){this.$store.commit("public",{kitchen:t})}},mode:{get(){return _.get(this.$store.state,["public","mode"],null)},set(t){this.$store.commit("public",{mode:t})}},reset:{get(){return!!_.get(this.$store.state,["public","reset"],!1)},set(t){this.$store.commit("public",{reset:!!t})}}}};function Y(){return Object(c["D"])((new Date).getTime()+"","x")}var G=V,W=s("4d5a"),X=s("e359"),J=s("65c6"),Z=s("09e3"),tt=s("24e8"),et=s("7ff0"),st=s("429b"),it=s("7867"),at=Object(m["a"])(G,i,a,!1,null,null,null);e["default"]=at.exports;S()(at,"components",{QLayout:W["a"],QHeader:X["a"],QToolbar:J["a"],QToolbarTitle:R["a"],QBtn:f["a"],QSpace:b["a"],QPageContainer:Z["a"],QDialog:tt["a"],QFooter:et["a"],QTabs:st["a"],QRouteTab:it["a"]})},ba49:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return t.token?e("q-card",[e("q-bar",{staticClass:"bg-secondary text-white q-py-lg"},[e("q-list",{staticClass:"q-my-xl full-width"},[e("q-item",{staticClass:"q-px-none items-center",staticStyle:{"font-size":"0.75rem"}},[e("q-item-section",{attrs:{side:""}},[e("q-icon",{attrs:{name:"receipt_long",size:"sm",color:"white"}})],1),e("q-item-section",{staticClass:"text-white text-bold"},[e("q-item-label",[t._v(t._s(t.token.id))]),e("q-item-label",{staticClass:"text-white text-bold",attrs:{caption:""}},[t._v(t._s(t.token.type))])],1),e("q-item-section",{staticClass:"text-white text-bold",attrs:{side:""}},[e("q-item-label",[t._v(t._s(t.token.seating?t.token.seating.name:t.date(t.token.date)))]),e("q-item-label",{staticClass:"text-white text-bold",attrs:{caption:""}},[t._v(t._s(t.token.progress))])],1),t.close?e("q-item-section",{attrs:{side:""}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mt-xs text-bold",attrs:{icon:"close",color:"white",rounded:"",flat:"",dense:""}})],1):t._e()],1)],1)],1),e("q-list",{staticStyle:{"font-size":"0.75rem"},attrs:{separator:""}},[t._l(t.items,(function(s,i){return e("q-item",{key:"tgb-t-"+t.token.id+"-ti-"+s.id+"-idx-"+i},[e("q-item-section",{staticClass:"text-black",attrs:{side:""}},[t._v(t._s(i+1))]),e("q-item-section",[e("q-item-label",{staticStyle:{"font-size":"0.65rem","line-height":"0.6 !important"},attrs:{caption:""}},[t._v("Price: "+t._s(t.precision(s.price)))]),e("q-item-label",[e("span",{staticClass:"text-bold text-secondary"},[t._v(t._s(s.quantity)+"x")]),t._v(" "+t._s(s.item.name))])],1),e("q-item-section",{staticClass:"text-bold text-secondary",attrs:{side:""}},[t._v(t._s(t.precision(s.price*s.quantity)))])],1)})),e("q-item",[e("q-item-section",[e("q-item-label",{staticStyle:{"font-size":"0.65rem","line-height":"0.6 !important"},attrs:{caption:""}},[t._v(t._s(t.items.length)+"x Items, "+t._s(t.quantities)+"x Quantities")]),e("q-item-label",{staticClass:"text-bold"},[t._v("Total")])],1),e("q-item-section",{staticClass:"text-bold text-secondary",staticStyle:{"font-size":"1rem"},attrs:{side:""}},[t._v(t._s(t.precision(t.total)))])],1),e("q-item",[e("q-item-section",[e("OrderCustomer",{attrs:{get:"id",outlined:""},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}})],1)],1),e("q-item",[e("q-item-section",[e("TaxNatureSelectDropDown",{attrs:{label:"Tax",outlined:""},model:{value:t.tax,callback:function(e){t.tax=e},expression:"tax"}})],1),e("q-item-section",[e("q-input",{attrs:{outlined:"",label:"Discount",type:"number"},on:{keyup:t.discount_percent},model:{value:t.discount,callback:function(e){t.discount=t._n(e)},expression:"discount"}})],1)],1)],2),e("q-card-section",{staticClass:"row items-center justify-around q-px-md bg-grey-2"},[e("div",{staticClass:"text-center col"},[e("q-item-label",{staticClass:"text-weight-bolder",staticStyle:{"font-size":"1.5rem","line-height":"1rem !important"}},[t._v(t._s(t.precision(t.total-t.discount)))]),e("q-item-label",{staticClass:"text-capitalize",attrs:{caption:""}},[t._v("Payable")])],1),e("div",{staticClass:"text-center col"},[e("q-btn",{staticClass:"q-px-md",attrs:{label:"BILL",color:"secondary",disabled:!t.customer||0===t.items.length},on:{click:t.generate}})],1)]),e("BrowserPrintCardActions",{attrs:{token:t.token}}),e("q-inner-loading",{attrs:{showing:t.loading}},[e("q-spinner-facebook",{attrs:{color:"secondary",size:"2em"}})],1)],1):t._e()},a=[],n=(s("caad"),s("b1c1")),r=s("7fe1"),o=s("9708"),l=s("2943"),c=s("36d9"),d={name:"TokenBillGenerate",components:{BrowserPrintCardActions:c["a"],TaxNatureSelectDropDown:l["a"],OrderCustomer:o["a"],UserSelectDropDown:r["a"]},props:["token","close"],data(){return{loading:!1,discount:0,tax:null,create_customer:null}},computed:{items(){return _.filter(this.token.items,(t=>"Cancelled"!==t.progress))},total(){return _.sumBy(this.items,(({price:t,quantity:e})=>t*e))},quantities(){return _.sumBy(this.items,(({quantity:t})=>t))},customer:{get(){return null!==this.create_customer?this.create_customer:_.get(this.token,["customer","id"])},set(t){if(0===t)return this.create_customer=0;this.create_customer=null,this.assign(t)}}},methods:{precision:n["z"],date(t){return Object(n["o"])(t)?Object(n["D"])(t):Object(n["g"])(t)},assign(t){this.loading=!0,post("token","customer",{token:this.token.id,customer:t}).then((()=>this.loading=!1)).then((()=>this.$emit("customer_changed")))},discount_percent(t){Object(n["n"])(t.keyCode)&&(this.prv_per||_.includes(_.toString(this.discount),"."))&&setTimeout((()=>{this.$nextTick((()=>{this.discount=this.discount*this.total*.01,t.target.blur(),t.target.focus()}))}),250),this.prv_per=Object(n["n"])(t.keyCode)},generate(){if(this.loading=!0,!this.customer||!this.items||0===_.size(this.items))return alert("Select a customer"+((this.loading=!1)||""));let t={token:this.token.id,customer:this.customer,discount:this.discount,nature:this.tax};post("bill","create",t).then((()=>{this.$emit("generated"),this.loading=!1})).catch().finally((()=>this.$store.dispatch("server/ping",null,{root:!0})))}}},u=d,m=s("2877"),p=s("f09f"),h=s("d847"),b=s("1c1c"),f=s("66e5"),g=s("4074"),v=s("0016"),q=s("0170"),y=s("9c40"),k=s("27f9"),x=s("a370"),C=s("74f7"),w=s("e669"),Q=s("7f67"),S=s("eebe"),I=s.n(S),O=Object(m["a"])(u,i,a,!1,null,null,null);e["a"]=O.exports;I()(O,"components",{QCard:p["a"],QBar:h["a"],QList:b["a"],QItem:f["a"],QItemSection:g["a"],QIcon:v["a"],QItemLabel:q["a"],QBtn:y["a"],QInput:k["a"],QCardSection:x["a"],QInnerLoading:C["a"],QSpinnerFacebook:w["a"]}),I()(O,"directives",{ClosePopup:Q["a"]})},bf22:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-card",[e("q-bar",{staticClass:"bg-accent text-white"},[e("q-icon",{staticClass:"q-mr-md",attrs:{name:"receipt_long"}}),e("span",{staticClass:"text-caption"},[t._v("Generate Bill")]),e("q-space"),t.close?e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",rounded:"",flat:"",dense:""}}):t._e()],1),e("q-card-section",{staticClass:"row q-col-gutter-sm"},[e("q-input",{staticClass:"col-4",attrs:{readonly:"",outlined:"",dense:"",value:t.token.id,label:"Token ID"}}),e("q-input",{staticClass:"col-8",attrs:{readonly:"",outlined:"",dense:"",value:t.token.date_human,label:"Date"}})],1),e("q-list",{attrs:{dense:"",separator:""}},[t._l(t.Items,(function(s){return e("q-item",{key:"db-gk-t-"+t.token+"-ti-"+s.id+"-i-"+s.id},[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{attrs:{rounded:""}},[e("q-img",{attrs:{src:t.image(s.item.image)}})],1)],1),e("q-item-section",[e("q-item-label",[t._v(t._s(s.quantity)+"x "+t._s(s.item.name))]),e("q-item-label",{attrs:{caption:""}},[t._v("Rate: "+t._s(s.price))])],1),e("q-item-section",{attrs:{side:""}},[t._v(t._s(t.precision(s.price*s.quantity)))])],1)})),e("q-item",{staticClass:"text-bold text-subtitle1"},[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{attrs:{rounded:"",icon:"functions"}})],1),e("q-item-section",[e("q-item-label",[t._v("Total")])],1),e("q-item-section",{attrs:{side:""}},[t._v(t._s(t.precision(t.total)))])],1)],2),e("q-card-section",{staticClass:"row q-col-gutter-xs"},[e("div",{staticClass:"col-12"},[e("OrderCustomer",{attrs:{get:"id",outlined:"",dense:""},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}})],1),e("div",{staticClass:"col-7"},[e("q-select",{attrs:{label:"Tax",dense:"",options:t.tax_natures,outlined:""},model:{value:t.tax,callback:function(e){t.tax=e},expression:"tax"}})],1),e("div",{staticClass:"col-5"},[e("q-input",{staticClass:"col-5",attrs:{outlined:"",dense:"",type:"number",label:"Discount"},model:{value:t.discount,callback:function(e){t.discount=t._n(e)},expression:"discount"}})],1)]),e("q-card-section",{staticClass:"row items-center q-px-md"},[e("div",{staticClass:"text-center col"},[e("q-item-label",{staticClass:"text-weight-bolder",staticStyle:{"font-size":"1.5rem","line-height":"1rem !important"}},[t._v(t._s(t.precision(t.total-t.discount)))]),e("q-item-label",{staticClass:"text-capitalize",attrs:{caption:""}},[t._v("Payable")])],1),t.d_boy_enabled&&"Delivery Boy"!==t.$route.meta.me.role?e("div",{staticClass:"text-center col"},["Delivery Boy"!==t.$route.meta.me.role?e("UserSelectDropDown",{staticClass:"q-mb-xs",attrs:{outlined:"",dense:"",get:"id",role:"Delivery Boy",clearable:"",label:"Delivery Boy"},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}):t._e()],1):t._e()]),e("q-card-actions",{staticClass:"bg-grey-2",attrs:{align:"right"}},[e("q-btn",{attrs:{label:"Generate Bill",color:"accent",padding:"xs md",dense:"",loading:t.loading},on:{click:t.generate}})],1)],1)},a=[],n=s("b1c1"),r=s("9708"),o=s("7fe1");const{KJ30I:l}=s("adfa").FEATURES;var c={name:"BillGenerateCard",components:{UserSelectDropDown:o["a"],OrderCustomer:r["a"]},props:["token","close"],data(){return{tax:null,discount:0,customer:null,loading:!1,user:null,d_boy_enabled:"Yes"===l}},computed:{Items(){return _.filter(this.token.items,(t=>"Cancelled"!==t.progress))},total(){return _.sumBy(this.Items,(({price:t,quantity:e})=>_.toNumber(t)*_.toNumber(e)))},tax_natures(){return this.$store.getters["tax/natures"]}},methods:{image:n["i"],precision:n["z"],generate(){if(this.loading=!0,!this.token||!this.customer)return this.loading=alert("Select Customer")&&!1;let t={token:this.token.id,customer:this.customer,discount:this.discount,nature:this.tax,user:this.user||this.$route.meta.me.id};post("bill","create",t).then().catch().finally(this.generated)},generated(){this.loading=!1,this.$emit("generated")}},watch:{"token.customer":{immediate:!0,handler(t){this.customer=_.get(t,"id")}}}},d=c,u=s("2877"),m=s("f09f"),p=s("d847"),h=s("0016"),b=s("2c91"),f=s("9c40"),g=s("a370"),v=s("27f9"),q=s("1c1c"),y=s("66e5"),k=s("4074"),x=s("cb32"),C=s("068f"),w=s("0170"),Q=s("ddd8"),S=s("4b7e"),I=s("7f67"),O=s("eebe"),$=s.n(O),D=Object(u["a"])(d,i,a,!1,null,null,null);e["a"]=D.exports;$()(D,"components",{QCard:m["a"],QBar:p["a"],QIcon:h["a"],QSpace:b["a"],QBtn:f["a"],QCardSection:g["a"],QInput:v["a"],QList:q["a"],QItem:y["a"],QItemSection:k["a"],QAvatar:x["a"],QImg:C["a"],QItemLabel:w["a"],QSelect:Q["a"],QCardActions:S["a"]}),$()(D,"directives",{ClosePopup:I["a"]})},bf7f:function(t,e,s){"use strict";s("caad");e["a"]={computed:{KPC_isDesktop(){return this.$q.platform.is.desktop}},methods:{KPC_EventSubscribe(t){this.$q.platform.is.desktop&&(t("keypress",this.KPC),t("keyup",this.KPC_Additional))},KPC_Additional(t){["Backspace","Delete","Escape","Tab","ArrowDown","ArrowUp"].includes(t.key)&&this.KPC(t)},KPC(t){console.log(t)}},created(){this.KPC_isDesktop&&this.KPC_EventSubscribe(document.addEventListener)},beforeDestroy(){this.KPC_isDesktop&&this.KPC_EventSubscribe(document.removeEventListener)}}},bf8e:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-select",t._b({attrs:{options:t.options,value:t.optValue},on:{input:t.doEmit}},"q-select",t.$attrs,!1))},a=[],n=s("2071"),r={name:"KitchenSelectDropDown",mixins:[n["a"]],computed:{options(){return _.map(this.$store.state.kitchens.data)}}},o=r,l=s("2877"),c=s("ddd8"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=m.exports;u()(m,"components",{QSelect:c["a"]})},bfc7:function(t,e,s){"use strict";s("caad");var i=s("b1c1");e["a"]={computed:{oie_processing_editable(){return!0===Object(i["B"])(settings("enable_processing_token_item_update"))},oie_completed_editable(){return!0===Object(i["B"])(settings("enable_completed_token_item_update"))},oie_served_editable(){return!0===Object(i["B"])(settings("enable_served_token_item_update"))}},methods:{oie_is(t){return["Processing","Completed","Served"].includes(t)&&this[_.snakeCase(`oie ${t} Editable`)]}}}},c0e8:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",[e("q-item",{staticClass:"q-px-none",attrs:{dense:""}},[e("q-item-section",[e("FilterInputText",{attrs:{label:"Filter Bills"},on:{text:function(e){t.filter.text=e}}})],1),e("q-item-section",[e("q-select",{attrs:{options:t.types,outlined:"",dense:"",label:"Type",clearable:""},model:{value:t.filter.type,callback:function(e){t.$set(t.filter,"type",e)},expression:"filter.type"}})],1),e("q-item-section",[e("q-select",{attrs:{options:["Tokens","Bills"],clearable:"",outlined:"",dense:"",label:"Token/Bill"},model:{value:t.filter.card,callback:function(e){t.$set(t.filter,"card",e)},expression:"filter.card"}})],1),e("q-item-section",{attrs:{side:""}},[e("q-btn",{attrs:{flat:"",color:"primary",dense:"",icon:"filter_alt"},on:{click:function(e){t.drawer=!t.drawer}}})],1)],1),e("q-drawer",{attrs:{width:.75*t.$q.screen.width,behavior:"desktop",overlay:"",bordered:"","content-class":"bg-grey-1",side:"right",elevated:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[e("q-scroll-area",{staticClass:"fit"},[e("q-bar",{staticClass:"bg-white text-black text-bold q-py-lg"},[e("div",[t._v("Filter")]),e("q-space"),e("q-btn",{staticClass:"text-weight-bolder",attrs:{flat:"",icon:"close",dense:""},on:{click:function(e){t.drawer=!t.drawer}}})],1),e("q-list",{attrs:{separator:""}},[e("q-item",{staticClass:"q-px-none justify-between",class:t.header_class,attrs:{dense:""}},[e("q-item-label",{attrs:{header:""}},[e("q-input",t._b({attrs:{clearable:"",dense:"",outlined:"",label:"Search Customer"},model:{value:t.filter_customer,callback:function(e){t.filter_customer=e},expression:"filter_customer"}},"q-input",t.input_attrs,!1))],1),e("q-item-section",{attrs:{side:""}},[e("q-btn",{attrs:{icon:"clear",color:"white",dense:"",flat:""},on:{click:function(e){t.filter.customer=null}}})],1)],1),t._l(t.customers,(function(s,i){return!t.filter_customer||s.toLowerCase().indexOf(t.filter_customer.toLowerCase())>-1?e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:"bf-c-c-"+i,attrs:{clickable:"","active-class":"text-secondary",active:t.filter.customer&&parseInt(i)===t.filter.customer},on:{click:function(e){return t.clicked("customer",i)}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{directives:[{name:"show",rawName:"v-show",value:t.filter.customer&&t.filter.customer===parseInt(i),expression:"filter.customer && filter.customer === parseInt(id)"}],attrs:{icon:"reply_all"}})],1),e("q-item-section",[t._v(t._s(s))])],1):t._e()})),e("q-item",{staticClass:"q-px-none justify-between",class:t.header_class,attrs:{dense:""}},[e("q-item-label",{attrs:{header:""}},[e("q-input",t._b({attrs:{clearable:"",dense:"",outlined:"",label:"Search Items"},model:{value:t.filter_item,callback:function(e){t.filter_item=e},expression:"filter_item"}},"q-input",t.input_attrs,!1))],1),e("q-item-section",{attrs:{side:""}},[e("q-btn",{attrs:{icon:"clear",color:"white",dense:"",flat:""},on:{click:function(e){t.filter.item=null}}})],1)],1),t._l(t.items,(function(s,i){return!t.filter_item||s.toLowerCase().indexOf(t.filter_item.toLowerCase())>-1?e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:"bf-im-i-"+i,attrs:{clickable:"","active-class":"text-secondary",active:t.filter.item&&t.filter.item===parseInt(i)},on:{click:function(e){return t.clicked("item",i)}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{directives:[{name:"show",rawName:"v-show",value:t.filter.item&&t.filter.item===parseInt(i),expression:"filter.item && filter.item === parseInt(id)"}],attrs:{icon:"reply_all"}})],1),e("q-item-section",[t._v(t._s(s))])],1):t._e()}))],2)],1)],1)],1)},a=[],n=(s("caad"),s("5319"),s("5ab9")),r={name:"BillFilter",components:{FilterInputText:n["a"]},props:["tokens","value"],data(){return{drawer:!1,filter:{text:"",type:null,card:null,customer:null,item:null},filter_customer:"",filter_item:"",header_class:"bg-secondary",input_attrs:{labelColor:"white",inputClass:"text-white"}}},computed:{has_filter(){return _.some(this.filter)},bills(){return _(this.$store.state.bills.data).filter((({progress:t})=>["Pending","Partial"].includes(t))).keyBy("token").mapValues((({id:t,amount:e,discount:s,round:i})=>[t,_.subtract(e,_.sumBy([s,i],_.toNumber))])).value()},_tokens(){return _(this.tokens)},types(){return this._tokens.map("type").uniq().value()},slug(){return this._tokens.keyBy("id").mapValues((({id:t,customer:e,items:s,type:i})=>_.concat(t,_.get(this.bills,t),i,_.get(e,"name"),_.get(e,"phone"),_.map(s,"item.name").join(" ")).join(" ").replace(/\s+/g," ").toLowerCase())).value()},customers(){return this._tokens.filter("customer").keyBy((({customer:t})=>_.toNumber(t.id))).mapValues("customer.name").value()},items(){return this._tokens.flatMap("items").keyBy((({item:t})=>_.toNumber(t.id))).mapValues("item.name").value()},filtered_tokens(){return this.has_filter?this._tokens.filter(this.is_ok).map("id").value():[]},filtered(){return this._tokens.filter((({id:t})=>this.filtered_tokens.includes(t))).value()}},methods:{clicked(t,e){let s=this.filter[t];this.filter[t]=s===_.toNumber(e)?null:_.toNumber(e)},is_ok(t){return(!this.filter.card||"Tokens"===this.filter.card&&!_.has(this.bills,t.id)||"Bills"===this.filter.card&&_.has(this.bills,t.id))&&(!this.filter.type||t.type===this.filter.type)&&(!this.filter.customer||_.get(t,["customer","id"],null)===this.filter.customer)&&(!this.filter.item||!!_.find(t.items,(({item:t})=>t.id===this.filter.item)))&&(!this.filter.text||_.get(this.slug,t.id,"").indexOf(this.filter.text.toLowerCase().replace(/\s+/g," "))>-1)}},watch:{filtered_tokens:{immediate:!0,handler(){this.$emit("input",this.has_filter?this.filtered:this.tokens)}},tokens(){this.$emit("input",this.has_filter?this.filtered:this.tokens)},has_filter(){this.drawer=!1}}},o=r,l=s("2877"),c=s("66e5"),d=s("4074"),u=s("ddd8"),m=s("9c40"),p=s("9404"),h=s("4983"),b=s("d847"),f=s("2c91"),g=s("1c1c"),v=s("0170"),q=s("27f9"),y=s("cb32"),k=s("714f"),x=s("eebe"),C=s.n(x),w=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=w.exports;C()(w,"components",{QItem:c["a"],QItemSection:d["a"],QSelect:u["a"],QBtn:m["a"],QDrawer:p["a"],QScrollArea:h["a"],QBar:b["a"],QSpace:f["a"],QList:g["a"],QItemLabel:v["a"],QInput:q["a"],QAvatar:y["a"]}),C()(w,"directives",{Ripple:k["a"]})},c22d:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-page",{attrs:{padding:""}},[e("q-card",{attrs:{flat:""}},[e("FilterInputText",{on:{text:function(e){t.search=e}}}),e("q-card-section",{attrs:{horizontal:""}},[e("q-virtual-scroll",{staticStyle:{height:"80vh",width:"24rem"},attrs:{items:t.list,separator:"",bordered:""},scopedSlots:t._u([{key:"default",fn:function({item:s}){return[e("q-item",{key:t.hKey(s),attrs:{clickable:"",active:t.current&&t.current.id===s.id,"active-class":"bg-light-blue text-white"},on:{click:function(e){t.current=s}}},[e("q-item-section",[e("q-item-label",[t._v(t._s(s[t.label]))])],1),e("q-item-section",{attrs:{side:""}},[e("q-icon",{attrs:{color:"white",name:"send"}})],1)],1)]}}])}),e("q-card-section",{staticClass:"full-width"},[e("MasterForm",{ref:"master_form",attrs:{data:t.current,fields:t.fields,loading:t.loading,destroy:!!t.destroy},on:{new:function(e){t.current=null},save:t.save,destroy:t.remove}},[t._t("default")],2)],1)],1)],1)],1)},a=[],n=s("b1c1"),r=s("9b77"),o=s("5ab9"),l=s("43fa"),c={name:"AdministratorMasterCommon",components:{CardImageTitle:l["a"],FilterInputText:o["a"],MasterForm:r["a"]},data(){return{search:"",loading:!1,v_current:null}},props:["content","items","label","fields","validate","destroy","update","create","filter","extra"],computed:{list(){return _.isEmpty(this.search)?_.isArray(this.items)?this.items:_.values(this.items):_.filter(this.items,(t=>Object(n["r"])(t,this.filter||[this.label],this.search)))},current:{get(){return this.v_current},set(t){this.v_current=t,this.$emit("current",this.v_current)}}},methods:{hKey({id:t}){return Object(n["e"])("masters",this.content,"list",this.content,t)},save(t){if(this.loading=!0,this.extra&&_.size(this.extra)&&_.forEach(this.extra,((e,s)=>this.$set(t,s,e))),!_.every(this.validate||[],(e=>_.isArray(t[e])?!_.isEmpty(t[e]):!!t[e])))return this.loading=!1;this.current&&(t["id"]=this.current.id),post(this.content,_.has(t,"id")&&t["id"]?this.update:this.create,t).then((t=>{this.$emit("response",t),this.current=null,this.$refs["master_form"].reset(),this.loading=!1}))},remove({id:t}){post(this.content,this.destroy,{id:t}).then((t=>{this.current=null,this.$refs["master_form"].reset(),this.loading=!1,this.$emit("destroyed",t)}))}}},d=c,u=s("2877"),m=s("9989"),p=s("f09f"),h=s("a370"),b=s("a12b"),f=s("66e5"),g=s("4074"),v=s("0170"),q=s("0016"),y=s("eebe"),k=s.n(y),x=Object(u["a"])(d,i,a,!1,null,null,null);e["a"]=x.exports;k()(x,"components",{QPage:m["a"],QCard:p["a"],QCardSection:h["a"],QVirtualScroll:b["a"],QItem:f["a"],QItemSection:g["a"],QItemLabel:v["a"],QIcon:q["a"]})},c624:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{ref:"masonry-container",staticClass:"column full-width masonry-container content-start",class:["masonry"+t.cols,"q-col-gutter-"+(t.gutter||"xs")],style:{height:t.containerHeight}},[t._l(t.cols,(function(t,s){return e("div",{class:{hidden:!s},style:{flex:"1 0 100%",width:0}})})),t._l(t.items,(function(s,i,a){return e("div",{key:t.hKey(i),staticClass:"q-mb-xs",style:{width:t.cell_width},attrs:{tabindex:"0"}},[t._t("item",null,{identity:i,index:a},"object"!==typeof s||Array.isArray(s)?{item:s}:s)],2)}))],2)},a=[],n=s("0831"),r=s("b1c1");const{getScrollHeight:o,getScrollWidth:l}=n["a"];var c={name:"Masonry",props:["columns","items","gutter","width"],data(){return{arg:0,containerHeight:0}},computed:{cols(){return this.columns?_.toInteger(this.columns):this.masonry_cols(this.width)},cell_width(){return _.floor(99/this.cols)+"%"},items_size(){return _.size(this.items)}},methods:{hKey(t){return Object(r["e"])("masonry","row",t)},masonry_cols(t){return[1,1,2,3,4,5,6,7,8,9,10,11][_.floor(this.$q.screen.width/_.toInteger(t||175))]||12},set_height(){this.containerHeight=null;let t=this;this.$nextTick((function(){let e=o(t.$refs["masonry-container"]),s=t.items_size,i=_.ceil(e/s),a=_.ceil(s/t.cols);t.containerHeight=i*a+i+"px"}))},set_height_after(){setTimeout(this.set_height,750*(this.items_size/50+1))}},created(){this.arg=_.isArray(this.items)?0:1},watch:{items_size:{immediate:!0,handler:"set_height_after"}}},d=c,u=s("2877"),m=Object(u["a"])(d,i,a,!1,null,null,null);e["a"]=m.exports},c9df:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",[e("q-dialog",{attrs:{value:t.bill_generate,persistent:""},on:{"before-hide":t.done}},[e("TokenBillGenerate",{style:t.popup_width(),attrs:{token:t.item,close:!0},on:{generated:t.done,customer_changed:function(e){return t.$emit("token_customer_changed")}}})],1),e("q-dialog",{attrs:{value:t.collect_payment,persistent:""},on:{"before-hide":t.done}},[e("PaymentCollectCard",{style:t.popup_width(),attrs:{bill:t.bill},on:{paid:t.done}})],1),e("q-dialog",{attrs:{value:t.customer_detail,persistent:""},on:{"before-hide":t.done}},[t.customer_id?e("CustomerDetailCard",{staticStyle:{"max-width":"360px",width:"90vw"},attrs:{id:t.customer_id,color:"purple"}}):t._e()],1),e("q-dialog",{attrs:{value:t.token_items,persistent:""},on:{"before-hide":t.done}},[e("OrderSummaryItemsManage",{style:t.popup_width(),attrs:{token:t.item},on:{close:t.done,done:t.done}})],1),e("q-dialog",{attrs:{value:t.delivery_bill,persistent:""},on:{"before-hide":t.done}},[t.item?e("BillGenerateCard",{style:t.popup_width(),attrs:{token:t.item,close:!0},on:{generated:t.done}}):t._e()],1),e("q-dialog",{attrs:{value:t.delivery_pay,persistent:""},on:{"before-hide":t.done}},[t.item?e("DeliveryBoyPaymentCard",{style:t.popup_width(),attrs:{token:t.item},on:{paid:t.done}}):t._e()],1),e("q-dialog",{attrs:{value:t.bill_customer,persistent:""},on:{"before-hide":t.done}},[t.item?e("BillChangeCustomer",{style:t.popup_width(),attrs:{token:t.item},on:{changed:t.done}}):t._e()],1)],1)},a=[],n=s("ba49"),r=s("b1c1"),o=s("4092"),l=s("cae8"),c=s("1379"),d=s("bf22"),u=s("1cd8"),m=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"bg-indigo text-white items-center row justify-between q-py-sm"},[t._v("Change Customer "),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",dense:"",rounded:"",color:"white"}})],1),e("q-card-section",[e("OrderCustomer",{attrs:{label:"Customer",get:"id",outlined:""},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}})],1),e("q-card-section",{staticClass:"bg-indigo q-py-none"},[t._v(" ")]),e("q-inner-loading",{attrs:{showing:t.loading}},[e("q-spinner-facebook",{attrs:{color:"indigo",size:"xl"}})],1)],1)},p=[],h=s("9708"),b={name:"BillChangeCustomer",components:{OrderCustomer:h["a"]},props:["token"],data(){return{loading:!1}},computed:{customer:{get(){return _.get(this.token,_.isObject(this.token.customer)?["customer","id"]:"customer")},set(t){t&&(this.loading=!0,post("token","customer",{token:this.token.id,customer:t}).then().catch().finally((()=>{this.loading=!1,this.$emit("changed")})))}}}},f=b,g=s("2877"),v=s("f09f"),q=s("a370"),y=s("9c40"),k=s("74f7"),x=s("e669"),C=s("7f67"),w=s("eebe"),Q=s.n(w),S=Object(g["a"])(f,m,p,!1,null,null,null),I=S.exports;Q()(S,"components",{QCard:v["a"],QCardSection:q["a"],QBtn:y["a"],QInnerLoading:k["a"],QSpinnerFacebook:x["a"]}),Q()(S,"directives",{ClosePopup:C["a"]});var O={name:"OrderSummaryActionPopups",props:["item","mode"],components:{BillChangeCustomer:I,DeliveryBoyPaymentCard:u["a"],BillGenerateCard:d["a"],OrderSummaryItemsManage:c["a"],CustomerDetailCard:l["a"],PaymentCollectCard:o["a"],TokenBillGenerate:n["a"]},computed:{bill_generate(){return"bill"===this.mode},collect_payment(){return"payment"===this.mode},customer_detail(){return"customer"===this.mode},token_items(){return"items"===this.mode},delivery_bill(){return"delivery_bill"===this.mode},delivery_pay(){return"delivery_pay"===this.mode},bill_customer(){return"bill_customer"===this.mode},bill(){return _.get(this.item,"bill")},customer_id(){return _.get(this.item,["customer","id"])}},methods:{popup_width:r["y"],done(){this.$emit("done")}}},$=O,D=s("24e8"),j=Object(g["a"])($,i,a,!1,null,null,null);e["a"]=j.exports;Q()(j,"components",{QDialog:D["a"]})},cae8:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"q-py-xs",class:"bg-"+t.clr}),e("CardImageTitle",{attrs:{image:t.image}}),e("q-card-section",{staticClass:"bg-grey-1 q-gutter-y-xs q-py-xs"},[e("q-input",{attrs:{value:void 0===t.params.name?t.customer.name:t.params.name,dense:"",color:t.clr,outlined:"",label:"Name"},on:{input:function(e){t.params.name=e}}}),e("q-input",{attrs:{value:void 0===t.params.phone?t.customer.phone:t.params.phone,dense:"",color:t.clr,outlined:"",label:"Phone"},on:{input:function(e){t.params.phone=e}}}),e("q-input",{attrs:{value:void 0===t.params.email?t.customer.email:t.params.email,dense:"",color:t.clr,outlined:"",label:"Email"},on:{input:function(e){t.params.email=e}}}),e("q-input",{attrs:{value:void 0===t.params.address?t.customer.address:t.params.address,dense:"",color:t.clr,outlined:"",label:"Address",type:"textarea"},on:{input:function(e){t.params.address=e}}}),e("q-select",{attrs:{value:void 0===t.params.status?t.customer.status:t.params.status,dense:"",color:t.clr,outlined:"",label:"Status",options:["Active","Inactive"]},on:{input:function(e){t.params.status=e}}})],1),e("q-card-actions",{staticClass:"row q-col-gutter-x-sm q-px-md q-py-xs",attrs:{align:"center"}},[e("div",[e("q-btn",{attrs:{color:"negative",size:"sm",padding:"sm",label:"Remove Image"},on:{click:t.remove}})],1),e("div",{staticClass:"col-grow"},[e("q-file",{attrs:{value:[],color:t.clr,label:"Upload New Image",outlined:"",clearable:"",dense:""},on:{input:function(e){return t.upload(e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{size:"xs",name:"attach_file"}})]},proxy:!0}])})],1)]),e("q-card-actions",{staticClass:"bg-grey-2 q-px-md",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:t.clr,padding:"xs md"}}),t.has_update?e("q-btn",{attrs:{label:"Update",color:"primary",padding:"xs md",loading:t.loading},on:{click:t.update}}):t._e()],1)],1)},a=[],n=s("43fa"),r=s("b1c1"),o={name:"CustomerDetailCard",components:{CardImageTitle:n["a"]},props:["id","color"],data(){return{loading:!1,img:null,params:{name:void 0,phone:void 0,address:void 0,email:void 0,status:void 0}}},computed:{clr(){return this.color||"positive"},customer(){return _.get(this.$store.state.customers.data,parseInt(this.id))},image(){return Object(r["i"])(this.img||this.customer.image)},has_update(){return _.some(this.params)}},methods:{update(){if(this.loading=!0,!this.has_update)return this.loading=!1;post("customer","update",_.defaults(this.params,this.customer)).then(this.updated)},updated(){_.forEach(this.params,((t,e)=>this.params[e]=void 0)),this.loading=!1},remove(){this.processing=!0,remove_upload("customer",this.id).then((({data:t})=>this.processing=!(this.img=t.image)))},upload(t){t&&(this.processing=!0,upload("customer",this.id,t).then((({data:t})=>this.processing=!(this.img=t.image))))}}},l=o,c=s("2877"),d=s("f09f"),u=s("a370"),m=s("27f9"),p=s("ddd8"),h=s("4b7e"),b=s("9c40"),f=s("7d53"),g=s("0016"),v=s("7f67"),q=s("eebe"),y=s.n(q),k=Object(c["a"])(l,i,a,!1,null,null,null);e["a"]=k.exports;y()(k,"components",{QCard:d["a"],QCardSection:u["a"],QInput:m["a"],QSelect:p["a"],QCardActions:h["a"],QBtn:b["a"],QFile:f["a"],QIcon:g["a"]}),y()(k,"directives",{ClosePopup:v["a"]})},d83e:function(t,e,s){"use strict";var i=s("b1c1"),a=s("58d1");const n=[location.protocol+"/",location.host,"browser_print"].join("/");e["a"]={mixins:[a["a"]],computed:{browser_print(){return!0===Object(i["B"])(settings("browser_print"))}},methods:{tokenToToken(t){return _.isObject(t)?t:_.find(this.tokens,["id",_.toNumber(t)])},billToToken(t){return _.isObject(t)?this.tokenToToken(t.token):_.get(_.find(this.bills,["id",_.toNumber(t)]),"token",null)},billToBill(t){return _.isObject(t)?t:_.find(this.bills,["id",_.toNumber(t)])},tokenToBill(t){return _.isObject(t)?_.get(this.token_bill,_.toNumber(t.id)):_.get(this.token_bill,_.toNumber(t),null)},url(t){return n+"?"+_.map(t,((t,e)=>`${e}=${t}`)).join("&")},BrowserPrint(t,e,s,i){(t=>{t.addEventListener("load",(()=>setTimeout((t=>t.close()),i||1500,t)),!1),t.attachEvent&&t.attachEvent("onload",(()=>setTimeout((t=>t.close()),i||1500,t)),!1)})(window.open(this.url({page:t,id:e,token:s}),"BrowserPrint"))}}}},db7a:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-list",t._b({},"q-list",t.$attrs,!1),[void 0!==t.payment?e("div",{staticClass:"text-h4 text-center text-bold text-primary q-mb-md"},[e("span",{staticClass:"text-caption",staticStyle:{"line-height":"0.55rem"}},[t._v("Total Payments")]),e("br"),t._v(t._s(t.precision(t.total)))]):t._e(),t._l(t.tokens,(function(s,i){return e("q-item",{key:"osdb-tk-"+s.id+"-idx-"+i},[e("q-item-section",{attrs:{avatar:"",top:""}},[e("q-avatar",{attrs:{rounded:""}},[e("q-img",{attrs:{src:t.image(s.customer.image)}})],1)],1),e("q-item-section",[e("q-item-label",[t._v(t._s(s.id)+", "+t._s(s.customer.name))]),void 0===t.kitchen?e("q-item-label",{attrs:{caption:"",lines:"2"}},[t._v(t._s(s.items.map((t=>t.item.name)).join(", ")))]):t._l(s.items,(function(a,n){return e("q-item-label",{key:"osdb-tk-"+s.id+"-idx-"+i+"ims-"+a.id+"-"+n,attrs:{caption:"",lines:"1"},domProps:{innerHTML:t._s(t.kitchen_view(a))}})})),void 0!==t.address&&s.customer?[e("q-item-label",{attrs:{caption:"",lines:"2"}},[t._v(t._s(s.customer.phone))]),e("q-item-label",{attrs:{caption:"",lines:"2"}},[t._v(t._s(s.customer.address))])]:t._e(),void 0!==t.payment&&t.token_payment(s)?e("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.time(t.payment_date(s))))]):t._e(),void 0!==t.user?[t.token_user(s)?e("q-item-label",{attrs:{caption:""}},[t._v("User: "+t._s(t.token_user(s)))]):t._e(),e("q-item-label",{attrs:{caption:""}},[t._v("Amount: "+t._s(t.precision(t.token_total(s))))])]:t._e(),s.bill&&s.bill.user?e("q-item-label",{attrs:{caption:""}},[t._v(t._s(s.bill.user.role)+": "+t._s(s.bill.user.name))]):t._e()],2),void 0===t.user?e("q-item-section",{attrs:{side:""}},[t._v(t._s(t.precision(t.token_total(s))))]):e("q-item-section",{staticClass:"text-purple text-caption",attrs:{side:""}},[e("q-item-label",{staticClass:"text-bold"},[t._v(t._s(t.token_status(s))+"\n        "),"Billable"===t.token_status(s)?e("q-btn",{staticClass:"flip-horizontal q-mb-xs",attrs:{dense:"",icon:"reply_all",flat:"",size:"sm"},on:{click:function(e){return t.$emit("generate",s)}}}):t._e(),"Deliverable"===t.token_status(s)?e("q-btn",{staticClass:"flip-horizontal q-mb-xs",attrs:{dense:"",icon:"reply_all",flat:"",size:"sm"},on:{click:function(e){return t.$emit("deliver",s)}}}):t._e()],1)],1)],1)}))],2)},a=[],n=(s("caad"),s("b1c1")),r={name:"OrderSummaryDeliveryBoy",props:["tokens","kitchen","address","payment","user"],computed:{Bills(){return void 0===this.payment?[]:_(this.tokens).filter((t=>!!t.bill)).keyBy("token").value()},Payments(){return void 0===this.payment?[]:_(this.Bills).flatMap("payments").groupBy("bill").value()},total(){return _(this.Bills).flatten().sumBy((t=>_.toNumber(t.amount)))}},methods:{image:n["i"],precision:n["z"],time:n["D"],kitchen_view(t){return`${t.quantity}x ${t.item.name}: <span class="text-deep-purple">${t.progress}</span>`+(t.kitchen?` (${t.kitchen.name})`:"")},bill_paid(t){return _.sumBy(t,(({amount:t})=>_.toNumber(t)))},token_payment({id:t}){return _.get(this.Payments,_.get(this.Bills,[t,"id"]))},payment_date(t){return _.get(_.last(this.token_payment(t)),"date")},token_user({user:t,waiter:e,bill:s}){return s&&s.user?_.get(this.$store.state.users.data[parseInt(s.user)],"name"):t?e.name:""},token_total(t){return void 0===this.payment?t.items.reduce(((t,e)=>t+e.quantity*e.price),0):this.token_payment(t)?this.bill_paid(this.Payments[this.Bills[t.id]["id"]]):0},token_status({progress:t,items:e,bill:s}){return s?"Pending"===s.progress?"Deliverable":"Partial"===s.progress?"Partially Paid":"Paid":["New","Accepted"].includes(t)?"New":o(e)?"Billable":"Processing"}}};function o(t){return t.length&&_.every(t,(({progress:t})=>_.includes(["Cancelled","Completed","Served"],t)))}var l=r,c=s("2877"),d=s("1c1c"),u=s("66e5"),m=s("4074"),p=s("cb32"),h=s("068f"),b=s("0170"),f=s("9c40"),g=s("eebe"),v=s.n(g),q=Object(c["a"])(l,i,a,!1,null,null,null);e["a"]=q.exports;v()(q,"components",{QList:d["a"],QItem:u["a"],QItemSection:m["a"],QAvatar:p["a"],QImg:h["a"],QItemLabel:b["a"],QBtn:f["a"]})},e925:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-select",t._b({attrs:{options:t.options,value:t.optValue},on:{input:t.doEmit}},"q-select",t.$attrs,!1))},a=[],n=s("2071"),r={name:"WaiterSelectDropDown",mixins:[n["a"]],computed:{options(){return _(this.$store.state.users.data).filter(["role","Waiter"]).map((t=>Object.assign({},t,{label:this.getName(t),value:t.id}))).value()}}},o=r,l=s("2877"),c=s("ddd8"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=m.exports;u()(m,"components",{QSelect:c["a"]})},ec70:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-card",{class:t.cCls,attrs:{flat:void 0!==t.flat&&t.flat,bordered:void 0!==t.bordered&&t.bordered,dark:void 0!==t.dark&&t.dark}},[t.img?e("q-img",{attrs:{basic:"",src:t.img}},[e("div",{staticClass:"absolute-bottom text-subtitle2 text-center"},[t._v(t._s(t.text))])]):e("q-card-section",[t.icon?e("q-icon",{attrs:{name:t.icon,size:t.size||"sm"}}):t._e(),e("div",{class:"text-"+(t.weight||"bold")},[t._v(t._s(t.text))])],1)],1)},a=[],n={name:"Jumbotron",props:["text","icon","weight","size","bordered","flat","img","color","font","dark"],computed:{cCls(){return _([]).concat(this.color?"bg-"+this.color:null).concat(this.font?"text-"+this.font:null).filter().value()}}},r=n,o=s("2877"),l=s("f09f"),c=s("068f"),d=s("a370"),u=s("0016"),m=s("eebe"),p=s.n(m),h=Object(o["a"])(r,i,a,!1,null,null,null);e["a"]=h.exports;p()(h,"components",{QCard:l["a"],QImg:c["a"],QCardSection:d["a"],QIcon:u["a"]})},ed79:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-btn",{class:{spin:t.since<1},attrs:{flat:"",round:"",dense:"",icon:"sync",disable:t.since<3},on:{click:function(e){return t.$store.dispatch("server/ping")}}})},a=[],n=s("2f62"),r={name:"ManualSync",data(){return{now:0}},computed:Object(n["d"])("server",{since({pinged:t}){return this.now-t}}),created(){setInterval((t=>t.now=_.toInteger((new Date).getTime()/1e3)),1e3,this)}},o=r,l=s("2877"),c=s("9c40"),d=s("eebe"),u=s.n(d),m=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=m.exports;u()(m,"components",{QBtn:c["a"]})},faa7:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-expansion-item",t._b({scopedSlots:t._u([{key:"header",fn:function(){return[e("q-item-section",{attrs:{avatar:"",top:""}},[e("q-avatar",{attrs:{rounded:""}},[e("q-img",{attrs:{src:t.image(t.token.customer.image)}})],1)],1),e("q-item-section",[e("q-item-label",{class:"text-"+t.clr},[t._v(t._s(t.label))]),t.caption?e("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(t.caption))]):t._e(),e("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(t.item_short))]),t.user?e("q-item-label",{staticClass:"text-red",attrs:{caption:""}},[e("q-icon",{attrs:{name:"done_all",size:"xs"}}),t._v(" Billed By: "+t._s(t.user))],1):t._e()],1),e("q-item-section",{attrs:{side:""}},[e("q-badge",{staticClass:"q-py-xs q-px-sm text-bold",attrs:{outline:"",color:t.clr,label:t.precision(t.total)}})],1)]},proxy:!0}])},"q-expansion-item",t.$attrs,!1),[e("q-card",[t.token.narration?e("q-card-section",{staticClass:"q-py-xs text-italic",class:"text-"+t.clr,staticStyle:{"font-size":"0.75rem"}},[t._v("Narration: "+t._s(t.token.narration))]):t._e(),e("q-list",{attrs:{separator:""}},t._l(t.items,(function(s){return e("q-item",{key:"dbe-t"+t.token.id+"-ti-"+s.id+"-i-"+s.item.id},[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{attrs:{rounded:""}},[e("q-img",{attrs:{src:t.image(s.item.image)}})],1)],1),e("q-item-section",[e("q-item-label",{staticStyle:{"font-size":"0.65rem"},attrs:{caption:""}},[t._v("Rate: "+t._s(t.precision(s.price)))]),e("q-item-label",{staticClass:"text-bold",class:"text-"+t.clr},[t._v(t._s(s.quantity)+"x "+t._s(s.item.name))]),s.narration?e("q-item-label",{staticClass:"text-red",attrs:{caption:""}},[t._v(t._s(s.narration))]):t._e(),s.kitchen?e("q-item-label",{staticStyle:{"font-size":"0.65rem"},attrs:{caption:""}},[t._v("Kitchen: "+t._s(s.kitchen.name))]):t._e()],1),e("q-item-section",{staticClass:"text-bold",class:"text-"+t.clr,attrs:{side:""}},[t._v(t._s(t.precision(s.price*s.quantity)))])],1)})),1),t.token.customer.id?e("q-card-section",{staticClass:"q-gutter-y-xs bg-grey-1"},[e("q-input",{attrs:{label:"Customer Phone",value:t.token.customer.phone,outlined:"",dense:"",color:t.clr}}),e("q-input",{attrs:{label:"Customer Address",type:"textarea",value:t.token.customer.address,readonly:"",outlined:"",dense:"",autogrow:""}})],1):t._e(),e("q-card-actions",{attrs:{align:"center"}},[t.Bill?e("q-btn",{attrs:{label:"Delivered",color:"positive",padding:"xs md"},on:{click:function(e){return t.$emit("action",["delivery_pay",t.token])}}}):e("q-btn",{attrs:{label:"Generate Bill",color:"red",padding:"xs md"},on:{click:function(e){return t.$emit("action",["delivery_bill",t.token])}}})],1),e("BrowserPrintCardActions",{attrs:{token:t.token}})],1)],1)},a=[],n=s("b1c1"),r=s("36d9"),o={name:"TokenDetailDeliveryBoyExpansion",components:{BrowserPrintCardActions:r["a"]},props:["label","caption","token","color"],computed:{clr(){return this.color||"primary"},me(){return _.get(this.$route.meta,["me","id"])},items(){return _.filter(_.get(this.token,"items"),(t=>"Cancelled"!==t.progress))},item_short(){return _(this.items).map((t=>_.get(t,["item","name"]))).join(", ")},quantities(){return _.sumBy(this.items,(({quantity:t})=>_.toNumber(t)))},total(){return this.Bill?this.Bill.payable-this.Bill.paid:_.sumBy(this.items,(({quantity:t,price:e})=>_.toNumber(t)*_.toNumber(e)))},Bill(){return _.get(this.token,["bill"])},user(){let t=_.get(this.Bill,["user"]);return!(!t||t.id===this.me)&&t.name}},methods:{precision:n["z"],image:n["i"],truncate(t,e){return _.truncate(t,{length:e,separator:".."})}}},l=o,c=s("2877"),d=s("3b73"),u=s("4074"),m=s("cb32"),p=s("068f"),h=s("0170"),b=s("0016"),f=s("58a8"),g=s("f09f"),v=s("a370"),q=s("1c1c"),y=s("66e5"),k=s("27f9"),x=s("4b7e"),C=s("9c40"),w=s("eebe"),Q=s.n(w),S=Object(c["a"])(l,i,a,!1,null,null,null);e["a"]=S.exports;Q()(S,"components",{QExpansionItem:d["a"],QItemSection:u["a"],QAvatar:m["a"],QImg:p["a"],QItemLabel:h["a"],QIcon:b["a"],QBadge:f["a"],QCard:g["a"],QCardSection:v["a"],QList:q["a"],QItem:y["a"],QInput:k["a"],QCardActions:x["a"],QBtn:C["a"]})},fdfe:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("q-card",[e("q-card-section",{staticClass:"bg-grey-2 row items-center q-py-xs"},[e("div",{staticClass:"text-bold"},[t._v("Select Menu")]),e("q-space"),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"text-weight-bold",class:{rotate:t.loading},attrs:{round:"",icon:t.loading?"loop":"clear",flat:"",color:"red-12"}})],1),t.menus_count?e("q-list",{attrs:{separator:"",bordered:""}},t._l(t.menus,(function(s){return e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.hKey(s),attrs:{tag:"label",clickable:"",disable:t.loading},on:{click:function(e){t.selected=s}}},[e("q-item-section",[e("q-item-label",[t._v(t._s(s.name))])],1),e("q-item-section",{attrs:{side:""}},[e("q-icon",{attrs:{size:"lg",name:"toggle_"+(t.is_selected(s)?"on":"off"),color:t.is_selected(s)?"positive":"grey"}})],1)],1)})),1):e("q-card-section",{staticClass:"text-red"},[t._v("It seems there is no any menu created. Ask administrator to create a menu")])],1)},a=[],n=(s("caad"),s("b1c1")),r={name:"MenuSelect",props:["type"],data(){return{loading:!1}},computed:{menus(){return _.filter(this.$store.state.menus.data,["status","Active"])},menus_count(){return _.size(this.menus)},type_name(){return _.snakeCase([this.type||"Dining","Menu"].join(" "))},selected:{get(){return _.get(this.$store.state.public,this.type_name,[])},set({id:t}){this.loading=!0,this.$store.commit("public",{[this.type_name]:[t]}),this.type&&"Dining"!==this.type||this.$store.dispatch("menus/toggle",parseInt(t),{root:!0})}}},methods:{is_selected({id:t}){return this.selected.includes(t)},hKey({id:t}){return Object(n["e"])("waiter","menu","select",t)}},created(){let t=this.$store.state;t.menus.s_items.length&&"Dining"===this.type&&!_.size(_.get(t.public,"dining_menu",[]))&&this.$store.commit("public",{dining_menu:t.menus.s_items}),this.selected.length||1!==this.menus_count||(this.selected=_.head(_.values(this.menus)));let e="menus/"+_.snakeCase(this.type),s=this.$store.getters[e];s&&(this.selected={id:s})},watch:{selected(t){if(t&&!_.isEmpty(t))return this.$emit("selected")}}},o=r,l=s("2877"),c=s("f09f"),d=s("a370"),u=s("2c91"),m=s("9c40"),p=s("1c1c"),h=s("66e5"),b=s("4074"),f=s("0170"),g=s("0016"),v=s("7f67"),q=s("714f"),y=s("eebe"),k=s.n(y),x=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=x.exports;k()(x,"components",{QCard:c["a"],QCardSection:d["a"],QSpace:u["a"],QBtn:m["a"],QList:p["a"],QItem:h["a"],QItemSection:b["a"],QItemLabel:f["a"],QIcon:g["a"]}),k()(x,"directives",{ClosePopup:v["a"],Ripple:q["a"]})}}]);