(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[67],{"9fe4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{attrs:{padding:""}},[a("ReportCard",{attrs:{title:"Payments",head:e.head,index:"",table:e.table,foot:e.foot,center:["Token/Bill","Items"],right:["Bill Amount","Payment Amount","Bill Balance"]}})],1)},l=[],r=(a("5db7"),a("73d9"),a("ddb0"),a("460a")),i=a("b1c1"),s=a("58d1"),o={name:"ReportBillPayments",components:{ReportCard:r["a"]},mixins:[s["a"]],computed:{range(){return Object(i["z"])(this.$store.state.public.range)},head(){return _.zipObject(["Report","Date From","Date To"],["Bills Payments",Object(i["D"])("ddd - Do MMM hh:mm A",this.range.from),Object(i["D"])("ddd - Do MMM hh:mm A",this.range.to)])},date_bills(){return _(this.bills).filter((({progress:e,payments:t})=>"Cancelled"!==e&&t.length&&m(t,this.range.from,this.range.to))).value()},payments(){return _(this.date_bills).flatMap((e=>_.map(e.payments,(t=>Object.assign({},t,{bill:e}))))).filter((({date:e})=>Object(i["i"])(e,this.range.from,this.range.to))).sortBy((({date:e})=>Object(i["d"])(e).getTime())).value()},table(){return _(this.payments).map((({id:e,date:t,type:a,bill:n,amount:l})=>_.zipObject(["ID","Date","Type","Customer","Bill/Token","Bill Amount","Payment Amount","Bill Balance"],[e,Object(i["f"])(t,!0),a,n.customer.name,[n.id,n.token.id].join("/"),Object(i["y"])(n.payable),Object(i["y"])(l),Object(i["y"])(n.payable-n.paid)]))).value()},foot(){let e=_(this.table).groupBy("Type").mapValues((e=>Object(i["y"])(_.sumBy(e,(e=>_.toNumber(e["Payment Amount"])))))).value(),t=_.zipObject(["Payments","Total"],[_.size(this.table),Object(i["y"])(_.sum(_.map(_.values(e),_.toNumber)))]);return Object.assign({},e,t)}}};function m(e,t,a){return _.some(e,(({date:e})=>Object(i["i"])(e,t,a)))}var b=o,u=a("2877"),c=a("9989"),p=a("eebe"),d=a.n(p),y=Object(u["a"])(b,n,l,!1,null,null,null);t["default"]=y.exports;d()(y,"components",{QPage:c["a"]})}}]);