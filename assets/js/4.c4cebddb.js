(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"43fa":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-img",{attrs:{basic:"",src:t.image}},[t.title?s("div",{staticClass:"absolute-bottom text-subtitle2 text-center",domProps:{textContent:t._s(t.title)}}):t._e(),void 0!==t.info?s("span",{staticClass:"absolute-top-right bg-transparent q-pr-xs q-pt-xs"},[s("q-btn",{staticStyle:{transform:"rotate(180deg)"},attrs:{icon:"error_outline",flat:"",round:"",padding:"0",size:"md",color:"white",dense:""},on:{click:function(e){return e.stopPropagation(),t.$emit("info",!0)}}})],1):t._e()])},n=[],i={name:"CardImageTitle",props:["image","title","info"]},r=i,o=s("2877"),c=s("068f"),l=s("9c40"),u=s("eebe"),m=s.n(u),d=Object(o["a"])(r,a,n,!1,null,null,null);e["a"]=d.exports,m()(d,"components",{QImg:c["a"],QBtn:l["a"]})},"5f49":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{attrs:{padding:""}},[s("div",{staticClass:"row q-col-gutter-xs"},t._l(t.tokens,(function(e){return s("div",{key:t.hKey(e),staticClass:"col-xs-6 col-sm-4 col-md-3 col-lg-2 col-xl-2"},[s("TokenDetailCard",{attrs:{id:e.id}})],1)})),0)])},n=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"bg-light-blue q-pa-xs"}),s("q-card-section",{staticClass:"q-pb-none"},[s("div",{staticClass:"text-bold"},[t._v("ID: "+t._s(t.token.id))]),s("div",{staticClass:"text"},[t._v("Seat: "+t._s(t.seating.name))]),t.customer?s("div",{staticClass:"text-caption"},[t._v("Customer: "+t._s(t.customer.name))]):t._e(),s("div",{staticClass:"text-caption"},[t._v("Date: "+t._s(t.token.date))]),t.customer?t._e():s("OrderCustomer",{staticClass:"q-mt-sm",on:{customer:t.assignCustomer}})],1),s("q-card-actions",{staticClass:"q-gutter-y-xs",attrs:{align:"center",vertical:""}},[s("q-select",{staticClass:"full-width",attrs:{label:"Tax",dense:"",options:t.tax_natures,outlined:""},model:{value:t.tax,callback:function(e){t.tax=e},expression:"tax"}}),s("q-input",{attrs:{type:"number",dense:"",label:"discount",outlined:""},model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}}),s("q-btn",{attrs:{label:"Generate Bill",dense:"",color:"primary",loading:t.loading},on:{click:t.generate}})],1),s("q-list",{attrs:{bordered:"",separator:""}},t._l(t.items_amount,(function(e){return s("q-item",{key:t.hKey(e)},[s("q-item-section",[s("q-item-label",[t._v(t._s(e.quantity)+" x "+t._s(t.itemName(e)))]),s("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.quantity)+" x "+t._s(t.precision(e.price)))])],1),s("q-item-section",{staticClass:"text-black",attrs:{side:""}},[t._v("\n        "+t._s(t.precision(e.amount))+"\n      ")])],1)})),1),s("q-card-actions",{attrs:{align:"right"}},[s("div",{staticClass:"text-h6"},[t._v(t._s(t.precision(t.total)))])])],1)},r=[],o=s("43fa"),c=s("b1c1"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-select",{attrs:{outlined:"",dense:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:t.options,label:"Select Customer",clearable:""},on:{filter:t.filter,"new-value":t.createCustomer},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}}),s("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.create_mode,callback:function(e){t.create_mode=e},expression:"create_mode"}},[s("CustomerCreate",{staticStyle:{width:"700px","max-width":"60vw"},attrs:{param:t.param,param_value:t.param_value},on:{close:t.closeCreate,customer:t.closeCreate}})],1)],1)},u=[],m=(s("c975"),s("ddb0"),s("75b8")),d={name:"OrderCustomer",components:{CustomerCreate:m["a"]},data(){return{create_mode:!1,param:"name",param_value:"",customer:null,options:[]}},computed:{customers(){return this.$store.state.customers.data}},methods:{filter(t,e){e((()=>{const e=(t||"").toLowerCase();this.options=e?Object(c["d"])(this.customers).filter((t=>_.values(t).join(" ").toLowerCase().indexOf(e)>-1)):Object(c["d"])(this.customers)}))},createCustomer(t){this.param=_.toNumber(t)==t?"phone":"name",this.param_value=t,this.customer=null,this.create_mode=!0},closeCreate(t){this.create_mode=!1,this.customer=t?Object(c["c"])(t):null}},created(){this.options=Object(c["d"])(this.customers)},watch:{customer(t){this.$emit("customer",t)}}},p=d,h=s("2877"),b=s("ddd8"),f=s("24e8"),g=s("eebe"),C=s.n(g),v=Object(h["a"])(p,l,u,!1,null,null,null),x=v.exports;C()(v,"components",{QSelect:b["a"],QDialog:f["a"]});var q={name:"TokenDetailCard",components:{OrderCustomer:x,CardImageTitle:o["a"]},props:["id"],data(){return{loading:!1,src:"https://cdn.quasar.dev/img/parallax2.jpg",tax:null,discount:0}},computed:{token(){return _.get(this.$store.state.tokens.data,_.toInteger(this.id))},seating(){return _.get(this.$store.state.seating.data,_.toInteger(this.token.seating))},customer(){return _.get(this.$store.state.customers.data,_.toInteger(this.token.customer))},items(){return _.filter(_.get(this.$store.state.tokens.items,_.toInteger(this.token.id)),(({progress:t})=>"Cancelled"!==t))},items_id(){return _.map(this.items,"item")},prices(){return _(this.$store.state.prices.data).filter((({price_list:t,item:e})=>this.token.price_list===t&&this.items_id.includes(e))).mapKeys("item").mapValues((({price:t})=>_.toNumber(t))).value()},items_amount(){return _.map(this.items,(({item:t,quantity:e,id:s})=>_.zipObject(["id","item","price","quantity","amount"],[s,t,this.prices[t],e,this.prices[t]*e])))},total(){return _.sumBy(this.items_amount,"amount")},tax_natures(){return this.$store.getters["tax/natures"]}},methods:{precision(t){return Object(c["f"])(t)},hKey({id:t}){return Object(c["a"])("receptionist","token",this.id,"item",t)},itemName({item:t}){return _.get(this.$store.state.items.data,[_.toInteger(t),"name"])},assignCustomer({id:t}){post("token","customer",{token:this.id,customer:t})},generate(){if(this.loading=!0,!this.id||!this.customer)return this.loading=!1;let t={token:this.id,customer:this.customer.id,discount:this.discount,nature:this.tax};post("bill","create",t).then().catch().then((()=>this.loading=!1))}}},k=q,y=s("f09f"),w=s("a370"),Q=s("4b7e"),j=s("27f9"),O=s("9c40"),$=s("1c1c"),I=s("66e5"),S=s("4074"),D=s("0170"),N=Object(h["a"])(k,i,r,!1,null,null,null),T=N.exports;C()(N,"components",{QCard:y["a"],QCardSection:w["a"],QCardActions:Q["a"],QSelect:b["a"],QInput:j["a"],QBtn:O["a"],QList:$["a"],QItem:I["a"],QItemSection:S["a"],QItemLabel:D["a"]});var E={name:"PageReceptionistTokens",components:{TokenDetailCard:T},computed:{tokens(){return _.filter(this.$store.state.tokens.data,["progress","Completed"])}},methods:{hKey({id:t}){return Object(c["a"])("receptionist","token","details",t)}}},L=E,B=s("9989"),K=Object(h["a"])(L,a,n,!1,null,null,null);e["default"]=K.exports,C()(K,"components",{QPage:B["a"]})},"75b8":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",[s("q-card-section",{staticClass:"row items-center q-pb-none"},[s("div",{staticClass:"text-h6"},[t._v("New Customer")]),s("q-space"),s("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){return t.$emit("close",null)}}})],1),s("q-card-section",{staticClass:"q-gutter-xs"},[s("q-input",{attrs:{dense:"",outlined:"",label:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("q-input",{attrs:{dense:"",outlined:"",label:"Phone"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),s("q-input",{attrs:{dense:"",type:"email",outlined:"",label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("q-input",{attrs:{dense:"",type:"textarea",outlined:"",label:"Address"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{staticClass:"text-grey",attrs:{color:"primary",label:"Reset",type:"reset",flat:""},on:{click:function(e){return e.preventDefault(),t.reset(e)}}}),s("q-btn",{attrs:{color:"primary",label:"Submit",type:"submit"},on:{click:function(e){return e.preventDefault(),t.submit(e)}}})],1)],1)},n=[],i={name:"CustomerCreate",props:["param","param_value"],data(){return{name:"",phone:"",email:"",address:""}},methods:{reset(){this.name=this.phone=this.email=this.address=""},submit(){if(!this.name&&!this.phone)return;let t=_.zipObject(["name","phone","email","address"],[this.name,this.phone,this.email,this.address]);post("customer","create",t).then((t=>{this.$emit("customer",t),this.reset()}))}},created(){this[this.param]=this.param_value}},r=i,o=s("2877"),c=s("f09f"),l=s("a370"),u=s("2c91"),m=s("9c40"),d=s("27f9"),p=s("4b7e"),h=s("eebe"),b=s.n(h),f=Object(o["a"])(r,a,n,!1,null,null,null);e["a"]=f.exports,b()(f,"components",{QCard:c["a"],QCardSection:l["a"],QSpace:u["a"],QBtn:m["a"],QInput:d["a"],QCardActions:p["a"]})},b1c1:function(t,e,s){"use strict";function a(){return Array.from(arguments).join("-")}function n(t){return _.assign({},t,{label:[t.name,t.phone].join(", ")})}function i(t){return _(t).map(n).value()}function r(t,e){return _.toNumber(t).toFixed(e||2)}function o(t,e,s){let a=_.map(e,(e=>t[e])).join(s||",");return _.assign({},t,{label:a})}function c(t,e,s){return _.map(t,(t=>o(t,e,s||", ")))}function l(t,e,s){return _.includes(_.values(_.pick(t,e)).join(" ").toLowerCase(),s.toString().toLowerCase())}s.d(e,"a",(function(){return a})),s.d(e,"c",(function(){return n})),s.d(e,"d",(function(){return i})),s.d(e,"f",(function(){return r})),s.d(e,"e",(function(){return c})),s.d(e,"b",(function(){return l})),s("ddb0")}}]);