(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"509f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("a",{attrs:{href:"http://sk/logout?token="+t.token}},[t._v("Logout")]),a("div",{staticClass:"row q-col-gutter-xs items-start"},t._l(t.tokens,(function(e,n){return a("div",{key:t.hKey(e),staticClass:"col-xs-6 col-sm-4 col-md-3 col-2"},[a("OrderSummaryWaiterItem",{attrs:{id:n}})],1)})),0),a("q-page-sticky",{attrs:{position:"bottom-right",offset:[24,24]}},[a("q-btn",{attrs:{fab:"",icon:"add",color:"primary",glossy:"",to:{name:"order_new"}}})],1)],1)},r=[],s=(a("ddb0"),a("2b3d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",[a("q-img",{attrs:{basic:"",src:t.src}},[a("div",{staticClass:"absolute-bottom text-subtitle2 text-center"},[t._v(t._s(t.seat.name))])]),a("q-card-actions",[a("q-badge",{attrs:{label:t.token.progress}}),a("q-space"),"Billed"!==t.token.progress?a("q-btn",{attrs:{icon:"add_box",color:"primary",flat:"",dense:""},on:{click:function(e){t.add_mode=!0}}}):t._e()],1),a("OrderSummaryWaiterOrderItemsList",{attrs:{order:t.id}}),"Billed"!==t.token.progress?a("q-dialog",{attrs:{persistent:""},model:{value:t.add_mode,callback:function(e){t.add_mode=e},expression:"add_mode"}},[a("OrderSummaryItemAdd",{staticStyle:{width:"700px","max-width":"60vw"},attrs:{token:t.id},on:{close:function(e){t.add_mode=!1}}})],1):t._e()],1)}),i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-list",{attrs:{separator:"",bordered:""}},[t._l(t.rows,(function(e){return a("q-item",{key:t.hKey(e),attrs:{dense:""}},[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.quantity)+" x "+t._s(t.itemName(e)))]),e.narration?a("q-item-label",{attrs:{lines:"1",caption:""}},[t._v(t._s(e.narration))]):t._e(),e.delay?a("q-item-label",{attrs:{lines:"1",caption:""}},[t._v("Delay: "+t._s(e.delay))]):t._e(),t.kitchen(e)?a("q-item-label",{attrs:{lines:"1",caption:""}},[t._v("Kitchen: "+t._s(t.kitchen(e)))]):t._e()],1),a("q-item-section",{attrs:{side:""}},[a("q-badge",{attrs:{label:e.progress}})],1),a("q-item-section",{attrs:{side:""}},[t.editable(e)?a("q-btn",{attrs:{icon:"edit",color:"warning",dense:"",flat:"",size:"sm"},on:{click:function(a){t.edit_mode=!!(t.edit_obj=e)}}}):t._e(),"Completed"===e.progress?a("q-btn",{attrs:{icon:"how_to_reg",color:"positive",dense:"",flat:"",size:"sm"},on:{click:function(a){return t.served(e)}}}):t._e()],1)],1)})),a("q-dialog",{attrs:{persistent:""},model:{value:t.edit_mode,callback:function(e){t.edit_mode=e},expression:"edit_mode"}},[a("OrderSummaryItemUpdate",t._b({staticStyle:{width:"700px","max-width":"60vw"},attrs:{token:t.order},on:{close:function(e){t.edit_mode=!!(t.edit_obj=null)}}},"OrderSummaryItemUpdate",t.edit_obj,!1))],1)],2)},d=[],l=a("ded3"),c=a.n(l),m=a("2f62"),u=a("b1c1"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("Update "+t._s(t.name))]),a("q-space"),a("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){return t.$emit("close",null)}}})],1),a("q-card-section",{staticClass:"q-gutter-xs q-pb-none"},[a("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Quantity"},model:{value:t.params.quantity,callback:function(e){t.$set(t.params,"quantity",t._n(e))},expression:"params.quantity"}}),a("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Delay in Minutes"},model:{value:t.params.delay,callback:function(e){t.$set(t.params,"delay",t._n(e))},expression:"params.delay"}}),a("q-input",{attrs:{dense:"",type:"textarea",outlined:"",label:"Narration if any"},model:{value:t.params.narration,callback:function(e){t.$set(t.params,"narration",e)},expression:"params.narration"}})],1),a("q-card-actions",{staticClass:"q-px-md q-pt-xs",attrs:{align:"right"}},[a("q-btn",{attrs:{color:"danger",label:"Cancel",type:"submit",flat:"",dense:"",disable:t.loading},on:{click:function(e){return e.preventDefault(),t.cancel(e)}}}),a("q-btn",{attrs:{color:"primary",label:"Update Item",type:"submit",loading:t.loading},on:{click:function(e){return e.preventDefault(),t.update(e)}}})],1)],1)},b=[],h={name:"OrderSummaryItemUpdate",props:["token"],data(){return{loading:!1,params:{item:null,quantity:1,narration:"",delay:0,id:null}}},computed:{name(){return _.get(this.$store.state.items,[this.params.item,"name"])}},methods:{cancel(){this.loading=!0,post("token","cancel",{id:this.params.id}).then((()=>{this.$emit("close")})).catch().then((()=>this.loading=!1))},update(){this.loading=!0,post("token","item",this.params).then((()=>this.$emit("close"))).catch().then((()=>this.loading=!1))}},created(){_.forEach(["item","quantity","narration","delay","id"],(t=>this.params[t]=_.get(this.$attrs,t)))}},f=h,g=a("2877"),y=a("f09f"),q=a("a370"),k=a("2c91"),v=a("9c40"),x=a("27f9"),Q=a("4b7e"),O=a("eebe"),S=a.n(O),I=Object(g["a"])(f,p,b,!1,null,null,null),j=I.exports;S()(I,"components",{QCard:y["a"],QCardSection:q["a"],QSpace:k["a"],QBtn:v["a"],QInput:x["a"],QCardActions:Q["a"]});var w={name:"OrderSummaryWaiterOrderItemsList",components:{OrderSummaryItemUpdate:j},props:["order"],data(){return{edit_mode:!1,edit_obj:null}},computed:c()({rows(){return _.get(this.$store.state.tokens.items,_.toInteger(this.order),[])}},Object(m["c"])({items:({items:{data:t}})=>t,kitchens:({kitchens:{data:t}})=>t})),methods:{hKey({id:t,item:e}){return Object(u["a"])("waiter","order","items","list","item",e,"id",t)},itemName({item:t}){return _.get(this.items,[_.toSafeInteger(t),"name"])},kitchen({kitchen:t}){return _.get(this.kitchens,[_.toSafeInteger(t),"name"],null)},editable({progress:t}){return["New","Accepted"].includes(t)},edit(t){this.edit_obj=t,this.edit_mode=!0},served({id:t}){post("token","served",{id:t})}}},C=w,$=a("1c1c"),A=a("66e5"),B=a("4074"),L=a("0170"),D=a("58a8"),U=a("24e8"),E=Object(g["a"])(C,o,d,!1,null,null,null),N=E.exports;S()(E,"components",{QList:$["a"],QItem:A["a"],QItemSection:B["a"],QItemLabel:L["a"],QBadge:D["a"],QBtn:v["a"],QDialog:U["a"]});var W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("Add Item")]),a("q-space"),a("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){return t.$emit("close",null)}}})],1),a("q-card-section",{staticClass:"q-gutter-xs q-pb-none"},[a("q-select",{attrs:{outlined:"",dense:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:t.item_options,label:"Select Item",clearable:""},on:{filter:t.filter},model:{value:t.item_obj,callback:function(e){t.item_obj=e},expression:"item_obj"}}),a("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Quantity"},model:{value:t.params.quantity,callback:function(e){t.$set(t.params,"quantity",t._n(e))},expression:"params.quantity"}}),a("q-input",{attrs:{dense:"",outlined:"",type:"number",label:"Delay in Minutes"},model:{value:t.params.delay,callback:function(e){t.$set(t.params,"delay",t._n(e))},expression:"params.delay"}}),a("q-input",{attrs:{dense:"",type:"textarea",outlined:"",label:"Narration if any"},model:{value:t.params.narration,callback:function(e){t.$set(t.params,"narration",e)},expression:"params.narration"}})],1),a("q-card-actions",{staticClass:"q-px-md q-pt-xs",attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"Add Item",type:"submit",loading:t.loading},on:{click:function(e){return e.preventDefault(),t.add(e)}}})],1)],1)},K=[],P=(a("c975"),{name:"OrderSummaryItemAdd",props:["token"],data(){return{item_obj:null,add_item_mode:!1,item_options:[],loading:!1,params:{item:null,quantity:1,narration:"",delay:0,token:null}}},computed:c()(c()({},Object(m["c"])({items:({items:{data:t}})=>t,token_items:({tokens:{items:t}})=>t})),{},{items_in_token(){return _.map(this.token_items[_.toSafeInteger(this.token)],(({item:t})=>_.toSafeInteger(t)))}}),methods:{filter(t,e){e((()=>{const e=(t||"").toLowerCase();this.item_options=e?Object(u["d"])(this.items,["name"]).filter((t=>_.values(t).join(" ").toLowerCase().indexOf(e)>-1)):Object(u["d"])(this.items,["name"])}))},add(){if(this.loading=!0,this.params.item=_.get(this.item_obj,"id",null),this.params.token=this.token,!this.params.quantity||!this.params.item||!this.params.token)return this.loading=!1;post("token","item",this.params).then((()=>this.$emit("close"))).catch().then((()=>this.loading=!1))}},created(){this.item_options=Object(u["d"])(this.items,["name"],"")}}),z=P,J=a("ddd8"),M=Object(g["a"])(z,W,K,!1,null,null,null),F=M.exports;S()(M,"components",{QCard:y["a"],QCardSection:q["a"],QSpace:k["a"],QBtn:v["a"],QSelect:J["a"],QInput:x["a"],QCardActions:Q["a"]});var R={components:{OrderSummaryItemAdd:F,OrderSummaryWaiterOrderItemsList:N},data(){return{src:"https://cdn.quasar.dev/img/parallax2.jpg",add_mode:!1}},props:["id"],name:"OrderSummaryWaiterOrder",computed:{token(){return _.get(this.$store.state.tokens.data,_.toSafeInteger(this.id))},seat(){return _.get(this.$store.state.seating.data,_.toSafeInteger(this.token.seating))}}},G=R,H=a("068f"),T=Object(g["a"])(G,s,i,!1,null,null,null),V=T.exports;S()(T,"components",{QCard:y["a"],QImg:H["a"],QCardActions:Q["a"],QBadge:D["a"],QSpace:k["a"],QBtn:v["a"],QDialog:U["a"]});var X={name:"PageOrders",components:{OrderSummaryWaiterItem:V},data(){return{token:new URLSearchParams(document.location.search.substring(1)).get("token")}},computed:{tokens(){return this.$store.getters["tokens/today"]}},methods:{hKey({id:t}){Object(u["a"])("order","summary","order",t)}}},Y=X,Z=a("9989"),tt=a("de5e"),et=Object(g["a"])(Y,n,r,!1,null,null,null);e["default"]=et.exports,S()(et,"components",{QPage:Z["a"],QPageSticky:tt["a"],QBtn:v["a"]})},b1c1:function(t,e,a){"use strict";function n(){return Array.from(arguments).join("-")}function r(t){return _.assign({},t,{label:[t.name,t.phone].join(", ")})}function s(t){return _(t).map(r).value()}function i(t,e){return _.toNumber(t).toFixed(e||2)}function o(t,e,a){let n=_.map(e,(e=>t[e])).join(a||",");return _.assign({},t,{label:n})}function d(t,e,a){return _.map(t,(t=>o(t,e,a||", ")))}a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"e",(function(){return i})),a.d(e,"d",(function(){return d}))}}]);